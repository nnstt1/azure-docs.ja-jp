---
title: Azure Cosmos DB の従量課金ベースのサーバーレス プラン
description: Azure Cosmos DB の従量課金ベースのサーバーレス プランの詳細について説明します。
author: ThomasWeiss
ms.author: thweiss
ms.service: cosmos-db
ms.topic: conceptual
ms.date: 05/25/2021
ms.openlocfilehash: de2ef5b76e67ae19eca6bbb24c9d65dfc7b602b6
ms.sourcegitcommit: 611b35ce0f667913105ab82b23aab05a67e89fb7
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 10/14/2021
ms.locfileid: "129987311"
---
# <a name="azure-cosmos-db-serverless"></a>Azure Cosmos DB サーバーレス
[!INCLUDE[appliesto-all-apis](includes/appliesto-all-apis.md)]

Azure Cosmos DB サーバーレスでは、従量課金ベースの方法で Azure Cosmos アカウントを使用できます。この方法では、データベース操作によって消費される要求ユニットと、データによって消費されるストレージに対してのみ課金されます。 サーバーレス コンテナーを使用すると、1 秒あたり数千の要求に対応できます。最低料金はなく、キャパシティ プランニングも必要ありません。

> [!IMPORTANT] 
> サーバーレスに関するフィードバックはありますか。 ご意見をお待ちしています。 Azure Cosmos DB サーバーレス チーム ([azurecosmosdbserverless@service.microsoft.com](mailto:azurecosmosdbserverless@service.microsoft.com)) までお気軽にご連絡ください。

Azure Cosmos DB を使用すると、すべてのデータベース操作で[要求ユニット](request-units.md)数で表されるコストがかかります。 このコストの課金方法は、ご利用の Azure Cosmos アカウントの種類によって異なります。

- [プロビジョニングされたスループット](set-throughput.md) モードでは、データベースとコンテナーに対してプロビジョニングされる一定量のスループット (1 秒あたりの要求ユニット数で表される) にコミットする必要があります。 データベース操作のコストは、1 秒ごとに使用可能な要求ユニットの数から差し引かれます。 請求期間が終了すると、プロビジョニングしたスループットの量に対して課金されます。
- サーバーレス モードでは、Azure Cosmos アカウントでコンテナーを作成するときに、スループットをプロビジョニングする必要はありません。 請求期間が終了すると、データベース操作により消費された要求ユニットの数に対して課金されます。

## <a name="use-cases"></a>ユース ケース

Azure Cosmos DB サーバーレスは、アイドル時間が長く、**断続的で予測不可能なトラフィック** が予想されるシナリオに最も適合します。 このような状況では、容量のプロビジョニングは不要であり、コストがかかる場合があります。このため、次のユースケースでは Azure Cosmos DB サーバーレスを検討する必要があります。

- Azure Cosmos DB の作業の開始
- 次のようなアプリケーションを実行する
    - トラフィックが集中的、断続的に発生し、それを予測するのが困難。または
    - トラフィックの平均対ピークの比率が低い (10% 未満)
- トラフィック パターンが不明な新しいアプリケーションを開発、テストし、そのプロトタイプを作成し、運用環境で実行する
- [Azure Functions](../azure-functions/functions-overview.md) のようなサーバーレス コンピューティング サービスとの統合

ユース ケースに最適なプランを選択する方法の詳細については、「[プロビジョニングされたスループットとサーバーレスのどちらかを選択する方法](throughput-serverless.md)」を参照してください。

## <a name="using-serverless-resources"></a>サーバーレス リソースの使用

サーバーレスは、Azure Cosmos アカウントの新しい種類です。つまり、新しいアカウントを作成するときに、**プロビジョニングされたスループット** と **サーバーレス** のどちらかを選択する必要があります。 サーバーレスの使用を開始するには、新しいサーバーレス アカウントを作成する必要があります。 既存アカウントとサーバーレス モードとの間の移行は、現在サポートされていません。

サーバーレス アカウントで作成されたコンテナーはすべて、サーバーレス コンテナーです。 サーバーレス コンテナーでは、プロビジョニングされたスループット モードで作成されたコンテナーと同じ機能が公開されているため、まったく同じ方法でデータの読み取り、書き込み、クエリを実行できます。 ただし、サーバーレス アカウントとコンテナーには固有の特性もあります。

- サーバーレス アカウントは、1 つの Azure リージョンでのみ実行できます。 サーバーレス アカウントを作成した後で、そのアカウントに Azure リージョンを追加することはできません。
- サーバーレス コンテナーでは、スループットのプロビジョニングは必要ないため、次の記述が該当します。
    - サーバーレス コンテナーを作成するときにスループットを渡すことはできず、これを行うとエラーが返されます。
    - サーバーレス コンテナーでスループットを読み取りまたは更新することはできず、これを行うとエラーが返されます。
    - サーバーレス アカウントに共有スループット データベースを作成することはできず、これを行うとエラーが返されます。
- サーバーレス コンテナーには、最大 50 GB のデータとインデックスを格納できます。

## <a name="monitoring-your-consumption"></a>消費量の監視

以前にプロビジョニングされたスループット モードで Azure Cosmos DB を使用したことがあれば、トラフィックがプロビジョニングされた容量に合わない場合、サーバーレスの方がコスト効率が高いことがわかるでしょう。 トレードオフは、データベースが処理した要求の数に基づいて課金されるため、コストの予測可能性が低くなることです。 そのため、現在の消費量から目を離さないことが重要です。

アカウントの **[メトリック]** ペインを参照すると、 **[概要]** タブに **Request Units consumed (消費済み要求ユニット)** という名前のグラフが表示されます。このグラフには、アカウントで消費された要求ユニットの数が示されます。

:::image type="content" source="./media/serverless/request-units-consumed.png" alt-text="消費された要求ユニットを示すグラフ" border="false":::

[こちら](monitor-request-unit-usage.md)に説明されているように、Azure Monitor を使用して同じグラフを見つけることができます。 Azure Monitor では、[アラート](../azure-monitor/alerts/alerts-metric-overview.md)を設定でき、要求ユニットの消費量が特定のしきい値を越えたときに通知を受け取ることに使用できます。

## <a name="performance"></a><a id="performance"></a>パフォーマンス

サーバーレス リソースでは、プロビジョニングされたスループット リソースが提供するものとは異なる、特有のパフォーマンス特性がもたらされます。 サーバーレス コンテナーの待機時間は、サービスレベル目標 (SLO) に記載されるポイント読み取り 10 ミリ秒以下、書き込み 30 ミリ秒以下になります。 ポイント読み取り操作では、1 つの項目をその ID とパーティション キー値でフェッチします。

## <a name="next-steps"></a>次のステップ

サーバーレスの使用を開始するには、次の記事をご覧ください。

- [Azure Cosmos DB の要求ユニット](request-units.md)
- [プロビジョニングされたスループットとサーバーレスのどちらかを選択する](throughput-serverless.md)
- [Azure Cosmos DB の価格モデル](how-pricing-works.md)
