---
title: クイックスタート - Azure IoT Central でルールとアクションを構成する
description: このクイックスタートでは、Azure IoT Central アプリケーションでテレメトリベースのルールとアクションを構成する方法について説明します。
author: dominicbetts
ms.author: dobett
ms.date: 05/27/2021
ms.topic: quickstart
ms.service: iot-central
services: iot-central
ms.custom: mvc
ms.openlocfilehash: 9357198e140a6ba403fcb74787d31a0940554fa7
ms.sourcegitcommit: 7d63ce88bfe8188b1ae70c3d006a29068d066287
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 07/22/2021
ms.locfileid: "114459177"
---
# <a name="quickstart-configure-rules-and-actions-for-your-device-in-azure-iot-central"></a>クイック スタート:Azure IoT Central でデバイスのルールとアクションを構成する

このクイックスタートでは、誰かが自分の電話の画面の向きを変えようとしたときに電子メールを送信する Azure IoT Central ルールを作成します。

## <a name="prerequisites"></a>前提条件

作業を開始する前に、以前の [Azure IoT Central アプリケーションの作成と使用](./quick-deploy-iot-central.md)に関するクイックスタートを完了し、**IoT プラグ アンド プレイ** スマートフォン アプリを Azure IoT Central アプリケーションに接続する必要があります。

## <a name="create-a-telemetry-based-rule"></a>テレメトリベースのルールを作成する

スマートフォン アプリは、加速度計センサーからの値を含むテレメトリを送信します。 電話の画面が表向きのときは、**z** 値は `9` を超え、電話の画面が裏向きのときは、**z** 値は `-9` 未満です。

1. 新しいテレメトリベースのルールを対象のアプリケーションに追加するには、左側のペインで **[規則]** を選択します。

1. 新しいルールを作成するには、 **[ルールの作成]** を選択します。

1. ルール名として、「**Phone turned over**」と入力します。

1. **[ターゲット デバイス]** セクションで、**デバイス テンプレート** として **[IoT プラグ アンド プレイ モバイル]** を選択します。 このオプションは、デバイス テンプレートの種類によってルールが適用されるデバイスをフィルター処理します。 **[+ フィルター]** を選択することで、さらにフィルター条件を追加できます。

1. **[条件]** セクションで、ルールをトリガーする条件を定義します。 加速度計 z 軸テレメトリに基づいて単一の条件を定義するには、次の情報を使用します。 このルールでは集計を使用することで、各デバイスにつき 5 分ごとに最大 1 つの電子メールを受信するようにします。

    | フィールド            | 値            |
    |------------------|------------------|
    | 時間の集計 | オン、5 分ごと    |
    | テレメトリ        | Acceleration / Z |
    | 演算子         | が次の値より小さい     |
    | 集計      | 最小値          |
    | 値            | -9               |

    :::image type="content" source="media/quick-configure-rules/rule-target-condition.png" alt-text="ルール条件を示すスクリーンショット。":::

1. ルールがトリガーされたときに実行する電子メール アクションを追加するには、 **[アクション]** セクションで **[+ 電子メール]** を選択します。

1. 次の表の情報を使用してアクションを定義してから、 **[完了]** を選択します。

    | 設定      | 値                    |
    |--------------|--------------------------|
    | 表示名 | 電話が移動されました         |
    | ターゲット           | メール アドレス       |
    | Notes        | 電話の画面は裏向きです。 |

    > [!TIP]
    > メール通知を受け取るには、メール アドレスが[アプリケーションのユーザー ID](howto-manage-users-roles.md) である必要があります。また、そのユーザーが少なくとも一度アプリケーションにサインインしている必要があります。

    :::image type="content" source="media/quick-configure-rules/rule-action.png" alt-text="ルールに追加された電子メール アクションを示すスクリーンショット":::

1. **[保存]** を選択します。 これでルールが **[ルール]** ページに表示されます。

## <a name="test-the-rule"></a>ルールをテストする

ルールは保存した後すぐに有効になります。 ルールで定義されている条件が満たされると、Azure IoT Central によって、アクションで指定したアドレスにメールが送信されます。

ルールをトリガーするには、スマートフォン アプリがデータを送信しており、机に画面を裏向きに置いてあることを確認します。 アプリは、`-9` 未満の加速度計の z 軸テレメトリ値を送信します。 5 分後に、Azure IoT Central によって、あなたのスマートフォンの画面が裏向きであることを通知するメールが送信されます。

テストの完了後は、ルールを無効にして、受信トレイに届く通知メールを停止します。

## <a name="next-steps"></a>次のステップ

このクイック スタートでは、次の方法について説明しました。

* テレメトリベースのルールを作成する
* アクションを追加する

Azure IoT Central アプリケーションと他のサービスとの統合の詳細については、以下を参照してください。

> [!div class="nextstepaction"]
> [IoT Central アプリケーションからデータをエクスポートして処理する](quick-export-data.md)。
