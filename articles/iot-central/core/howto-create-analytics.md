---
title: Azure IoT Central アプリケーションでデバイス データを分析する | Microsoft Docs
description: Azure IoT Central アプリケーションでデバイス データを分析します。
author: dominicbetts
ms.author: dobett
ms.date: 08/16/2021
ms.topic: how-to
ms.service: iot-central
services: iot-central
ms.openlocfilehash: f8f399ec557bbddd031b386d69436f3376ee42b1
ms.sourcegitcommit: 54e7b2e036f4732276adcace73e6261b02f96343
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 10/12/2021
ms.locfileid: "129808537"
---
# <a name="how-to-use-analytics-to-analyze-device-data"></a>分析を使用してデバイス データを分析する方法

Azure IoT Central では、履歴の傾向を分析し、デバイスのテレメトリを関連付けるための豊富な分析機能を利用できます。 最初に、左側のペインで **[分析]** を選択します。

## <a name="understand-the-analytics-ui"></a>分析 UI について

[分析] ユーザー インターフェイスには、3 つの主要なコンポーネントがあります。

- **データ構成パネル:** 構成パネルでは、データを分析するデバイス グループを選択します。 次に、分析するテレメトリを選択して、それぞれのテレメトリの集計方法を選択します。 **[グループ化]** コントロールは、デバイス プロパティをディメンションとして使用してデータをグループ化するのに役立ちます。

    > [!TIP]
    > デバイスで組織が使用されている場合、表示されるデバイス グループは組織のメンバーシップによって異なります。

- **タイム コントロール:** タイム コントロールを使用して、データを分析する期間を選択します。 タイム スライダーのいずれかの端をドラッグして、期間を選択できます。 タイム コントロールには **[Interval size]\(間隔サイズ\)** スライダーもあり、データ集計に使用するバケットすなわち間隔サイズを制御できます。

- **グラフ コントロール:** グラフ コントロールでは、データが折れ線グラフで視覚化されます。 グラフの凡例を操作すると、特定の線の表示を切り替えることができます。

  :::image type="content" source="media/howto-create-analytics/analytics-ui.png" alt-text="分析 UI の 3 つの領域を示すスクリーンショット。":::

## <a name="query-your-data"></a>データのクエリ

最初に **[デバイス グループ]** を選択し、次に分析するテレメトリを選択します。 それが終わったら、 **[分析]** を選択してデータの視覚化を開始します。

- **[デバイス グループ]:** [デバイス グループ](tutorial-use-device-groups.md)は、ユーザーが定義したデバイスのグループです。 たとえば、**オークランドのすべての冷蔵庫** や、**すべてのバージョン 2.0 の風力タービン** などです。

- **テレメトリ:** 分析して調査するテレメトリを選択します。 複数の種類のテレメトリを選択して、まとめて分析することもできます。 既定の集計方法は、数値データ型では **[平均]** 、文字列では **[回数]** に設定されています。 数値データ型の集計方法は、 **[平均]** 、 **[最大]** 、 **[最小]** 、 **[回数]** 、 **[合計]** です。 **[回数]** は、文字列の唯一の集計方法です。

    > [!NOTE]
    > 古いデータ ポイントは、クエリの条件が true の場合にのみ表示されます。 たとえば、昨日、あるデバイスが **Template1** から **Template2** にアップグレードされたとします。 今日、**Template1** デバイスを含むデバイス グループにクエリを実行すると、昨日およびその前のデバイス データが表示されます。 **Template2** デバイスを含むデバイス グループにクエリを実行すると、アップグレードされた時点以降のデバイスとデータが表示されます。

- **[グループ化]:** **[グループ化]** コントロールは、デバイス プロパティをディメンションとして使用してデータをグループ化するのに役立ちます。 デバイスのテレメトリとプロパティは、デバイスがデータを送信するときにクラウド プロパティと組み合わされます。 クラウドまたはデバイスのプロパティが更新されると、グラフ上でテレメトリが異なる値によってグループ化されていることが確認できます。

    > [!TIP]
    > 各デバイスのデータを個別に表示するには、 **[グループ化]** コントロールで **デバイス ID** を選択します。

## <a name="interact-with-your-data"></a>データと対話する

データにクエリを実行してから、折れ線グラフ上で視覚化できます。 テレメトリの表示と非表示、期間の変更、またはグリッドでのデータ表示を行うことができます。

**[保存]** を選択して分析クエリを保存します。 後で、保存したクエリを取得できます。

- **タイム エディター パネル:** 既定では、最終日のデータが表示されます。 スライダーのいずれかの端をドラッグして、期間を変更できます。 カレンダー コントロールを使用して、事前定義された時間バケットの 1 つを選択することも、カスタムの時間の範囲を選択することもできます。 タイム コントロールには **[Interval size]\(間隔サイズ\)** スライダーもあり、データ集計に使用する間隔サイズを制御できます。

  :::image type="content" source="media/howto-create-analytics/time-editor-panel.png" alt-text="タイム エディター パネルを示すスクリーンショット。":::

  - **内部日付範囲スライダー ツール**: 2 つのエンドポイント コントロールを使用して、必要な期間を強調表示します。 この内部日付範囲は、外部日付範囲スライダー コントロールによって制約を受けます。
  
  - **外部日付範囲スライダー コントロール**: エンドポイント コントロールを使用して、内部日付範囲コントロールに対して使用される外部日付範囲を選択します。

  - **日付範囲の拡大縮小ボタン**:いずれかのボタンを選択して、目的の期間になるように時間範囲を広げたり狭めたりします。

  - **間隔サイズ スライダー**: このスライダーを使用して、同じ期間に対して間隔を拡大および縮小できます。 このコントロールを使用すると、大きい時間スライスの間での動きをより正確に制御できます。 これを使用して、さらに細かく高い解像度 (最小でミリ秒の単位) でデータを見ることができます。 スライダーの既定の始点では、選択したデータが最適に表示されます。 この表示では、解像度、クエリ速度、粒度のバランスが取れています。
  
  - **日付範囲ピッカー**: このコントロールを使用して、目的の日付と時刻の範囲を選択します。 コントロールを使用して、異なるタイム ゾーンに切り替えることもできます。 変更を行った後、現在のワークスペースに適用するには、 **[保存]** を選択します。

  > [!TIP]
  > 間隔サイズは、選択された期間に基づいて動的に決定されます。 期間を短くすると、最小で数秒という非常に細かい間隔でデータを集計できるようになります。

- **グラフの凡例:** グラフの凡例は、グラフ上の選択されたテレメトリを示します。 凡例の項目をポイントすると、それがグラフ上で強調表示されます。 **[グループ化]** を使用すると、選択されたディメンションの値でテレメトリがグループ化されます。 テレメトリの種類ごとに表示を切り替えたり、グループ名をクリックしてグループの表示を切り替えたりできます。  

- **Y 軸の形式コントロール:** Y 軸のモードは、利用可能な Y 軸ビュー オプション間を順に切り替わります。 このコントロールを使用できるのは、複数のテレメトリの種類を視覚化している場合のみです。 次の 3 つのモードがあります:

  - **積み上げ:** テレメトリの種類ごとのグラフが積み上げられ、各グラフに独自の Y 軸があります。 このモードが既定値です。
  - **共有:** テレメトリの種類ごとのグラフが、同じ Y 軸に対してプロットされます。
  - **重複:** このモードを使用して、複数の線を同じ Y 軸に対して積み上げます。Y 軸のデータは選択されている線に応じて変化します。

  :::image type="content" source="media/howto-create-analytics/y-axis-control.png" alt-text="Y 軸コントロールが強調表示されているスクリーンショット。":::

- **ズーム コントロール:** ズーム コントロールを使用すると、データの詳細にさらにドリルダウンできます。 結果セット内で注目する期間が見つかったら、マウス ポインターを使用してその領域を強調表示します。 その後、選択した領域を右クリックして、 **[ズーム]** を選択します。

  :::image type="content" source="media/howto-create-analytics/zoom.png" alt-text="ズーム コントロールの使用を示すスクリーンショット。":::

その他のグラフ コントロールについては、省略記号を選択します。

- **[グリッドの表示]:** 各データ ポイントの値を表示できる表形式で結果を表示します。

- **[CSV としてダウンロードする]:** 結果をコンマ区切り値 (CSV) ファイルとしてエクスポートします。 CSV ファイルには、各デバイスのデータが含まれています。 結果は、指定された間隔と期間を使用してエクスポートされます。

- **[マーカーをドロップする]:** **[マーカーをドロップする]** コントロールを使用すると、特定のデータ ポイントをグラフに固定できます。 この機能は、異なる期間について複数の線のデータを比較する際に役立ちます。

  :::image type="content" source="media/howto-create-analytics/additional-chart-controls.png" alt-text="その他のグラフ コントロールにアクセスする方法を示すスクリーンショット。":::

## <a name="next-steps"></a>次のステップ

組み込みの分析機能を使用してデータを視覚化する方法を学習したところで、次の手順として推奨するのは、[データ エクスポートを使用して IoT データをクラウドの宛先にエクスポートする](howto-export-data.md)方法を学習することです。
