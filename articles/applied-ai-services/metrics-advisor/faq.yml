### YamlMime:FAQ
metadata:
  title: Metrics Advisor に関してよく寄せられる質問
  titleSuffix: Azure Cognitive Services
  description: Metrics Advisor サービスに関してよく寄せられる質問です。
  services: cognitive-services
  author: mrbullwinkle
  manager: nitinme
  ms.service: applied-ai-services
  ms.subservice: metrics-advisor
  ms.topic: conceptual
  ms.date: 11/05/2020
  ms.author: mbullwin
  ms.openlocfilehash: 8dd4272652c38e42b2e09942ff7c6964d723496b
  ms.sourcegitcommit: 901ea2c2e12c5ed009f642ae8021e27d64d6741e
  ms.translationtype: HT
  ms.contentlocale: ja-JP
  ms.lasthandoff: 11/12/2021
  ms.locfileid: "132371583"
title: Metrics Advisor に関してよく寄せられる質問
summary: ''
sections:
- name: 基本的な概念
  questions:
  - question: >
      多次元時系列データとは何ですか?
    answer: >
      用語集で、[多次元メトリック](glossary.md#multi-dimensional-metric)の定義を参照してください。
  - question: >
      Metrics Advisor で異常検出を開始するために必要なデータ量はどのくらいですか?
    answer: >
      データ ポイントが 1 つ以上あれば、異常検出をトリガーできます。 ただし、これによって最適な精度が得られるわけではありません。 このサービスでは、データ フィードの作成時に "fill-gap" ルールとして指定した値を使用する、以前のデータ ポイントのウィンドウがあるものと想定されています。


      検出対象のタイムスタンプの前にデータがあるようにすることをお勧めします。

      データの細分性に基づく、推奨されるデータ量は次のようにさまざまです。


      | 粒度 | 検出に推奨されるデータ量 |

      | ----------- | ------------------------------------- |

      | 5 分未満 | 4 日分のデータ |

      | 5 分から 1 日 | 28 日分のデータ |

      | 1 日分より多く、31 日分まで | 4 年分のデータ |

      | 31 日分より多い | 48 年分のデータ |
  - question: >
      Metrics Advisor ではどのようなデータが処理され、データはどのように保持されますか?
    answer: "- Metrics Advisor は、顧客のデータソースから収集された時系列データを処理します。モデルの選択には履歴データが使用され、予想されるデータの境界を決定します。 \n- 顧客の時系列データと推論結果は、サービス内に格納されます。 顧客がサービス インスタンスをデプロイしたリージョンの外部で、Metrics Advisor によって、顧客データの格納または処理が行われることはありません。\n"
  - question: >
      Metrics Advisor で履歴データからの異常検出が行われないのはなぜですか?
    answer: >
      Metrics Advisor は、ライブ ストリーミング データの検出を目的に設計されています。 このサービスによって検索および異常検出が実行される履歴データの最大長には、制限があります。 これは、特定の最も古いタイムスタンプより後のデータ ポイントに対してのみ、異常検出の結果が示されることを意味します。 最も古いタイムスタンプは、データの細分性によって異なります。


      データの細分性に基づく、異常検出の結果が含まれる履歴データの長さは次のとおりです。


      | 粒度 | 異常検出の対象となる履歴データの最大長 |

      | ----------- | ------------------------------------- |

      | 5 分未満 | オンボード時間 - 13 時間 |

      | 5 分から 1 時間未満 | オンボード時間 - 4 日間  |

      | 1 時間から 1 日未満 | オンボード時間 - 14 日間  |

      | 1 日 | オンボード時間 - 28 日間  |

      | 1 日より長く、31 日間未満 | オンボード時間 - 2 年間  |

      | 31 日分より多い | オンボード時間 - 24 年間   |
  - question: >
      Metrics Advisor のデータ保持と制限について教えてください。
    answer: "1. データ保持。\nMetrics Advisor では、使用可能なデータがあるかどうかにかかわらず、現在のタイムスタンプから最大で **10,000** 個分の時間間隔 ([間隔とは](tutorials/write-a-valid-query.md#what-is-an-interval)) が保持されます。 この時間枠外のデータは削除されます。  さまざまなメトリック細分性で換算したデータ保持期間の日数。\n\n| 細分性 (分) |    リテンション期間 (日数) |\n|------------------| ------------------|\n|  1 | 6.94 |\n|  5 | 34.72|\n| 15 | 104.1|\n| 60 (= 毎時) | 416.67 |\n| 1440 (= 毎日)|10000.00|\n\n2. 1 つのメトリック内の最大時系列数に関する制限。\n\n1 つのメトリック内に複数のディメンションが含まれます。各ディメンションには複数の値が含まれます。 1 つのメトリックにおけるディメンションの組み合わせ最大数は、**100,000** を超えないようにしてください。   \n- データ フィードの詳細ページで **80%** の制限に達すると、Metrics Advisor リソース管理者とデータ フィード所有者に通知されます。 \n- メトリックが制限を超えた場合、データ フィードは **一時停止され**、顧客がフォローアップのアクションを実行するのを待ちます。 フィルター処理により、データ フィードを複数のデータ フィードに分割することをお勧めします。 \n\n3. 1 つの Metrics Advisor インスタンスに格納されるデータ ポイントの最大数に関する制限\n\nMetrics Advisor により、最初のインジェストのタイムスタンプから開始して、インスタンスにオンボードされたすべてのデータ フィードからの合計データ ポイント数がカウントされます。 1 つの Metrics Advisor インスタンスに格納されるデータ ポイントの最大数は **20 億** です。 \n- データ フィードの一覧ページと新しいデータ フィードの追加ページで **80%** の制限に達すると、Metrics Advisor リソース管理者とすべてのユーザーに通知されます。 \n- 合計データ ポイント数が制限を超えた場合、すべてのデータ フィードは **一時停止され**、新しいフィードのオンボードも **ブロックされます**。 使用されていないデータ フィードを削除するか、サブスクリプション内に新しい Metrics Advisor データ フィードを作成することをお勧めします。\n"
  - question: >
      急増と急減を異常として検出するには、どうすればよいですか?
    answer: >
      ハードしきい値が事前に定義されている場合は、[[Anomaly Detection Configurations]\(異常検出の構成\)](how-tos/configure-metrics.md#anomaly-detection-methods) で "ハードしきい値" を手動で設定できます。

      しきい値がない場合は、AI を利用した "スマート検出" を使用できます。 詳細については、[検出構成の調整](how-tos/configure-metrics.md#tune-the-detection-configuration)に関する記事を参照してください。
  - question: >
      通常 (季節) のパターンへの非準拠を異常として検出するには、どうすればよいですか?
    answer: "\"スマート検出\" には、季節のパターンなど、データのパターンを学習する機能があります。 学習すると、通常のパターンに準拠していない、そのようなデータ ポイントを、異常として検出します。 詳細については、[検出構成の調整](how-tos/configure-metrics.md#tune-the-detection-configuration)に関する記事を参照してください。\n"
  - question: >
      直線を異常として検出するには、どうすればよいですか?
    answer: >
      データが通常は非常に不安定で変動が大きく、非常に安定したり直線になってしまったりするときには警告を表示したい場合、変化が非常にわずかであれば、そのようなデータ ポイントが検出されるように "しきい値の変更" を構成することができます。

      詳細については、[異常検出の構成](how-tos/configure-metrics.md#anomaly-detection-methods)に関する記事を参照してください。
  - question: >
      電子メールの設定を行って、電子メールによるアラートを有効にする方法
    answer: "1. サブスクリプション管理者またはリソース グループ管理者の権限を持つユーザーが、Azure portal に作成された Metrics Advisor リソースに移動し、 **[アクセス制御 (IAM)]** タブを選択する必要があります。 \n2. **[ロールの割り当ての追加]** を選択します\n3. **Cognitive Services Metrics Advisor 管理者** のロールを選択し、下の画像のように自分のアカウントを選択します。\n4. **[保存]** ボタンをクリックすると、Metrics Advisor リソースの管理者として正常に追加されます。 上記のアクションはすべて、サブスクリプション管理者またはリソース グループ管理者によって実行される必要があるので注意してください。 \n\n    :::image type=\"content\" source=\"media/access-control.png\" alt-text=\"アクセス制御 (IAM) のメニュー ページ。[ロールの割り当ての追加] が選択されており、[アクセスの割り当て先] がユーザーに選択され Cognitive Services Metrics Advisor 管理者のアクセス ロールが表示されているボックスがあり、UI の [保存] ボタンが選択されていて、ユーザーを検索して特定のレベルのアクセス許可を追加する手順を示している。\" lightbox=\"media/access-control.png\":::\n\n\n5. アクセス許可が反映されるまでに最大で 1 分かかる場合があります。 次に、自分の Metrics Advisor ワークスペースを選択し、左側のナビゲーション パネルで **[電子メール設定]** オプションを選択します。 必須の項目 (特に SMTP 関連の情報) を入力します。 \n6. **[保存]** を選択すると、電子メールの構成がすべて設定されます。 新しいフックを作成してメトリックの異常をサブスクライブし、準リアルタイムのアラートを受け取れます。 \n"
- name: 高度な概念
  questions:
  - question: >
      多次元メトリックの診断ツリーは、Metrics Advisor によってどのように構築されますか?
    answer: "メトリックは、ディメンションによって複数の時系列に分割できます。 たとえば、メトリック `Response latency` は、チームが所有するすべてのサービスに対して監視されます。 `Service` カテゴリをディメンションとして使用してメトリックを強化し、`Service1`、`Service2` などによって `Response latency` を分割することができます。 各サービスは複数のデータ センター内の異なるコンピューターに展開できるので、メトリックは `Machine` や `Data center` によってさらに分割される可能性があります。\n\n|サービス| データ センター| Machine  | \n|----|------|----------------   |\n| S1 |  DC1 |   M1 |\n| S1 |  DC1 |   M2 |\n| S1 |  DC2 |   M3 |\n| S1 |  DC2 |   M4 |\n| S2 |  DC1 |   M1 |\n| S2 |  DC1 |   M2 |\n| S2 |  DC2 |   M5 |\n| S2 |  DC2 |   M6 |\n| ...|      |      |\n\n合計の `Response latency` から始めて、`Service`、`Data center`、`Machine` でメトリックにドリルダウンできます。 ただし、サービス所有者にとってはパス `Service` -> `Data center` -> `Machine` を使用する方が意味がある場合、またインフラストラクチャ エンジニアにとってはパス `Data Center` -> `Machine` -> `Service` を使用する方が意味がある場合もあります。 これはすべて、ユーザーの個々のビジネス要件に依存します。 \n\nMetric Advisor を使用すると、階層トポロジの 1 つのノードからドリルダウンまたはロールアップする任意のパスをユーザーが指定できます。 より正確には、階層のトポロジは、ツリー構造ではなく有向非巡回グラフです。 次のように、可能性のあるすべてのディメンションの組み合わせで構成される完全な階層トポロジがあります。 \n\n:::image type=\"content\" source=\"media/dimension-combinations-view.png\" alt-text=\"相互に接続された複数の頂点とエッジと、S、DC、M および対応する 1 から 6 の範囲の値でラベルが付けられた複数のディメンションで構成される、階層トポロジの図\" lightbox=\"media/dimension-combinations-view.png\":::\n\n理論的には、ディメンション `Service` に `Ls` 個の個別値があり、ディメンション `Data center` に `Ldc` 個の個別値があり、ディメンション `Machine` に `Lm` 個の個別値がある場合、階層トポロジには `(Ls + 1) * (Ldc + 1) * (Lm + 1)` 個のディメンションの組み合わせが存在する可能性があります。 \n\nただし、通常は、すべてのディメンションの組み合わせが有効であることはないので、複雑さを大幅に軽減できます。 現在、ユーザー自身がメトリックを集計している場合、ディメンションの数は制限されません。 Metrics Advisor によって提供されるロールアップ機能を使用する必要がある場合、ディメンションの数を 6 より大きくすることはできません。 ただし、メトリックのディメンションによって展開される時系列の数は、10,000 未満に制限されています。\n\n診断ページの **診断ツリー** ツールには、トポロジ全体ではなく、異常が検出されたノードのみが表示されます。 これは、現在の問題に注目できるようにするためです。 また、メトリック内の異常がすべて表示されるとは限らず、代わりに寄与度に基づいて上位の異常が表示されます。 このようにして、異常なデータの影響、スコープ、分散パスをすばやく確認できます。 これにより、注目する必要がある異常の数が大幅に減り、ユーザーが重要な問題を把握して見つけるのに役立ちます。 \n \nたとえば、`Service = S2 | Data Center = DC2 | Machine = M5` で異常が発生した場合、異常の偏差はやはり異常が検出された親ノード `Service= S2` に影響を与えますが、異常は `DC2` のデータ センター全体と `M5` のすべてのサービスには影響しません。 インシデント ツリーは次のスクリーンショットのように構築されます。最上位の異常は `Service = S2` でキャプチャされ、根本原因はどちらも `Service = S2 | Data Center = DC2 | Machine = M5` に至る 2 つのパスで分析できます。\n\n :::image type=\"content\" source=\"media/root-cause-paths.png\" alt-text=\"5 つのラベル付き頂点と、エッジによって結合された 2 つの異なるパスと、S2 というラベルの付いた共通ノード。上位の異常は Service = S2 でキャプチャされ、根本原因はどちらも Service = S2 | Data Center = DC2 | Machine = M5 に至る 2 つのパスによって分析できます\" lightbox=\"media/root-cause-paths.png\":::\n"
additionalContent: "\n## <a name=\"next-steps\"></a>次のステップ\n\n- [Metrics Advisor の概要](overview.md)"
