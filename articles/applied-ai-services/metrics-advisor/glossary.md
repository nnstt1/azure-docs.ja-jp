---
title: Metrics Advisor の用語集
titleSuffix: Azure Cognitive Services
description: Metrics Advisor サービスの主要なアイデアと概念
services: cognitive-services
author: mrbullwinkle
manager: nitinme
ms.service: applied-ai-services
ms.subservice: metrics-advisor
ms.topic: conceptual
ms.date: 09/14/2020
ms.author: mbullwin
ms.openlocfilehash: 0f2387e77283a48a73644f8abd4cdd6f37c97912
ms.sourcegitcommit: 192444210a0bd040008ef01babd140b23a95541b
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 07/15/2021
ms.locfileid: "114342277"
---
# <a name="metrics-advisor-glossary-of-common-vocabulary-and-concepts"></a>一般的な用語や概念に関する Metrics Advisor の用語集

このドキュメントでは、Metrics Advisor で使用される技術用語について説明します。 この記事では、サービスの使用時に遭遇する可能性のある一般的な概念とオブジェクトについて説明します。

## <a name="data-feed"></a>データ フィード

> [!NOTE]
> 複数のメトリックで同じデータ ソース、さらには同じデータ フィードを共有できます。

データ フィードは、Cosmos DB や SQL server などのデータ ソースから Metrics Advisor が取り込むものです。 データ フィードには次の行が含まれます。
* タイムスタンプ
* 0 個以上のディメンション
* 1 つ以上のメジャー。 

## <a name="interval"></a>間隔
メトリックは、ビジネス要件に応じて特定の細分性で監視する必要があります。 たとえば、ビジネスの主要業績評価指標 (KPI) は、日単位の細分性で監視されます。 ただし、サービス パフォーマンス メトリックは、多くの場合、分単位または時間単位の細分性で監視されます。 そのため、ソースからメトリック データを収集する頻度は異なります。

Metrics Advisor により各時間間隔で継続的にメトリック データが取得され、**その間隔はメトリックの細分性と等しくなります。** 作成したクエリが Metrics Advisor によって毎回実行され、この特定の間隔でデータが取り込まれます。 このデータ インジェスト メカニズムに基づいて、クエリ スクリプトは **データベースに存在するすべてのメトリック データを返すのではなく、結果を 1 つの間隔に限定する必要があります。**

<!-- ![What is interval](media/tutorial/what-is-interval.png) -->

## <a name="metric"></a>メトリック

メトリックは、特定のビジネス プロセスの状態を監視および評価するために使用される定量化可能なメジャーです。 ディメンションに分割された複数の時系列値を組み合わせることができます。 たとえば、*web health* のメトリックには、*user count* と *en-us market* のディメンションが含まれている場合があります。

## <a name="dimension"></a>Dimension

ディメンションは、1 つまたは複数のカテゴリの値です。 これらの値を組み合わせることによって、国、言語、テナントなど、特定の一変量時系列が識別されます。

## <a name="multi-dimensional-metric"></a>多次元メトリック

多次元メトリックとは 2 つの例を使用してみましょう。 

**ビジネスの収益**

ビジネスの収益のデータがあるとします。 時系列データは次のようになります。

| Timestamp | カテゴリ | Market | 収益 |
| ----------|----------|--------|----- |
| 2020-6-1 | 食品 | US | 1000 |
| 2020-6-1 | アパレル | US | 2000 |
| 2020-6-2 | 食品 | 英国 | 800 | 
| ...      | ...  |... | ... |

この例では "*カテゴリ*" と "*市場*" がディメンションです。 "*収益*" は主要業績評価指標 (KPI) であり、さまざまなカテゴリや市場にスライスでき、集計することもできます。 例: すべての市場の "*食品*" の収益。
 
**複雑なアプリケーションのエラー数**

アプリケーションに記録されたエラーの数に関するデータがあるとします。 時系列データは次のようになります。

| Timestamp | アプリケーション コンポーネント | Region | Error count |
| ----------|----------|--------|----- |
| 2020-6-1 | 従業員データベース | 西ヨーロッパ | 9000 |
| 2020-6-1 | メッセージ キュー | 米国東部 | 1000 |
| 2020-6-2 | メッセージ キュー | 米国東部 | 8000| 
| ...      | ...           | ...     |  ...|

この例では、"*アプリケーション コンポーネント*" と "*リージョン*" がディメンションです。 "*エラー数*" は KPI であり、さまざまなカテゴリや市場にスライスでき、集計することもできます。 例: すべてのリージョンの "*メッセージ キュー*" のエラー数。

## <a name="measure"></a>Measure

メジャーは、単位固有の基本的な用語であり、メトリックの定量化可能な値です。

## <a name="time-series"></a>タイム シリーズ

時系列は、古い順にインデックスが作成 (またはリストに記載またはグラフ化) された一連のデータ ポイントです。 通常、時系列は、等間隔の連続した時点で取得されたシーケンスです。 これは、離散時間データのシーケンスです。

Metrics Advisor では、特定のディメンションの組み合わせに対する 1 つのメトリックの値が 1 つの系列と呼ばれます。

## <a name="granularity"></a>粒度

細分性は、データ ソースでデータ ポイントが生成される頻度を示します。 例: 毎日、毎週。

## <a name="ingest-data-sinceutc"></a>データ インジェスト開始 (UTC)

データ インジェスト開始 (UTC) は、Metrics Advisor がデータ ソースからのデータの取り込みを開始する時刻です。 データ ソースには、指定されたインジェスト開始時刻にデータがある必要があります。

## <a name="confidence-boundaries"></a>信頼の境界

> [!NOTE]
> 信頼の境界は、異常を検出するために使用される唯一の測定ではありません。 この境界の外側にあるデータ ポイントは、検出モデルによって通常のフラグが付けられる可能性があります。 

Metrics Advisor では、信頼の境界は使用されるアルゴリズムの検出感度を表し、過度に敏感な異常を除外するために使用されます。 Web ポータルでは、信頼の境界は透明な青いバンドとして表示されます。 バンド内のすべてのポイントが通常のポイントとして扱われます。

Metrics Advisor には、使用されるアルゴリズムの検出感度を調整するツールが用意されています。 詳細については、「[方法: メトリックを構成して検出構成を微調整する](how-tos/configure-metrics.md)」を参照してください。

![信頼の境界](media/confidence-bounds.png)


## <a name="hook"></a>フック

Metrics Advisor を使用すると、リアルタイムのアラートを作成し、サブスクライブすることができます。 これらのアラートは、[フックを使用して](how-tos/alerts.md)インターネット経由で送信されます。

## <a name="anomaly-incident"></a>異常インシデント

検出構成がメトリックに適用されると、その中のいずれかの系列に異常が発生するたびにインシデントが生成されます。 大規模なデータセットでは、これは膨大な量になる可能性があるため、Metrics Advisor では、メトリック内の一連の異常がインシデントにグループ化されます。 また、このサービスでは、重大度が評価され、[インシデントを診断](how-tos/diagnose-an-incident.md)するためのツールが提供されます。

### <a name="diagnostic-tree"></a>診断ツリー

Metrics Advisor では、メトリックに異常検出を適用できます。こうすると、すべてのディメンションの組み合わせのすべての時系列が Metrics Advisor によって自動的に監視されます。 異常が検出されるたびに、Metrics Advisor によって異常がインシデントに集約されます。
インシデントが発生すると、Metrics Advisor によって診断ツリーに異常の原因の階層が表示され、最も影響が大きい原因が特定されます。 各インシデントには、ツリーの最上位ノードである根本原因の異常があります。

### <a name="anomaly-grouping"></a>異常のグループ化

Metrics Advisor には、類似したパターンを持つ関連する時系列を見つける機能が用意されています。 また、他のディメンションへの影響について詳細な分析情報を提供し、異常を相互に関連付けることもできます。

### <a name="time-series-comparison"></a>時系列比較

複数の時系列を選択して、1 つの視覚化で傾向を比較できます。 これにより、関連する系列を表示および比較するための明確でわかりやすい方法が提供されます。

## <a name="detection-configuration"></a>検出構成

>[!Note]
>検出構成は、個々のメトリック内でのみ適用されます。

Metrics Advisor の Web ポータルでは、メトリックを表示すると、検出構成 (検出感度、自動再通知、方向など) が左側のパネルに表示されます。 パラメーターはチューニングして、このメトリック内のすべての系列に適用できます。

検出構成は、すべての時系列に必要で、時系列内のポイントが異常であるかどうかを判別します。 最初にデータをオンボードするときに、Metrics Advisor によってメトリック全体の既定の構成が設定されます。 

系列のグループまたは特定の系列にチューニング パラメーターを適用することにより、構成をさらに調整できます。 時系列に適用される構成は 1 つだけです。
* 特定の系列に適用された構成により、グループの構成が上書きされます。
* グループの構成により、メトリック全体に適用された構成が上書きされます。

Metrics Advisor には、いくつかの[検出方法](how-tos/configure-metrics.md#anomaly-detection-methods)が用意されており、論理演算子を使用してそれらを組み合わせることができます。

### <a name="smart-detection"></a>スマート検出

複数の機械学習アルゴリズムを使用した異常検出。

**検出感度**:異常検出の許容範囲を調整する数値。 視覚的には、値が大きいほど、時系列の上下の境界が狭くなります。

### <a name="hard-threshold"></a>ハードしきい値

上限または下限の範囲外の値は異常です。

**Min**:下限値

**Max**:上限値

### <a name="change-threshold"></a>しきい値の変更

前のポイントの値を使用して、このポイントが異常であるかどうかを判断します。

**変化率**:前のポイントと比較して、変化の割合がこのパラメーターを超えている場合、現在のポイントは異常です。

**ポイントの切り替え**:振り返るポイントの数。

### <a name="common-parameters"></a>共通パラメーター

**方向**:ポイントは、"*上*"、"*下*"、または "*両方*" の方向で偏差が発生した場合にのみ異常になります。

**Not valid anomaly until (次まで異常は無効)** :データ ポイントは、前のポイントの指定された割合も異常である場合にのみ異常になります。

## <a name="alert-settings"></a>アラートの設定

アラートの設定によって、アラートをトリガーする異常が決まります。 異なる設定で複数のアラートを設定できます。 たとえば、ビジネスへの影響が少ない異常に対してアラートを作成し、より重要なアラートに対して別のアラートを作成できます。

また、メトリック間でアラートを作成することもできます。 たとえば、指定した 2 つのメトリックに異常がある場合にのみトリガーされるアラートなどです。

### <a name="alert-scope"></a>アラートのスコープ

アラートのスコープとは、アラートが適用されるスコープを指します。 4 つのオプションがあります。

**すべての系列の異常**:メトリック内のすべての系列の異常に対してアラートがトリガーされます。

**系列グループの異常**:系列グループの特定のディメンションの異常に対してのみアラートがトリガーされます。 指定するディメンションの数は、ディメンションの合計数よりも小さくする必要があります。

**お気に入りの系列の異常**:お気に入りとして追加された異常に対してのみアラートがトリガーされます。 検出された各構成のお気に入りとして、系列のグループを選択できます。

**すべての系列の上位 N 個の異常**:上位 N 個の系列の異常に対してのみアラートがトリガーされます。 パラメーターを設定して、考慮するタイムスタンプの数と、警告を送信するために必要な異常の数を指定できます。

### <a name="severity"></a>重大度

重要度は、インシデントの重大度 ("*高*"、"*中*"、"*低*" など) を表すために Metrics Advisor で使用されるグレードです。

現在、Metrics Advisor では、アラートの重要度を測定するために次の要素が使用されています。
1. メトリックの異常の値の割合と量の割合。
1. 異常の信頼性。
1. お気に入りの設定は重要度にも影響します。

### <a name="auto-snooze"></a>自動再通知

一部の異常は、特に細分性が細かいメトリックにとっては、一時的な問題です。 特定の時点のアラートを "*再通知*" できます。 指定されたポイント数内で異常が見つかった場合、アラートはトリガーされません。 自動再通知の動作は、メトリック レベルまたは系列レベルで設定できます。

再通知の動作は、メトリック レベルまたは系列レベルで設定できます。

## <a name="data-feed-settings"></a>データ フィードの設定

### <a name="ingestion-time-offset"></a>インジェスト時間のオフセット

既定では、データは細分性 ("*毎日*" など) に従って取り込まれます。 正の整数を使用すると、指定された値までにデータ インジェストを遅らせることができます。 負の数を使用すると、指定した値でインジェストを進めることができます。

### <a name="max-ingestion-per-minute"></a>1 分あたりの最大インジェスト

制限された同時実行がデータ ソースでサポートされている場合は、このパラメーターを設定します。 それ以外の場合は、既定の設定のままにします。

### <a name="stop-retry-after"></a>再試行の停止までの時間

データ インジェストに失敗した場合、一定の時間が経過すると、Metrics Advisor によって自動的に再試行されます。 期間の開始は、最初のデータ インジェストが発生した時刻です。 再試行期間の長さは、細分性に従って定義されます。 既定値 (`-1`) を使用すると、再試行期間は細分性に従って決定されます。

| 粒度       | Stop Retry After\(再試行の停止までの時間\)           |
| :------------ | :--------------- |
| 毎日、カスタム (1 日以上)、毎週、毎月、毎年     | 7 日          |
| 毎時、カスタム (1 日未満)       | 72 時間 |

### <a name="min-retry-interval"></a>再試行の最小間隔

ソースからのデータのプルを再試行するときの最小間隔を指定できます。 既定値 (`-1`) を使用すると、再試行間隔は細分性に従って決定されます。

| 粒度       | Minimum Retry Interval\(再試行の最小間隔\)           |
| :------------ | :--------------- |
| 毎日、カスタム (1 日以上)、毎週、毎月     | 30 分          |
| 毎時、カスタム (1 日未満)      | 10 分 |
| 年単位 | 1 日          |

### <a name="grace-period"></a>猶予期間

> [!Note]
> 猶予期間は、通常のインジェスト時間に加えて、指定されたインジェスト時間オフセットで始まります。
    
猶予期間とは、Metrics Advisor がデータ ソースからデータのフェッチを続行し、アラートを発生させない期間のことです。 猶予期間後にデータが取り込まれなかった場合、"*データ フィードを使用できません*" アラートがトリガーされます。

### <a name="snooze-alerts-in"></a>アラートを再通知する

このオプションが 0 に設定されている場合は、"*使用不可*" のタイムスタンプによってアラートがトリガーされます。 0 以外の値に設定すると、データがフェッチされなかった場合に、指定された数の "*使用不可*" アラートが再通知されます。

## <a name="data-feed-permissions"></a>データ フィードのアクセス許可

データ フィードのアクセス許可を管理するには、次の 2 つのロールがあります。"*管理者*" と "*閲覧者*"。 

* "*管理者*" は、データ フィードとその中のメトリックを完全に制御できます。 データ フィードのアクティブ化、一時停止、削除、およびフィードと構成の更新を行うことができます。 通常、"*管理者*" はメトリックの所有者です。

* "*閲覧者*" は、データ フィードやメトリックを表示できますが、変更することはできません。 

## <a name="next-steps"></a>次のステップ
- [Metrics Advisor の概要](overview.md)
- [Web ポータルを使用する](quickstarts/web-portal.md)
