---
title: Azure の BLOB を復元する
description: Azure の BLOB を復元する方法について説明します。
ms.topic: conceptual
ms.date: 05/05/2021
ms.openlocfilehash: aaca425e2ea13948fbd52bf60ed30d64c29c27d3
ms.sourcegitcommit: 02d443532c4d2e9e449025908a05fb9c84eba039
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 05/06/2021
ms.locfileid: "108767277"
---
# <a name="restore-azure-blobs"></a>Azure の BLOB を復元する

運用バックアップが構成されているストレージ アカウントのブロック BLOB は、保持期間内の任意の時点に復元できます。 また、復元の対象をストレージ アカウント内のすべてのブロック BLOB または BLOB のサブセットにすることができます。

## <a name="before-you-start"></a>開始する前に

- BLOB は同じストレージ アカウントに復元されます。 そのため、復元しようとしている時刻以降に変更された BLOB は上書きされます。
- 復元操作の一部として復元できるのは、Standard 汎用 v2 ストレージ アカウントのブロック BLOB のみです。 追加 BLOB、ページ BLOB、Premium ブロック BLOB は復元されません。
- 復元ジョブの実行中は、ストレージ内の BLOB の読み取りや書き込みを行うことはできません。
- アクティブなリースを持つ BLOB は復元できません。 リースがアクティブになっている BLOB が、復元する BLOB の範囲に含まれる場合、復元操作は自動的に失敗します。 復元操作を始める前に、アクティブなリースをすべて中断してください。
- スナップショットは、復元操作の一環として作成または削除されません。 ベース BLOB のみが以前の状態に復元されます。
- **Delete Container** 操作を呼び出してストレージ アカウントからコンテナーを削除した場合、そのコンテナーは復元操作を使って復元できません。 後で復元が必要になる可能性がある場合は、コンテナー全体を削除するのではなく、個々の BLOB を削除してください。 また、コンテナーの誤削除防止のために、運用バックアップに加えてコンテナーの論理的な削除を有効にすることをお勧めします。
- すべての制限事項とサポートされるシナリオについては、[サポート マトリックス](blob-backup-support-matrix.md)を参照してください。

## <a name="restore-blobs"></a>BLOB を復元する

復元は、バックアップ センターで開始できます。

1. バックアップ センターの上部のバーにある **[復元]** に移動します。

    ![バックアップ センターの [復元]](./media/blob-restore/backup-center-restore.png)

1. **[開始: 復元]** タブで、データソースの種類として **[Azure BLOB (Azure Storage)]** を選択し、復元する **[バックアップ インスタンス]** を選択します。 ここでのバックアップ インスタンスは、復元する BLOB が含まれているストレージ アカウントです。

     ![バックアップ インスタンスを選択する](./media/blob-restore/select-backup-instance.png)

1. **[復旧ポイントの選択]** タブで、データの復元元となる日付と時刻を選択します。 スライダーを使用して、復元元の時点を選択することもできます。 日付の横にある情報バブルに、データを復元できる有効な期間が表示されます。 継続的バックアップされている BLOB の運用バックアップを使用すると、データを復旧するポイントをきめ細かく制御することができます。

    >[!NOTE]
    > ここで示される時刻は現地時刻です。

    ![復元の日付と時刻](./media/blob-restore/date-and-time.png)

1. **[復元パラメーター]** タブで、ストレージ アカウント内のすべての BLOB、特定のコンテナー、またはプレフィックス一致を使用した BLOB のサブセットのいずれを復元するかを選択します。 プレフィックスの一致を使用する場合は、プレフィックスまたはファイルパスで最大 10 個の範囲を指定できます。 プレフィックス一致の使用の詳細については、[こちら](#use-prefix-match-for-restoring-blobs)を参照してください。

    ![復元のパラメーター](./media/blob-restore/restore-parameters.png)

    次のいずれかのオプションを選択します。

    - **[Restore all blobs in the storage account]\(ストレージ アカウント内のすべての BLOB を復元する\)** : このオプションを使用すると、ストレージ アカウント内のすべてのブロック BLOB が、選択した時点までロールバックすることで復元されます。 大量のデータが含まれている、または高チャーンが監視されているストレージ アカウントの場合、復元に時間がかかることがあります。

    - **[Browse and restore selected containers]\(選択したコンテナーを参照して復元する\)** : このオプションを使用すると、復元対象のコンテナーを最大 10 個まで参照して選択できます。 ストレージ アカウント内のコンテナーを表示するための十分なアクセス許可が必要です。そうしないと、ストレージ アカウントの内容を表示できない可能性があります。

    - **[Select blobs to restore using prefix match]\(プレフィックスの一致を使用して復元する BLOB を選択する\)** : このオプションを使用すると、プレフィックスの一致を使用して BLOB のサブセットを復元できます。 単一のコンテナー内または複数のコンテナー全体の BLOB の最大 10 個の辞書式範囲を復元して、以前の特定の時点の状態にそれらの BLOB を戻すことができます。 次の点に注意してください。

        - コンテナー名と BLOB プレフィックスを区切るには、スラッシュ (/) を使用できます
        - 指定した範囲の開始は範囲に含まれますが、指定した範囲の終了は含まれません。

    プレフィックスを使用して BLOB の範囲を復元する方法の詳細については、[このセクション](#use-prefix-match-for-restoring-blobs)を参照してください。

1. 復元する BLOB の指定が完了したら、 **[レビューと復元]** タブに進み、 **[復元]** を選択して復元を開始します。

1. **復元の追跡**: 復元の詳細と状態を追跡するには、 **[バックアップ ジョブ]** ビューを使用します。 これを行うには、 **[バックアップ センター]**  >  **[バックアップ ジョブ]** に移動します。 復元が実行されている間は、状態が **[実行中]** と表示されます。

    ![[バックアップ ジョブ] タブ](./media/blob-restore/backup-jobs.png)

    復元操作が正常に完了すると、状態が **[完了]** に変わります。 復元が正常に完了すると、ストレージ アカウントで BLOB の読み取りと書き込みを再び実行できるようになります。

## <a name="additional-topics"></a>関連トピック

### <a name="use-prefix-match-for-restoring-blobs"></a>BLOB の復元にプレフィックスの一致を使用する

次の例を確認してください。

![プレフィックスの一致を使用して復元する](./media/blob-restore/prefix-match.png)

画像に示されている復元操作では、次の操作を実行します。

- *container1* の完全な内容を復元します。
- *container2* の *blob1* から *blob5* までの辞書式範囲の BLOB を復元します。 この範囲の場合、*blob1.txt*、*blob11*、*blob100*、*blob2* などの名前を持つ BLOB が復元されます。 範囲の終了は含まれないため、名前が *blob4* で始まる BLOB は復元されますが、名前が *blob5* で始まる BLOB は復元されません。
- *container3* と *container4* 内のすべての BLOB を復元します。 範囲の最後は含まれないため、この範囲の場合、*container5* は復元されません。

## <a name="next-steps"></a>次のステップ

- [Azure Blob の運用バックアップの概要](blob-backup-overview.md)
