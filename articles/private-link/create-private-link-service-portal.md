---
title: クイックスタート - Azure portal を使用してプライベート リンク サービスを作成する
titlesuffix: Azure Private Link
description: このクイックスタートでは、Azure portal を使用して Private Link サービスを作成する方法を説明します
services: private-link
author: asudbring
ms.service: private-link
ms.topic: quickstart
ms.date: 08/18/2021
ms.author: allensu
ms.openlocfilehash: de7d106ae02e1150d9765e60fbfdf0dc0cb9bc74
ms.sourcegitcommit: 0770a7d91278043a83ccc597af25934854605e8b
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 09/13/2021
ms.locfileid: "124810321"
---
# <a name="quickstart-create-a-private-link-service-by-using-the-azure-portal"></a>クイック スタート:Azure portal を使用して Private Link サービスを作成する

自分のサービスを参照する Private Link サービスを作成してみましょう。  Private Link には、Azure Standard Load Balancer の背後にデプロイされたサービスやリソースへのアクセス権を付与することができます。  サービスのユーザーは、各自の仮想ネットワークからプライベートにアクセスすることができます

## <a name="prerequisites"></a>前提条件

* アクティブなサブスクリプションが含まれる Azure アカウント。 [無料でアカウントを作成できます](https://azure.microsoft.com/free/?WT.mc_id=A261C142F)。

## <a name="sign-in-to-the-azure-portal"></a>Azure portal にサインインする

Azure Portal ( https://portal.azure.com ) にサインインします。

## <a name="create-an-internal-load-balancer"></a>内部ロード バランサーを作成します。

このセクションでは、仮想ネットワークと内部 Azure Load Balancer を作成します。

### <a name="virtual-network"></a>仮想ネットワーク

このセクションでは、Private Link サービスにアクセスするロード バランサーのホストとなる仮想ネットワークとサブネットを作成します。

1. [Azure portal](https://portal.azure.com) にサインインします。

2. 画面の左上で、 **[リソースの作成] > [ネットワーク] > [仮想ネットワーク]** の順に選択するか、検索ボックスで **Virtual network** を検索します。

3. **［作成］** を選択します 

4. **[仮想ネットワークの作成]** の **[基本]** タブで次の情報を入力または選択します。

    | **設定**          | **Value**                                                           |
    |------------------|-----------------------------------------------------------------|
    | **プロジェクトの詳細**  |                                                                 |
    | サブスクリプション     | Azure サブスクリプションを選択します。                                  |
    | リソース グループ   | **[新規作成]** を選択します。 「**CreatePrivLinkService-rg**」と入力します。 </br> **[OK]** を選択します。 |
    | **インスタンスの詳細** |                                                                 |
    | 名前             | 「**myVNet**」と入力します                                    |
    | リージョン           | **[(米国) 米国東部 2]** を選択します。 |

5. **[IP アドレス]** タブを選択するか、ページの下部にある **[Next: IP Addresses]\(次へ: IP アドレス\)** ボタンを選択します。

6. **[IP アドレス]** タブで、次の情報を入力します。

    | 設定            | 値                      |
    |--------------------|----------------------------|
    | IPv4 アドレス空間 | 「**10.1.0.0/16**」と入力します。 |

7. **[サブネット名]** で、 **[default]\(既定\)** という単語を選択します。

8. **[サブネットの編集]** に次の情報を入力します。

    | 設定            | 値                      |
    |--------------------|----------------------------|
    | サブネット名 | 「**myBackendSubnet**」と入力します |
    | サブネットのアドレス範囲 | 「**10.1.0.0/24**」と入力します。 |

9. **[保存]** を選択します。

10. **[確認と作成]** タブを選択するか、 **[確認と作成]** ボタンを選択します。

11. **［作成］** を選択します

### <a name="create-nat-gateway"></a>NAT ゲートウェイの作成

このセクションでは、NAT ゲートウェイを作成し、前に作成した仮想ネットワーク内のサブネットに割り当てます。

1. 画面の左上で、 **[リソースの作成] > [ネットワーク] > [NAT ゲートウェイ]** を選択するか、検索ボックスで "**NAT ゲートウェイ**" を検索します。

2. **［作成］** を選択します 

3. **[ネットワーク アドレス変換 (NAT) ゲートウェイを作成します]** の **[基本]** タブにこの情報を入力または選択します。

    | **設定**          | **Value**                                                           |
    |------------------|-----------------------------------------------------------------|
    | **プロジェクトの詳細**  |                                                                 |
    | サブスクリプション     | Azure サブスクリプションを選択します。                                  |
    | リソース グループ   | **[CreatePrivLinkService-rg]** を選択します。 |
    | **インスタンスの詳細** |                                                                 |
    | 名前             | 「**myNATGateway**」と入力します                                    |
    | リージョン           | **[(米国) 米国東部 2]** を選択します。  |
    | 可用性ゾーン | **[なし]** を選択します。 |
    | アイドル タイムアウト (分) | 「**10**」と入力します。 |

4. **[Outbound IP]\(アウトバウンド IP\)** タブを選択するか、ページの下部にある **[Next: Outbound IP]\(次へ: アウトバウンド IP\)** を選択します。

5. **[Outbound IP]\(アウトバウンド IP\)** タブで、次の情報を入力または選択します。

    | **設定** | **Value** |
    | ----------- | --------- |
    | パブリック IP アドレス | **[Create a new public IP address]\(新しいパブリック IP アドレスを作成する\)** を選択します。 </br> **[名前]** に、「**myNATgatewayIP**」と入力します。 </br> **[OK]** を選択します。 |

6. **[サブネット]** タブを選択するか、ページの下部にある **[次へ: サブネット]** ボタンを選択します。

7. **[サブネット]** タブで、 **[仮想ネットワーク]** プルダウンから **[myVNet]** を選択します。

8. **[myBackendSubnet]** の横のチェック ボックスをオンにします。

9. **[Review + create]\(確認と作成\)** タブを選択するか、ページの下部にある青色の **[Review + create]\(確認と作成\)** ボタンを選択します。

10. **［作成］** を選択します

### <a name="create-load-balancer"></a>ロード バランサーの作成

このセクションでは、仮想マシンの負荷分散を行うロード バランサーを作成します。

ロード バランサーの作成中に、次の構成を行います。

* フロントエンド IP アドレス
* バックエンド プール
* インバウンドの負荷分散規則

1. ポータルの上部にある検索ボックスに、「**ロード バランサー**」と入力します。 検索結果で **[ロード バランサー]** を選択します。

2. **[ロード バランサー]** ページで、 **[作成]** を選択します。

3. **[ロード バランサーの作成]** ページの **[基本]** タブで、次の情報を入力または選択します。 

    | 設定                 | 値                                              |
    | ---                     | ---                                                |
    | **プロジェクトの詳細** |   |
    | サブスクリプション               | サブスクリプションを選択します。    |    
    | Resource group         | **[CreatePrivLinkService-rg]** を選択します。 |
    | **インスタンスの詳細** |   |
    | 名前                   | 「**myLoadBalancer**」と入力します                                   |
    | リージョン         | **[(米国) 米国東部 2]** を選択します。                                        |
    | Type          | **[内部]** を選択します。                                        |
    | SKU           | 既定値 **[標準]** のままにします。 |

4. ページ下部にある **[次へ: フロントエンド IP の構成]** を選択します。

5. **[フロントエンド IP 構成]** で、 **[+ フロントエンド IP の追加]** を選択します。

6. **[名前]** に、「**LoadBalancerFrontend**」と入力します。

7. **[サブネット]** で **[myBackendSubnet]** を選択します。

8. **[割り当て]** で **[動的]** を選択します。

9. **[可用性ゾーン]** で、 **[ゾーン冗長]** を選択します。

    > [!NOTE]
    > [Availability Zones](../availability-zones/az-overview.md?toc=%2fazure%2fvirtual-network%2ftoc.json#availability-zones) があるリージョンでは、ゾーンなし (既定のオプション)、特定のゾーン、またはゾーン冗長を選択できます。 この選択は、特定のドメイン障害要件によって異なる場合があります。 Availability Zones がないリージョンでは、このフィールドは表示されません。 </br> 可用性ゾーンの詳細については、[可用性ゾーンの概要](../availability-zones/az-overview.md)に関するページを参照してください。

10. **[追加]** を選択します。

11. ページ下部で **[次へ: バックエンド プール]** を選択します。

12. **[バックエンド プール]** タブで、 **[+ バックエンド プールの追加]** を選択します。

13. **[バックエンド プールの追加]** の **[名前]** に「**myBackendPool**」と入力します。

14. **[バックエンド プールの構成]** には **[NIC]** または **[IP アドレス]** を選択します。

15. **[IP バージョン]** には **[IPv4]** または **[IPv6]** を選択します。

16. **[追加]** を選択します。

17. ページ下部にある **[次へ: 受信規則]** ボタンを選択します。

18. **[受信規則]** タブの **[負荷分散規則]** で、 **[+ 負荷分散規則の追加]** を選択します。

19. **[負荷分散規則の追加]** で、次の情報を入力または選択します。

    | 設定 | 値 |
    | ------- | ----- |
    | 名前 | 「**myHTTPRule**」と入力します。 |
    | IP バージョン | 要件に応じて、 **[IPv4]** または **[IPv6]** を選択します。 |
    | フロントエンド IP アドレス | **[LoadBalancerFrontend]** を選択します。 |
    | Protocol | **[TCP]** を選択します。 |
    | Port | 「**80**」と入力します。 |
    | バックエンド ポート | 「**80**」と入力します。 |
    | バックエンド プール | **[myBackendPool]** を選択します。 |
    | 正常性プローブ | **[新規作成]** を選択します。 </br> **[名前]** に、「**myHealthProbe**」と入力します。 </br> **[プロトコル]** で、 **[HTTP]** を選択します。 </br> 残りの部分は既定値のままにし、 **[OK]** を選択します。 |
    | セッション永続化 | **[なし]** を選択します。 |
    | アイドル タイムアウト (分) | 「**15**」を入力または選択します。 |
    | TCP リセット | **[Enabled]** を選択します。 |
    | フローティング IP | **[無効]** をクリックします。 |

20. **[追加]** を選択します。

21. ページ下部にある青色の **[確認と作成]** ボタンを選択します。

22. **［作成］** を選択します

## <a name="create-a-private-link-service"></a>プライベート リンク サービスを作成する

このセクションでは、Standard ロード バランサーの背後に Private Link サービスを作成します。

1. Azure portal のページ左上隅の領域にある **[リソースの作成]** を選択します。

2. **[Marketplace を検索]** ボックスで「**Private Link**」を検索します。

3. **［作成］** を選択します

4. **[Private Link センター]** の **[概要]** で、青色の **[Create private link service]\(Private Link サービスの作成\)** ボタンを選択します。

5. **[Create private link service]\(Private Link サービスの作成\)** の **[基本]** タブで、次の情報を入力または選択します。

    | 設定 | 値 |
    | ------- | ----- |
    | **プロジェクトの詳細** |  |
    | サブスクリプション | サブスクリプションを選択します。 |
    | リソース グループ | **[CreatePrivLinkService-rg]** を選択します。 |
    | **インスタンスの詳細** |  |
    | 名前 | 「**myPrivateLinkService**」と入力します。 |
    | リージョン | **[(米国) 米国東部 2]** を選択します。 |

6. **[送信設定]** タブを選択するか、ページ下部の **[Next: Outbound settings]\(次へ: 送信設定\)** を選択します。

7. **[送信設定]** タブで、次の情報を入力または選択します。

    | 設定 | 値 |
    | ------- | ----- |
    | Load Balancer | **[myLoadBalancer]** を選択します。 |
    | ロード バランサーのフロントエンド IP アドレス | **[LoadBalancerFrontEnd (10.1.0.4)]** を選択します。 |
    | ソース NAT サブネット | **[mySubnet (10.1.0.0/24)]** を選択します。 |
    | TCP プロキシ v2 を有効にする | 既定値の **[いいえ]** のままにします。 </br> アプリケーションで TCP プロキシ v2 ヘッダーが必要な場合は、 **[はい]** を選択します。 |
    | **プライベート IP アドレスの設定** |  |
    | 既定の設定のままにします |  |

8. **[アクセス セキュリティ]** タブを選択するか、ページ下部の **[Next: Access security]\(次へ: アクセス セキュリティ\)** を選択します。

9. **[アクセス セキュリティ]** タブは、既定値の **[ロールベースのアクセス制御のみ]** のままにします。

10. **タグ** タブを選択するか、**次へ: タグ** がページの下部にあるので、これをクリックします。

11. **[確認と作成]** タブを選択するか、ページの下部にある **[次へ: 確認と作成]** を選択します。

12. **[確認と作成]** タブの **[作成]** を選択します。

Private Link サービスが作成され、トラフィックを受信できるようになります。 トラフィック フローを確認する場合は、ご利用のアプリケーションを Standard ロード バランサーの背後に構成します。

## <a name="create-private-endpoint"></a>プライベート エンドポイントの作成

このセクションでは、プライベート リンク サービスをプライベート エンドポイントにマップします。 仮想ネットワークには、プライベート リンク サービス用のプライベート エンドポイントが含まれています。 この仮想ネットワークには、ご利用のプライベート リンク サービスにアクセスするリソースが含まれています。

### <a name="create-private-endpoint-virtual-network"></a>プライベート エンドポイントの仮想ネットワークを作成する

1. 画面の左上で、 **[リソースの作成] > [ネットワーク] > [仮想ネットワーク]** の順に選択するか、検索ボックスで **Virtual network** を検索します。

2. **[仮想ネットワークの作成]** の **[基本]** タブで次の情報を入力または選択します。

    | **設定**          | **Value**                                                           |
    |------------------|-----------------------------------------------------------------|
    | **プロジェクトの詳細**  |                                                                 |
    | サブスクリプション     | Azure サブスクリプションを選択します。                                  |
    | リソース グループ   | **[CreatePrivLinkService-rg]** を選択します |
    | **インスタンスの詳細** |                                                                 |
    | 名前             | 「**myVNetPE**」と入力します                                    |
    | リージョン           | **[(米国) 米国東部 2]** を選択します。 |

3. **[IP アドレス]** タブを選択するか、ページの下部にある **[Next: IP Addresses]\(次へ: IP アドレス\)** ボタンを選択します。

4. **[IP アドレス]** タブで、次の情報を入力します。

    | 設定            | 値                      |
    |--------------------|----------------------------|
    | IPv4 アドレス空間 | 「**11.1.0.0/16**」と入力します |

5. **[サブネット名]** で、 **[default]\(既定\)** という単語を選択します。

6. **[サブネットの編集]** に次の情報を入力します。

    | 設定            | 値                      |
    |--------------------|----------------------------|
    | サブネット名 | 「**mySubnetPE**」と入力します |
    | サブネットのアドレス範囲 | 「**11.1.0.0/24**」と入力します |

7. **[保存]** を選択します。

8. **[確認と作成]** タブを選択するか、 **[確認と作成]** ボタンを選択します。

9. **［作成］** を選択します

### <a name="create-private-endpoint"></a>プライベート エンドポイントの作成

1. ポータルの画面の左上で、 **[リソースの作成]**  >  **[Networking]\(ネットワーキング\)**  >  **[Private Link]\(プライベート リンク\)** を選択するか、検索ボックスに「**プライベート リンク**」と入力します。

2. **［作成］** を選択します

3. **プライベート リンク センター** で、左側のメニューから **[プライベート エンドポイント]** を選択します。

4. **[プライベート エンドポイント]** で、 **[+ 追加]** を選択します。

5. **[プライベート エンドポイントの作成]** の **[基本]** タブで、次の情報を入力または選択します。

    | 設定 | 値 |
    | ------- | ----- |
    | **プロジェクトの詳細** | |
    | サブスクリプション | サブスクリプションを選択します。 |
    | Resource group | **[CreatePrivLinkService-rg]** を選択します。 このリソース グループは、前のセクションで作成しました。|
    | **インスタンスの詳細** |  |
    | 名前  | 「**myPrivateEndpoint**」と入力します。 |
    | リージョン | **[(米国) 米国東部 2]** を選択します。 |

6. **[リソース]** タブを選択するか、ページ下部の **[次へ: リソース]** ボタンを選択します。
    
7. **[リソース]** で、次の情報を入力または選択します。

    | 設定 | 値 |
    | ------- | ----- |
    | 接続方法 | **[マイ ディレクトリ内の Azure リソースに接続します]** を選択します。 |
    | サブスクリプション | サブスクリプションを選択します。 |
    | リソースの種類 | **Microsoft.Network/privateLinkServices** を選択します。 |
    | リソース | **myPrivateLinkService** を選択します。 |

8. **[構成]** タブを選択するか、 **[次へ: 構成]** ボタン (画面の下部にあります) を選択します。

9. **[構成]** で、次の情報を入力または選択します。

    | 設定 | 値 |
    | ------- | ----- |
    | **ネットワーク** |  |
    | Virtual Network | **myVNetPE** を選択します。 |
    | Subnet | **mySubnetPE** を選択します。 |

10. **[確認と作成]** タブを選択するか、画面の下部にある **[確認と作成]** ボタンを選択します。

11. **［作成］** を選択します

### <a name="ip-address-of-private-endpoint"></a>プライベート エンドポイントの IP アドレス

このセクションでは、ロード バランサーとプライベート リンク サービスに対応するプライベート エンドポイントの IP アドレスについて説明します。

1. Azure portal の左側の列から **[リソース グループ]** を選択します。

2. **CreatePrivLinkService-rg** リソース グループを選択します。

3. **CreatePrivLinkService-rg** リソース グループの **[myPrivateEndpoint]** を選択します。

4. **[myPrivateEndpoint]** の **[概要]** ページで、プライベート エンドポイントに関連付けられているネットワーク インターフェイスの名前を選択します。  ネットワーク インターフェイスの名前は、**myPrivateEndpoint.nic** で始まります。

5. このプライベート エンドポイント NIC の **[概要]** ページの **[プライベート IP アドレス]** に、エンドポイントの IP アドレスが表示されます。

## <a name="clean-up-resources"></a>リソースをクリーンアップする

Private Link サービスの使用が完了したら、リソース グループを削除して、このクイックスタートで使用したリソースをクリーンアップします。

1. ポータル上部の検索ボックスに「**CreatePrivLinkService-rg**」と入力し、検索結果から **[CreatePrivLinkService-rg]** を選択します。

2. **[リソース グループの削除]** を選択します。

3. **[TYPE THE RESOURCE GROUP NAME]\(リソース グループ名の入力\)** に「**CreatePrivLinkService-rg**」と入力します。

4. **[削除]** を選択します。

## <a name="next-steps"></a>次のステップ

このクイック スタートでは次の作業を行います。

* 仮想ネットワークと内部 Azure Load Balancer を作成しました。
* Private Link サービスを作成しました。
* Private Link サービスの仮想ネットワークとプライベート エンドポイントを作成しました。

Azure プライベート エンドポイントについてさらに学習するには、次の記事に進んでください。
> [!div class="nextstepaction"]
> [クイックスタート: Azure portal を使用してプライベート エンドポイントを作成する](create-private-endpoint-portal.md)
