---
title: Azure Migrate アプライアンスの診断のトラブルシューティング
description: Azure Migrate アプライアンスで発生する可能性がある問題を診断してトラブルシューティングするためのガイドを確認します。
author: Vikram1988
ms.author: vibansa
ms.manager: abhemraj
ms.topic: troubleshooting
ms.date: 08/11/2021
ms.openlocfilehash: 03be4d6a4b5afb15b5820c1c8b334e3fcb80bbbb
ms.sourcegitcommit: 2d412ea97cad0a2f66c434794429ea80da9d65aa
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 08/14/2021
ms.locfileid: "122182683"
---
# <a name="diagnose-and-solve-issues-with-azure-migrate-appliance"></a>Azure Migrate アプライアンスの問題を診断して解決する

Azure Migrate アプライアンスの **診断と解決** 機能を使用すると、ユーザーは、検出の開始を妨げる可能性があるアプライアンス構成の問題や、検出、評価、レプリケーション ("*VMware アプライアンスの場合*") など、アプライアンスからの進行中の移行操作に関する問題を特定し、自己評価できます。 

いつでもアプライアンス構成マネージャーから **診断と解決** を実行して、診断レポートを生成できます。 このレポートには、実行されたチェック、その状態、特定された問題、および問題を解決するための推奨手順に関する情報が表示されます。 

> [!IMPORTANT]
> **診断と解決** 機能は、現在、Azure Migrate アプライアンスのプレビュー段階です。
> このプレビューはカスタマー サポートの対象であり、運用ワークロードで使用できます。
> 詳しくは、[Microsoft Azure プレビューの追加使用条件](https://azure.microsoft.com/support/legal/preview-supplemental-terms/)に関するページをご覧ください。


## <a name="diagnostic-checks"></a>診断チェック

"*診断と解決*" では、いくつかの事前検証が実行され、必要な構成ファイルが欠落していたりブロックされたりしていないかがアプライアンス上のウイルス対策ソフトウェアで確認されてから、次のチェックが実行されます。 

**カテゴリ** | **診断チェック** |**説明**
--- | --- | --- |
**前提条件の確認** | 接続チェック | アプライアンスが直接またはプロキシ経由で Azure に接続できるかどうかを確認します。
|| 時刻同期チェック | アプライアンス サーバーの時刻がネットワーク時刻と同期しているかどうかを確認します。
|| 自動更新チェック | 自動更新が有効になっているか、およびアプライアンスで実行されているすべてのエージェントが最新の状態になっているかどうかを確認します。
||VDDK チェック | 必要な VDDK ファイルがダウンロードされ、アプライアンス サーバー上の必要な場所にコピーされているかどうかを確認します。
**サービス正常性チェック** |操作状態 |アプライアンス上のエージェントが実行中の状態かどうかを確認します。 <br>*そうでない場合は、アプライアンスによってエージェントが再起動されて自動解決されます。* 
||サービス エンドポイントの接続 |エージェントが直接またはプロキシ経由で Azure 上のそれぞれのサービスに通信できるかどうかを確認します。
**Azure 固有のチェック** |AAD アプリの可用性* | アプライアンスの登録中に作成された AAD アプリが使用可能であり、アプライアンスからアクセス可能かどうかを確認します。
||移行プロジェクトの可用性* | アプライアンスが登録されている移行プロジェクトがまだ存在し、アプライアンスからアクセス可能かどうかを確認します。
||重要なリソースの可用性*| アプライアンスの登録中に作成された移行リソースがまだ存在し、アプライアンスからアクセス可能かどうかを確認します。
**アプライアンス固有のチェック** | Key Vault 証明書の可用性* | アプライアンスの登録中に Key Vault からダウンロードされた証明書が、引き続きアプライアンス サーバー上で使用可能かどうかを確認します。 <br> "*そうでない場合、Key Vault が使用可能でアクセス可能であれば、アプライアンスによって証明書が再度ダウンロードされて自動解決されます*。"
|| 資格情報ストアの可用性 | アプライアンス サーバー上の資格情報ストアのリソースが移動、削除、または編集されていないかどうかを確認します。
|| レプリケーション アプライアンスまたは ASR コンポーネント | ASR　またはレプリケーション アプライアンス コンポーネントのインストールに、同じサーバーが使用されていないかどうかを確認します。 "*現在、(エージェントベースの移行で) Azure Migrate とレプリケーション アプライアンスの両方を同じサーバー上にインストールすることはサポートされていません。* "
|| OS ライセンスの可用性 | OVA または VHD から作成されたアプライアンス サーバーの評価ライセンスがまだ有効かどうかを確認します。 "*Windows Server 2016 の評価ライセンスの有効期間は 180 日間です。* "
|| CPU およびメモリ使用率 | アプライアンス サーバー上の Migrate エージェントによって使用されている CPU とメモリを確認します。  

"**アプライアンスが既に登録されている場合にのみ、チェックされて報告されます。これらのチェックは、アプライアンスにログインしている現在の Azure ユーザーのコンテキストで実行されます*。"

## <a name="running-diagnostic-checks"></a>診断チェックの実行

構成中にアプライアンスで問題が発生している場合や、ポータルでの検出、評価、レプリケーション ("*VMware アプライアンスの場合*") などの進行中の移行操作で問題が発生している場合は、アプライアンス構成マネージャーに移動して診断を実行できます。

> [!NOTE]
> 現在、**診断と解決** では、Azure へのアプライアンスの接続、アプライアンス サーバーや Azure 上の必要なリソースの可用性に関連するチェックを実行できます。 vCenter Server、ESXi ホスト、Hyper-V ホスト、VM、物理サーバーなどのソース環境に関する接続または検出の問題は、現時点では、**診断と解決** では対処されません。
 
1. 構成マネージャー上部のリボンから **[診断と解決]** を選択します。

    ![診断と解決を選択する](./media/troubleshoot-appliance-diagnostic-solve/appliance-configuration-manager-diagnose-solve.png)
    
    **[診断と解決]** を選択すると、アプライアンスによって自動的に診断チェックの実行が開始されます。 完了するまでには約 5 分かかります。
    "*前にチェックを実行した場合は、前回の診断レポートのタイムスタンプが表示されます。* "
     
    ![診断レポート](./media/troubleshoot-appliance-diagnostic-solve/diagnostic-report.png)

1. 診断チェックが完了したら、PDF 形式での保存を選択できる別のタブでレポートを表示するか、HTML 形式でレポートが自動保存される、アプライアンス サーバー上の場所 **C:\Users\Public\Desktop\DiagnosticsReport** に移動できます。

    ![診断レポートを表示する](./media/troubleshoot-appliance-diagnostic-solve/view-diagnostic-report.png)

1. このレポートには、実行されたチェック、その状態、特定された問題、および問題を解決するための推奨手順に関する情報が表示されます。

    ![診断レポートの状態を表示する](./media/troubleshoot-appliance-diagnostic-solve/view-status.png)

1. レポートに記載されている修復手順に従って問題を解決できます。 問題を解決できない場合は、解決が迅速に行われるように、Microsoft サポート ケースの作成時に診断レポートを添付することをお勧めします。

## <a name="next-steps"></a>次のステップ
**診断と解決** で対処されない問題がある場合は、[Azure Migrate アプライアンスのトラブルシューティング](./troubleshoot-appliance.md)に関するページにアクセスして、修復手順を見つけてください。