---
title: IoT の概念と Azure IoT Hub | Microsoft Docs
description: この記事では、Azure IoT Hub の新しいユーザー向けの基本的な概念について説明します
author: eross-msft
ms.author: lizross
ms.service: iot-hub
services: iot-hub
ms.topic: conceptual
ms.date: 07/07/2021
ms.openlocfilehash: d04f5b8ace6bfb331e9460745271d15b82a3fb98
ms.sourcegitcommit: 05c8e50a5df87707b6c687c6d4a2133dc1af6583
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 11/16/2021
ms.locfileid: "132553466"
---
# <a name="iot-concepts-and-azure-iot-hub"></a>IoT の概念と Azure IoT Hub

この記事では、モノのインターネット (IoT)、Azure IoT Hub、および IoT デバイスについて説明します。

## <a name="iot-concepts"></a>IoT の概念

モノのインターネット (IoT) は、通常、インターネットや他の通信ネットワークを介して他のデバイスやサービスに接続し、データを交換する物理デバイスのネットワークとして定義されます。 現在、接続されているデバイスは世界中に 100 億台以上あり、毎年さらに追加されています。 必要なセンサーとソフトウェアを埋め込むことができるものはすべて、インターネット経由で接続できます。 IoT は、次のテクノロジによって実現しました。

- 低コスト、低電力のセンサーへのアクセス。
- インターネット接続を可能にするさまざまなプロトコル。
- Azure などのクラウド コンピューティング プラットフォーム。
- ビッグ データ。
- 機械学習。
- 人工知能。

## <a name="azure-iot-hub"></a>Azure IoT Hub

IoT Hub は、クラウドでホストされる管理サービスです。IoT アプリケーションとそこに接続されたデバイスとの間における通信において、中央のメッセージ ハブとしての役割を担います。 何百万ものデバイスとそのバックエンド ソリューションとを、高い信頼性で安全に接続することができます。 IoT ハブには、ほぼすべてのデバイスを接続することができます。 

クラウドからデバイスを制御するための要求と応答の手法、device-to-cloud テレメトリ、デバイスからのファイルのアップロードなど、サポートされるメッセージング パターンはいくつかあります。 IoT Hub は、監視もサポートしており、デバイスの作成、デバイスの接続、デバイスの失敗を効率的に追跡することができます。

IoT Hub は、数百万のデバイスの同時接続、および IoT ワークロードをサポートするための毎秒数百万のイベントに対応するようにスケーリングします。 IoT ハブのスケーリングについて詳しくは、[IoT Hub のスケーリング](iot-hub-scaling.md)に関するページを参照してください。 IoT Hub で提供される複数階層のサービスと、スケーラビリティ ニーズへの最適な対応について詳しくは、[価格のページ](https://azure.microsoft.com/pricing/details/iot-hub/)を参照してください。

IoT Hub を他の Azure サービスと統合して、完全なエンド ツー エンドのソリューションを構築できます。 たとえば、次のようなサービスを使います。

* [Azure Event Grid](../event-grid/index.yml) を使うと、信頼性が高く、スケーラブルかつ安全な方法で重要なイベントに迅速に対応できます。

* [Azure Logic Apps](../logic-apps/index.yml) は、ビジネス プロセスを自動化します。

* [Azure Machine Learning](iot-hub-weather-forecast-machine-learning.md) は、機械学習と AI モデルをソリューションに追加します。

* [Azure Stream Analytics](../stream-analytics/index.yml) は、デバイスからのデータ ストリーミングに対してリアルタイムの分析計算を実行します。

[IoT Hub のサービス レベル アグリーメント](https://azure.microsoft.com/support/legal/sla/iot-hub/)は 99.9% です。 完全な [Azure SLA](https://azure.microsoft.com/support/legal/sla/) では、全体としての Azure の可用性の確保について説明します。

各 Azure サブスクリプションにはサービスの悪用を防ぐために既定のクォータ制限が設けられています。 これらの制限が IoT ソリューションの範囲に影響する可能性があります。 現在、サブスクリプションごとの IoT ハブの数は 50 個に制限されています。 クォータの増加を要求する場合は、サポートに連絡してください。 詳細については、[IoT Hub のクォータと調整](iot-hub-devguide-quotas-throttling.md)に関するページを参照してください。 クォータ制限の詳細については、次のいずれかの記事を参照してください。

* [Azure サブスクリプション サービスの制限](../azure-resource-manager/management/azure-subscription-service-limits.md)

* [IoT Hub のスロットリング](https://azure.microsoft.com/blog/iot-hub-throttling-and-you/)

## <a name="iot-devices"></a>IoT デバイス

IoT デバイスは、ブラウザーやモバイル アプリなどの他のクライアントとは異なります。 具体的には、IoT デバイスの特性は次のとおりです。

- 多くの場合、人間が操作することのない組み込みシステムです。
- 物理アクセスに大きなコストがかかる離れた場所にデプロイされている場合があります。
- ソリューション バックエンドからのみ到達可能です。
- 電力と処理のリソースが限られている場合があります。
- ネットワーク接続が断続的に切れたり、遅かったり、高コストである場合があります。
- 専用、カスタム、または業界固有のアプリケーション プロトコルを使用する必要がある場合があります。

### <a name="device-identity"></a>デバイス ID

すべての IoT ハブには、それに対する接続が許可されたデバイスおよびモジュールに関する情報を保存する ID レジストリがあります。 デバイスまたはモジュールを接続できるようにするには、そのデバイスまたはモジュールのエントリが IoT ハブの ID レジストリに存在する必要があります。 さらに、ID レジストリに保存されている資格情報に基づいて、デバイスまたはモジュールが IoT ハブで認証される必要があります。

デバイスと IoT Hub の間では、2 つの認証方法がサポートされています。 SAS トークンベースの認証または x.509 証明書認証を使用できます。

SAS ベースのトークンの方法では、各呼び出しに対称キーを関連付けることによって、IoT Hub にデバイスで実行する各呼び出しの認証を提供します。 X.509 ベースの認証は、トランスポート層セキュリティ (TLS) 標準接続の確立の一部として物理層に IoT デバイスの認証を許可します。 安全性が低いパターンである X.509 認証を行わず、セキュリティ トークン ベースのメソッドを使用できます。 2 つの方法の選択は主に、いかに安全なデバイス認証が必要であるか、また (秘密キーを安全に格納して) デバイスにセキュリティで保護された記憶域の可用性によって決まります。

[IoT Hub Device Provisioning Service](../iot-dps/index.yml) を使用して、一度に多数のデバイスを設定し、プロビジョニングできます。

### <a name="device-communication"></a>デバイスの通信

認証方法の選択後、IoT デバイスと IoT Hub の間のインターネット接続は、トランスポート層セキュリティ (TLS) 標準を使用してセキュリティ保護されます。 Azure IoT では TLS 1.2、TLS 1.1、TLS 1.0 の順序でサポートされます。 TLS 1.0 のサポートは、旧バージョンとの互換性を保つために提供されます。 TLS 1.2 を使用するようにハブを構成する方法については、IoT Hub での TLS のサポートを参照してください。これにより、最も高いセキュリティが確保されます。

### <a name="device-communication-patterns"></a>デバイスの通信パターン

通常、IoT デバイスは、クラウド内のバックエンド サービスに対し、センサーのテレメトリを送信します。 ただし、対応している通信の種類はそれだけではなく、たとえば、バックエンド サービスからデバイスにコマンドを送信することもできます。 さまざまな通信の種類の例を次に示します。 

*  冷凍トラックから IoT ハブに 5 分おきに温度を送信する
*  バックエンド サービスからデバイスにコマンドを送信して、問題の診断に使用されるテレメトリの送信頻度を変更する
*  化学プラント内の回分反応器を監視しているデバイスから、温度が特定の値を超えたときにアラートを送信する

### <a name="device-telemetry"></a>デバイス テレメトリ

たとえば、速度や温度などのセンサー データ、見逃されたイベントなどのエラー メッセージ、デバイスが正常な状態であることを示す情報メッセージといったテレメトリを、デバイスから受信します。 IoT デバイスはイベントをアプリケーションに送信して、分析情報を取得します。 アプリケーションでは、処理のために特定のイベントのサブセットや、さまざまなエンドポイントでの保存が必要になる場合があります。

### <a name="device-properties"></a>デバイスのプロパティ

プロパティは IoT Hub から読み取ったり設定したりできます。また、アクションが完了したときに、プロパティを使って通知を送信することができます。 デバイス上の特定のプロパティの例としては、気温が挙げられます。 これは、デバイス上で更新できる書き込み可能なプロパティにできるほか、デバイスにアタッチされている温度センサーから読み取ることもできます。 

IoT Hub 内でプロパティを有効にするには、[デバイス ツイン](iot-hub-devguide-device-twins.md)または[プラグ アンド プレイ](../iot-develop/overview-iot-plug-and-play.md)を使用します。

デバイス ツインとプラグ アンド プレイの違いの詳細については、[プラグ アンド プレイ](../iot-develop/concepts-digital-twin.md#device-twins-and-digital-twins)に関するページをご覧ください。

### <a name="device-commands"></a>デバイス コマンド

コマンドの例としては、デバイスの再起動があります。 IoT Hub では、デバイス上で直接メソッドを呼び出せるようにすることで、コマンドが実装されます。 [ダイレクト メソッド](iot-hub-devguide-direct-methods.md)は、デバイスとの要求/応答型通信を表し、すぐに要求の成功または失敗が確定する (ユーザーが指定したタイムアウト後) という点で HTTP 呼び出しに似ています。 この方法は、デバイスが応答できるかどうかに応じて即座に実行するアクションが異なるシナリオで便利です。

### <a name="act-on-device-data"></a>デバイス データを操作する

IoT Hub を使用すると、ご自身のデバイス データの価値を、他の Azure サービスを使って引き出せるため、事後対応型の管理から、予測型の問題解決に移行することができます。 お使いの IoT Hub を他の Azure サービスと接続することで、機械学習、分析、AI を活用してリアルタイムのデータを操作し、処理を最適化して、より詳細な分析情報を取得できます。

#### <a name="built-in-endpoint-collects-device-data-by-default"></a>組み込みエンドポイントが既定でデバイス データを収集する

組み込みエンドポイントが、お使いのデバイスから既定でデータを収集します。 データは、専用の IoT デバイス エンドポイントに対する要求 - 応答パターンを使用して収集され、最大継続期間の 7 日間、デバイスでのアクション実行に使用できます。 デバイス エンドポイントによって受け入れられるデータを次に示します。

*    デバイスからクラウドへのメッセージを送信します。
*    クラウドからデバイスへのメッセージを受信します。
*    ファイルのアップロードの開始。
*    デバイス ツインのプロパティを取得して更新します。
*    ダイレクト メソッド要求の受信。

IoT Hub のエンドポイントの詳細については、[IoT Hub 開発者ガイドのエンドポイント](
iot-hub-devguide-endpoints.md#list-of-built-in-iot-hub-endpoints)に関するページをご覧ください

#### <a name="message-routing-sends-data-to-other-endpoints"></a>メッセージ ルーティングを使用して他のエンドポイントにデータを送信する

さらに処理するために、データを別のサービスにルーティングすることもできます。 IoT ソリューションがスケールアウトされると、デバイスの数、イベントの量、イベントの種類、各種サービスも変化します。 このパターンに対応するには、柔軟、スケーラブル、一貫性があり、信頼性の高い方法でイベントをルーティングする必要があります。 メッセージ ルートが作成されると、フォールバック ルートが構成されていない限り、組み込みエンドポイントへのデータ フローが止まります。 メッセージ ルーティングの複数の使用方法を示すチュートリアルについては、[ルーティングのチュートリアル](tutorial-routing.md)を参照してください。

IoT Hub は Event Grid とも統合されているため、複数のサブスクライバーにデータをファン アウトできます。 Event Grid は、Azure のさまざまなサービスおよびアプリケーション全体でイベントの管理を簡単にするフル マネージド イベント サービスです。 パフォーマンスとスケールを実現するために、イベント ドリブン アプリケーションとサーバーレス アーキテクチャの構築を簡素化します。 メッセージ ルーティングと Event Grid の使用の違いについては、[メッセージ ルーティングと Event Grid の比較](iot-hub-event-grid-routing-comparison.md)に関するページをご覧ください

## <a name="next-steps"></a>次のステップ

エンド ツー エンドの IoT ソリューションを試すには、IoT Hub のクイック スタートをご覧ください。

* [Quickstart: デバイスから IoT ハブへのテレメトリの送信](../iot-develop/quickstart-send-telemetry-iot-hub.md?pivots=programming-language-nodejs)

Azure IoT を使用して IoT ソリューションを構築してデプロイする方法の詳細については、以下のページを参照してください。

* [基礎: Azure IoT のテクノロジとソリューション](../iot-fundamentals/iot-services-and-technologies.md)。