---
title: パスワード保護エージェントのリリース履歴 - Azure Active Directory
description: バージョンのリリースと動作の変更履歴に関するドキュメント
services: active-directory
ms.service: active-directory
ms.subservice: authentication
ms.topic: article
ms.date: 06/04/2021
ms.author: justinha
author: justinha
manager: daveba
ms.reviewer: jsimmons
ms.collection: M365-identity-device-management
ms.openlocfilehash: 2aa4c7625637c84404b5ed7074c078717127ee1f
ms.sourcegitcommit: 57b7356981803f933cbf75e2d5285db73383947f
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 10/05/2021
ms.locfileid: "129545361"
---
# <a name="azure-ad-password-protection-agent-version-history"></a>Azure AD パスワード保護エージェントのバージョン履歴

## <a name="121760"></a>1.2.176.0

リリース日: 2021 年 6 月 4 日

* プロキシ エージェントと DC エージェントが特定の環境で正常に実行されるのを妨げる問題に対する軽微なバグ修正。

## <a name="121720"></a>1.2.172.0

リリース日: 2021 年 2 月 22 日

オンプレミスの Azure AD パスワード保護エージェントの GA バージョンがリリースされてから約 2 年が経過しました。 新しい更新プログラムが利用可能になりました。下の変更点の説明を参照してください。 この製品に関するフィードバックをお寄せくださったすべての方に感謝申し上げます。 

* DC エージェントとプロキシ エージェントのソフトウェアは、どちらも .NET 4.7.2 のインストールが必要になりました。
  * .NET 4.7.2 がまだインストールされていない場合は、[Windows 用の .NET Framework 4.7.2 オフライン インストーラー](https://support.microsoft.com/topic/microsoft-net-framework-4-7-2-offline-installer-for-windows-05a72734-2127-a15d-50cf-daf56d5faec2)に関するページにあるインストーラーをダウンロードして実行してください。
* AzureADPasswordProtection PowerShell モジュールも DC エージェント ソフトウェアによってインストールされるようになりました。
* 正常性に関連する新しい PowerShell コマンドレットが 2 つ追加されました。Test-AzureADPasswordProtectionDCAgent と Test-AzureADPasswordProtectionProxy です。
* AzureADPasswordProtection DC エージェントのパスワード フィルター dll は、lsass.exe が PPL モードで実行するように構成されているコンピューターで読み込まれ、実行されるようになりました。
* 長さが 5 文字未満の禁止されたパスワードが不適切に受け入れられることを可能にするパスワード アルゴリズムのバグを修正しました。
  * このバグは、オンプレミス AD の最小パスワード長ポリシーが、最初から 5 文字未満のパスワードを許可するように構成されていた場合にのみ該当します。
* その他の軽微なバグを修正しました。

新しいインストーラーは、古いバージョンのソフトウェアを自動的にアップグレードします。 1 台のコンピューターに DC エージェントとプロキシ ソフトウェアの両方をインストールした場合 (テスト環境にのみ推奨)、両方を同時にアップグレードする必要があります。

ドメインまたはフォレスト内で DC エージェントとプロキシ ソフトウェアの古いバージョンと新しいバージョンを実行することはサポートされていますが、ベスト プラクティスとして、すべてのエージェントを最新バージョンにアップグレードすることをお勧めします。 任意の順序でのエージェントのアップグレードがサポートされています。新しい DC エージェントは古いプロキシ エージェントを介して通信でき、古い DC エージェントは新しいプロキシ エージェントを介して通信できます。

## <a name="121250"></a>1.2.125.0

リリース日: 2019 年 3 月 2 日

* イベント ログ メッセージ内の軽度な誤りが修正されます
* EULA の契約が最終的な一般提供バージョンに更新されます

> [!NOTE]
> ビルド 1.2.125.0 は一般提供用のビルドです。 この製品に関するフィードバックをお寄せくださったすべての方に重ねて感謝申し上げます。

## <a name="121160"></a>1.2.116.0

リリース日: 2019 年 3 月 3 日

* Get-AzureADPasswordProtectionProxy コマンドレットと Get-AzureADPasswordProtectionDCAgent コマンドレットはソフトウェアのバージョンと現在の Azure テナントを報告するようになりました。ただし、次のような制限があります。
  * ソフトウェアのバージョンおよび Azure テナントのデータは、バージョン 1.2.116.0 を実行している DC エージェントとプロキシでのみ使用可能です。
  * プロキシまたはフォレストの再登録 (または更新) が行われるまでは、Azure テナントのデータは報告されない可能性があります。
* プロキシ サービスには、.NET 4.7 がインストールされていることが必要になりました。
  * .NET 4.7 がまだインストールされていない場合は、「[Windows 用の .NET Framework の 4.7 オフライン インストーラー](https://support.microsoft.com/help/3186497/the-net-framework-4-7-offline-installer-for-windows)」にあるインストーラーをダウンロードして実行してください。
  * Server Core システムでは、.NET 4.7 インストーラーを正常に実行するために、それに /q フラグを渡す必要がある場合があります。
* プロキシ サービスでは、自動アップグレードがサポートされるようになりました。 自動アップグレードでは、プロキシ サービスとサイド バイ サイドでインストールされる Microsoft Azure AD Connect Agent Updater サービスが使用されます。 自動アップグレードは既定で有効になります。
* 自動アップグレードは、Set-AzureADPasswordProtectionProxyConfiguration コマンドレットを使用して有効または無効にすることができます。 現在の設定のクエリは、Get-AzureADPasswordProtectionProxyConfiguration コマンドレットを使用して実行できます。
* DC エージェント サービスのサービス バイナリは、AzureADPasswordProtectionDCAgent.exe に名前変更されました。
* プロキシ サービスのサービス バイナリは、AzureADPasswordProtectionProxy.exe に名前変更されました。 サードパーティのファイアウォールが使用されている場合は、それに応じてファイアウォール規則を変更する必要がある場合があります。
  * 注: http プロキシ構成ファイルが以前のプロキシ インストールで使用されていた場合は、このアップグレードの後に (*proxyservice.exe.config* から *AzureADPasswordProtectionProxy.exe.config* に) 名前変更する必要があります。
* すべての期間限定の機能のチェックは、DC エージェントから削除されました。
* 軽微なバグの修正とログの機能強化。

## <a name="12650"></a>1.2.65.0

リリース日: 2019 年 2 月 1 日

変更点:

* DC エージェントとプロキシ サービスが Server Core でサポートされるようになりました。 OS の最小要件は従来から変更ありません。DC エージェントの場合は Windows Server 2012、プロキシの場合は Windows Server 2012 R2 です。
* Register-AzureADPasswordProtectionProxy と Register-AzureADPasswordProtectionForest コマンドレットでは、デバイス コード ベースの Azure 認証モードがサポートされるようになりました。
* Get-AzureADPasswordProtectionDCAgent コマンドレットは、壊れた、または無効なサービス接続ポイントを無視します。 この変更により、ドメイン コントローラーが出力に複数回表示されることがあるというバグが修正されます。
* Get-AzureADPasswordProtectionSummaryReport コマンドレットは、壊れた、または無効なサービス接続ポイントを無視します。 この変更により、ドメイン コントローラーが出力に複数回表示されることがあるというバグが修正されます。
* プロキシの PowerShell モジュールが %ProgramFiles%\WindowsPowerShell\Modules から登録されるようになりました。 コンピューターの PSModulePath 環境変数は変更されなくなりました。
* フォレストまたはドメイン内の登録されたプロキシの検出を支援するために、新しい Get-AzureADPasswordProtectionProxy コマンドレットが追加されました。
* DC エージェントは、パスワード ポリシーやその他のファイルをレプリケートするために、Sysvol 共有内の新しいフォルダーを使用します。

   古いフォルダーの場所:

   `\\<domain>\sysvol\<domain fqdn>\Policies\{4A9AB66B-4365-4C2A-996C-58ED9927332D}`

   新しいフォルダーの場所:

   `\\<domain>\sysvol\<domain fqdn>\AzureADPasswordProtection`

   (この変更は、誤検知の "切り離された GPO" の警告を回避するために行われました。)

   > [!NOTE]
   > 古いフォルダーと新しいフォルダーの間でのデータの移行や共有は実行されません。 DC エージェントの古いバージョンは、このバージョン以降にアップグレードされるまで、引き続き古い場所を使用します。 すべての DC エージェントがバージョン 1.2.65.0 以降を実行するようになったら、古い Sysvol フォルダーを手動で削除できます。

* DC エージェントとプロキシ サービスが、それぞれに対応するサービス接続ポイントの壊れたコピーを検出して削除するようになりました。
* 各 DC エージェントは、DC エージェントとプロキシ サービスの両方の接続ポイントについて、そのドメイン内の壊れた古いサービス接続ポイントを定期的に削除します。 DC エージェントとプロキシ サービスの接続ポイントはどちらも、そのハートビートのタイムスタンプが 7 日より古い場合に古いと見なされます。
* DC エージェントが、必要に応じてフォレスト証明書を更新するようになりました。
* プロキシ サービスが、必要に応じてプロキシ証明書を更新するようになりました。
* パスワード検証アルゴリズムの更新: グローバル禁止パスワード リストと顧客固有の禁止パスワード リスト (構成されている場合) がパスワード検証の前に結合されます。 グローバル リストと顧客固有のリストの両方のトークンが含まれている場合は、その特定のパスワードを拒否できるようになりました (失敗または監査のみ)。 イベント ログのドキュメントがこれを反映するように更新されました。[Azure AD のパスワード保護の監視](howto-password-ban-bad-on-premises-monitor.md)に関するページを参照してください。
* パフォーマンスと堅牢性の修正
* ログ記録の強化

> [!WARNING]
> 期間限定の機能: このリリース (1.2.65.0) の DC エージェント サービスは、2019 年 9 月 1 日の時点でパスワード検証要求の処理を停止します。  以前のリリース (下の一覧を参照) の DC エージェント サービスは、2019 年 7 月 1 日の時点でこの処理を停止します。 すべてのバージョンの DC エージェント サービスは、これらの期限までの 2 か月間に 10021 個のイベントを管理イベント ログに記録します。 期間限定のすべての制限は、今後予定されている GA リリースで削除されます。 プロキシ エージェント サービスはどのバージョンでも期間限定されていませんが、以降のバグ修正やその他の機能強化をすべて利用するには、やはり最新バージョンにアップグレードする必要があります。

## <a name="12250"></a>1.2.25.0

リリース日: 2018 年 11 月 1 日

修正

* DC エージェントとプロキシ サービスは、証明書の信頼の問題により失敗することがなくなりました。
* DC エージェントとプロキシ サービスには、FIPS 準拠マシンに関する修正があります。
* プロキシ サービスは、TLS 1.2 のみのネットワーク環境で正しく動作するようになりました。
* パフォーマンスと信頼性のマイナー修正
* ログ記録の強化

変更点:

* プロキシ サービスに必要な最低の OS レベルが、Windows Server 2012 R2 になりました。 DC エージェント サービスに必要な最低の OS レベルは、Windows Server 2012 のままです。
* プロキシ サービスに .NET バージョン 4.6.2 が必要になりました。
* パスワード検証アルゴリズムでは、拡張文字正規化テーブルが使用されます。 この変更により、以前のバージョンでは受け入れられていたパスワードが拒否される可能性があります。

## <a name="12100"></a>1.2.10.0

リリース日: 2018 年 8 月 17 日

修正

* Register-AzureADPasswordProtectionProxy と Register-AzureADPasswordProtectionForest では、多要素認証がサポートされるようになりました。
* Register-AzureADPasswordProtectionProxy では、暗号化エラーを回避するために、ドメインに WS2012 以降のドメイン コントローラーが必要です。
* DC エージェント サービスを使用すると、起動時の Azure からの新しいパスワード ポリシーの要求に関する信頼性が高くなります。
* DC エージェント サービスでは、必要に応じて 1 時間ごとに Azure から新しいパスワード ポリシーが要求されますが、ランダムに選択された開始時刻に要求されるようになります。
* DC エージェント サービスを使用すると、レプリカとしてプロモーションされる前にサーバー上にインストールされるときに、新しい DC アドバタイズで無限に遅延が発生することがなくなります。
* DC エージェント サービスでは、[Windows Server Active Directory のパスワード保護を有効にする] の構成設定を優先します。
* 今後のバージョンにアップグレードするときに、DC エージェントとプロキシ インストーラーの両方で一括アップグレードがサポートされるようになります。

> [!WARNING]
> バージョン 1.1.10.3 からの一括アップグレードはサポートされておらず、インストール エラーが発生します。 バージョン 1.2.10 以降にアップグレードするには、まず DC エージェントとプロキシ サービス ソフトウェアを完全にアンインストールし、最初から新しいバージョンをインストールする必要があります。 Azure AD パスワード保護プロキシ サービスの再登録が必要です。  フォレストを再登録する必要はありません。

> [!NOTE]
> DC エージェント ソフトウェアの一括アップグレードには再起動が必要です。

* DC エージェントとプロキシ サービスでは、FIPS 準拠アルゴリズムのみを使用するように構成されたサーバーでの実行をサポートします。
* パフォーマンスと信頼性のマイナー修正
* ログ記録の強化

## <a name="11103"></a>1.1.10.3

リリース日: 2018 年 6 月 15 日

初期パブリック プレビュー リリース

## <a name="next-steps"></a>次のステップ

[Azure AD のパスワード保護をデプロイする](howto-password-ban-bad-on-premises-deploy.md)
