---
title: オンプレミス サービス アカウントの管理 | Azure Active Directory
description: このガイドを使用して、サービス アカウントのアカウント ライフサイクル プロセスを作成して実行します。
services: active-directory
author: BarbaraSelden
manager: daveba
ms.service: active-directory
ms.workload: identity
ms.subservice: fundamentals
ms.topic: conceptual
ms.date: 2/15/2021
ms.author: baselden
ms.reviewer: ajburnle
ms.custom: it-pro, seodec18
ms.collection: M365-identity-device-management
ms.openlocfilehash: e02755f748cffcf7c523ce3b9c6fc651d2b1b02f
ms.sourcegitcommit: 070122ad3aba7c602bf004fbcf1c70419b48f29e
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 06/04/2021
ms.locfileid: "111438920"
---
# <a name="govern-on-premises-service-accounts"></a>オンプレミス サービス アカウントを管理する

Active Directory では、次の 4 種類のオンプレミス サービス アカウントが提供されています。

* [グループ管理サービス アカウント (gMSA)](service-accounts-group-managed.md)  
* [スタンドアロン管理サービス アカウント (sMSA)](service-accounts-standalone-managed.md)  
* [コンピューター アカウント](service-accounts-computer.md)  
* [サービス アカウントとして機能するユーザー アカウント](service-accounts-user-on-premises.md)


次のことを行うことができるよう、サービス アカウントを厳重に管理することが重要です。 

* ユースケースの要件と目的に基づいて保護する。  
* アカウントとその資格情報のライフサイクルを管理する。  
* 晒されるリスクと付与されているアクセス許可に基づいて評価する。  
* Active Directory と Azure Active Directory に、広範囲に及ぶ可能性があるアクセス許可が付与された古いサービス アカウントがないことを確認する。

## <a name="principles-for-creating-a-new-service-account"></a>新しいサービス アカウントを作成するための原則

サービス アカウントを作成する際は、次の表に記載されている考慮事項について理解しておくようにします。

| 原則| 考慮事項 | 
| - |- | 
| サービス アカウントのマッピング| サービス アカウントは、1 つのサービス、アプリケーション、またはスクリプトに関連付けます。 |
| 所有権| アカウントをリクエストし、その責任を引き受ける所有者がいることを確認します。 |
| Scope| スコープを明確に定義し、サービス アカウントの使用期間を予測します。 |
| 目的| 1 つの特定の目的でサービス アカウントを作成します。 |
| アクセス許可 | "*最小特権*" の原則を適用します。 そのためには次を行います。<li>組み込みのグループ (管理者など) には、アクセス許可を割り当てない。<li>必要に応じて、ローカル コンピューターのアクセス許可を削除する。<li>アクセスを調整し、ディレクトリへのアクセスについては Active Directory の委任を使用する。<li>詳細なアクセス許可を使用する。<li>ユーザーベースのサービス アカウントに対してアカウントの有効期限と場所に基づく制限を設定する。 |
| 監視と監査の使用| サインイン データを監視し、それが目的の使用方法に一致していることを確認します。 異常な使用に対するアラートを設定します。 |
| | |

### <a name="set-restrictions-for-user-accounts"></a>ユーザー アカウントの制限を設定する

サービス アカウントとして使用するユーザー アカウントには、次の設定を適用します。

* [**アカウントの有効期限**](/powershell/module/activedirectory/set-adaccountexpiration?view=winserver2012-ps&preserve-view=true): アカウントを継続する必要があると判断した場合を除き、レビュー期間後の設定された時間にサービス アカウントが自動的に期限切れになるように設定します。

*  **ログオンできるワークステーション**: サービス アカウントでサインインできる場所のアクセス許可を制限します。 マシン上でローカルに実行され、そのマシン上のリソースにのみアクセスする場合は、それ以外の場所にサインインできないよう制限します。

* [**パスワードを変更できない**](/powershell/module/activedirectory/set-aduser): パラメーターを false に設定することで、サービス アカウントから自身のパスワードを変更できないようにします。
 
## <a name="build-a-lifecycle-management-process"></a>ライフサイクル管理プロセスを作成する

サービス アカウントのセキュリティを維持するには、必要性を特定した時点から、それらが使用停止になるまで管理する必要があります。 

サービス アカウントのライフサイクル管理には、次のプロセスを使用します。

1. アカウントの使用状況に関する情報を収集する。
1. サービス アカウントとアプリを構成管理データベース (CMDB) に移行する。
1. リスク評価または正式なレビューを実行する。
1. サービス アカウントを作成し、制限を適用する。
1. 定期的なレビューをスケジュールして実行する。 必要に応じてアクセス許可とスコープを調整する。
1. 必要に応じてアカウントをプロビジョニング解除する。

### <a name="collect-usage-information-for-the-service-account"></a>サービス アカウントの使用状況に関する情報を収集する

各サービス アカウントの関連するビジネス情報を収集します。 下の表には、収集すべき最低限の情報を示していますが、各アカウントの存在に関するビジネス ケースを作成するために必要なものはすべて収集する必要があります。

| Data| 説明 |
| - | - |
| 所有者| サービス アカウントの説明責任を負うユーザーまたはグループ |
| 目的| サービス アカウントの目的 |
| アクセス許可 (スコープ)| 予期されるアクセス許可のセット |
| CMDB リンク| ターゲットのスクリプトまたはアプリケーションと所有者とのクロスリンク サービス アカウント |
| リスク| セキュリティ リスク評価に基づくリスクとビジネスへの影響のスコアリング |
| 有効期間| アカウントの有効期限または再認定のスケジュールを有効にするための予想される最長有効期間 |
| | |

アカウントのリクエストをセルフサービスにし、関連情報を要求するのが理想的です。 所有者には、アプリケーションまたはビジネスの所有者、IT メンバー、またはインフラストラクチャの所有者を指定できます。 このリクエストと関連情報にMicrosoft Forms などのツールを使用すると、アカウントが承認された場合に、CMDB インベントリ ツールに簡単に移植できます。

### <a name="onboard-service-account-to-cmdb"></a>サービス アカウントを CMDB にオンボードする

収集した情報を CMDB 型アプリケーションに格納します。 ビジネス情報に加えて、他のインフラストラクチャ、アプリ、およびプロセスへのすべての依存関係を含めます。  この中央リポジトリを使用すると、次のことが容易になります。

* リスクを評価する。  
* 必要な制限が適用されたサービス アカウントを構成する。  
* 関連する機能とセキュリティの依存関係を把握する。  
* セキュリティと継続的な必要性に関して定期的なレビューを実施する。  
* サービス アカウントの確認、廃止、変更について所有者に問い合わせる。

Web サイトを実行するために使用され、1 つ以上の人事 (HR) SQL データベースへの接続権限があるサービス アカウントを考えてみます。 以下の表は、CMDB に保存されているサービス アカウントの情報 (例の説明を含む) の一覧です。

|データ | 例の説明|
| - | - |
| 所有者、Deputy| John Bloom、Anna Mayers |
| 目的| HR Web ページを実行し、HR データベースに接続します。 データベースにアクセスするときにはエンド ユーザーの権限を借用できます。 |
| アクセス許可、スコープ| HR-WEBServer: ローカルにサインイン。Web ページの実行<br>HR-SQL1: ローカルにサインイン。すべての HR データベースに対する読み取り権限<br>HR-SQL2: ローカルにサインイン。給料データベースのみに対する読み取り権限 |
| Cost Center| 883944 |
| 評価されるリスク| 中、ビジネスへの影響: 中、個人情報: 中 |
| アカウントの制限| ログオン先: 前述のサーバーのみ、パスワードを変更できない、MBI パスワード ポリシー、 |
| 有効期間| 無制限 |
| レビュー サイクル| 半年ごと (所有者別、セキュリティ チーム別、プライバシー別) |
| | |

### <a name="perform-a-risk-assessment-or-formal-review-of-service-account-usage"></a>サービス アカウントの使用状況に関するリスク評価または正式なレビューを実行する

不正なソースによってアカウントが侵害されたとします。 そのアカウントに関連付けられているアプリケーションやサービス、およびインフラストラクチャにもたらされる可能性があるリスクを評価します。 直接的および間接的の両方のリスクを考慮します。 

* 承認されていないユーザーが直接アクセスを取得できるものは何か。  
* サービス アカウントがアクセスできるその他の情報またはシステムとは。  
* そのアカウントを使用して追加のアクセス許可を付与できるか。  
* アクセス許可が変更された場合、どのようにしてそれを知ることができるか。

リスク評価を実施して文書化すると、リスクは次のようなものに対して影響を及ぼすことに気づくことがあります。

* アカウントの制限。  
* アカウントの有効期間。  
* アカウントのレビュー要件 (頻度とレビュー担当者)。

### <a name="create-a-service-account-and-apply-account-restrictions"></a>サービス アカウントを作成し、アカウントの制限を適用する

サービス アカウントを作成するのは、必ずリスク評価を完了し、関連する情報を CMDB に記録した後に行います。 アカウントの制限をリスク評価に合わせます。 評価に関連する場合は、次の制限事項を考慮してください。

* サービス アカウントとして使用するすべてのユーザー アカウントには、現実的で明確な終了日を定義します。 日付は **アカウントの有効期限** フラグを使用して設定します。 詳しくは、「[Set-ADAccountExpiration](/powershell/module/activedirectory/set-adaccountexpiration)」をご覧ください。 

* [LogonWorkstation](/powershell/module/activedirectory/set-aduser) にログインします。

* [パスワード ポリシー](../../active-directory-domain-services/password-policy.md)の要件。

* 許可されたユーザーのみが管理できる[組織単位の場所](/windows-server/identity/ad-ds/plan/delegating-administration-of-account-ous-and-resource-ous)でのアカウントの作成。

* サービス アカウントと[サービス アカウントの使用](https://www.manageengine.com/products/active-directory-audit/how-to/audit-kerberos-authentication-events.html)に対する[変更を検出する](/windows/security/threat-protection/auditing/audit-directory-service-changes)監査の設定と収集。

サービス アカウントを運用環境に移行する準備ができたら、アクセス権をより安全に付与します。 

### <a name="schedule-regular-reviews-of-service-accounts"></a>サービス アカウントの定期的なレビューをスケジュールする

中および高のリスクとして分類されたサービス アカウントの定期的なレビューを設定します。 レビューには次のものが含まれている必要があります。 

* アカウントの継続的な必要性、および権限とスコープの正当性に対する所有者による認証。

* 上位および下流の接続に関する評価など、プライバシーおよびセキュリティのチームによるレビュー。

* 意図された目的のためだけに使用されていることを確認する監査からのデータ。

### <a name="deprovision-service-accounts"></a>サービス アカウントをプロビジョニング解除する

プロビジョニング解除プロセスでは、まずアクセス許可と監視を削除してから、必要に応じてアカウントを削除します。

サービス アカウントのプロビジョニング解除は、次の場合に行います。

* サービス アカウントの作成目的であるスクリプトまたはアプリケーションが廃止されている。

* サービス アカウントの使用目的であるスクリプトまたはアプリケーション内の機能 (特定のリソースへのアクセスなど) が廃止されている。

* サービス アカウントが別のサービス アカウントに置き換えられている。

すべてのアクセス許可を削除したら、次の手順を実行してアカウントを削除します。

1. 関連するアプリケーションまたはスクリプトがプロビジョニング解除されたら、関連するサービス アカウントのサインインとリソース アクセスを監視して、それが別のプロセスで使用されていないことを確認します。 もう必要ないことが確信できたら、次の手順にお進みください。

1. サインインを防止するためにサービス アカウントを無効にし、不要になったことを確認します。 アカウントを無効のままにする必要がある期間を示すビジネス ポリシーを作成します。

1. 無効のままにするポリシーが満たされたら、サービス アカウントを削除します。 

   * **MSA の場合**: PowerShell を使用して [アカウントをアンインストールする](/powershell/module/activedirectory/uninstall-adserviceaccount?view=winserver2012-ps&preserve-view=true)ことも、管理されたサービス アカウント コンテナーから手動で削除することもできます。

   * **コンピューターまたはユーザー アカウントの場合**: Active Directory 内から手動でアカウントを削除できます。

## <a name="next-steps"></a>次のステップ

サービス アカウントのセキュリティ保護の詳細については、次の記事を参照してください。

* [オンプレミス サービス アカウントの概要](service-accounts-on-premises.md)  
* [グループ管理サービス アカウントをセキュリティで保護する](service-accounts-group-managed.md)  
* [スタンドアロン管理サービス アカウントをセキュリティで保護する](service-accounts-standalone-managed.md)  
* [コンピューター アカウントをセキュリティで保護する](service-accounts-computer.md)  
* [ユーザー アカウントをセキュリティで保護する](service-accounts-user-on-premises.md)
