---
title: 最小限の特権の原則でアプリのセキュリティを高める
titleSuffix: Microsoft identity platform
description: アプリケーション、そのデータ、および最小限の特権アクセスの実装に使用できる Microsoft ID プラットフォームの機能のセキュリティを高めるために、最小限の特権の原則がどのように役立つのかについて説明します。
services: active-directory
author: Chrispine-Chiedo
manager: CelesteDG
ms.service: active-directory
ms.subservice: develop
ms.topic: conceptual
ms.workload: identity
ms.date: 09/09/2021
ms.custom: template-concept
ms.author: cchiedo
ms.reviewer: yuhko, saumadan, marsma
ms.openlocfilehash: a7e504bfd13d89ba417067faf88cf17cf12e1d0b
ms.sourcegitcommit: 0770a7d91278043a83ccc597af25934854605e8b
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 09/13/2021
ms.locfileid: "124786486"
---
# <a name="enhance-security-with-the-principle-of-least-privilege"></a>最小限の特権の原則でセキュリティを高める

最小限の特権の情報セキュリティ原則では、ジョブの実行に必要なデータと操作へのアクセス権のみをユーザーとアプリケーションに付与する必要があることをアサートします。

ここでのガイダンスに従って、アプリケーションの攻撃面を縮小し、Microsoft ID プラットフォーム統合アプリケーションでセキュリティ侵害が発生した場合には、その影響 (*影響範囲*) を軽減します。

## <a name="recommendations-at-a-glance"></a>推奨事項の一覧

- *未使用* のアクセス許可と *再割り当て可能な* アクセス許可を取り消して、**過剰な特権** が与えられているアプリケーションを防止する。
- ID プラットフォームの **同意** フレームワークを使用して、保護されたデータへのアクセスを求めるアプリの要求に対して人間の同意が必要になるようにする。
- 開発のすべての段階で、最低限の特権に留意してアプリケーションを **構築** する。
- デプロイされたアプリケーションを定期的に **監査** して、過剰な特権があたえられたアプリを特定する。

## <a name="whats-an-overprivileged-application"></a>*過剰な特権* が与えられているアプリケーションとは

**未使用** または **再割り当て可能な** アクセス許可が付与されているアプリケーションは、"過剰な特権が与えられている" と見なされます。 未使用のアクセス許可と再割り当て可能なアクセス許可により、アプリまたはユーザーがジョブの実行に必要としないデータまたは操作に対して、許可されていないアクセスや意図されていないアクセスが行われる可能性があります。

:::row:::
   :::column span="":::
      ### <a name="unused-permissions"></a>未使用のアクセス許可

        未使用のアクセス許可とは、アプリケーションに付与されているアクセス許可ですが、そのアクセス許可によって公開される API や操作は、意図どおりに使用されればアプリによって呼び出されることはありません。

        - **例**: アプリケーションでは、Microsoft Graph API を呼び出し、[Files.Read](/graph/permissions-reference) アクセス許可を利用して、サインインしたユーザーの OneDrive に保存されたファイルの一覧を表示します。 ただし、アプリには、[Calendars.Read](/graph/permissions-reference#calendars-permissions) アクセス許可も付与されていますが、カレンダー機能は提供せず、Calendars API も呼び出しません。

        - **セキュリティ リスク**: 未使用のアクセス許可では、*水平方向の特権エスカレーション* のセキュリティ リスクが発生します。 アプリケーションのセキュリティの脆弱性を悪用するエンティティは、未使用のアクセス許可を使用して、意図どおりに使用されれば通常はアプリケーションでサポートも許可もされていない API または操作へのアクセスを取得できます。

        - **軽減策**: アプリケーションで行われた API 呼び出しで使用されていないアクセス許可を削除します。
   :::column-end:::
   :::column span="":::
      ### <a name="reducible-permissions"></a>再割り当て可能なアクセス許可

        再割り当て可能なアクセス許可とは、必要なタスクを実行するために必要とするアクセス権をアプリケーションとそのユーザーに提供し続ける特権を低めた対応物を持つアクセス許可です。

        - **例**: アプリケーションでは、Microsoft Graph API を呼び出して、サインインしたユーザーのプロファイル情報を表示しますが、プロファイルの編集はサポートしていません。 ただし、アプリには [User.ReadWrite.All](/graph/permissions-reference#user-permissions) アクセス許可が付与されています。 制限の厳しい *User.Read.All* アクセス許可によってユーザー プロファイル データへの十分な読み取り専用アクセス権が付与されるので、*User.ReadWrite.All* アクセス許可はここでは再割り当て可能と見なされます。

        - **セキュリティ リスク**: 再割り当て可能なアクセス許可では、*垂直方向の特権エスカレーション* のセキュリティ リスクが発生します。 アプリケーションのセキュリティの脆弱性を悪用するエンティティは、再割り当て可能なアクセス許可を使用して、データに不正アクセスしたり、通常ならばそのエンティティのロールでは許可されない操作を実行したりできます。

        - **軽減策**: アプリケーションの再割り当て可能なアクセス許可のそれぞれを、アプリケーションの目的の機能を引き続き有効にする特権の最も少ないアクセス許可に置き換えます。
   :::column-end:::
:::row-end:::

未使用のアクセス許可と再割り当て可能なアクセス許可によってセキュリティ リスクが発生しないようにするには、*過不足のない* アクセス許可 (アプリケーションまたはユーザーが必要なタスクを実行するために必要とする最小限の特権アクセスを持ったアクセス許可) を付与します。

## <a name="use-consent-to-control-access-to-data"></a>同意を使用してデータへのアクセスを制御する

構築するほとんどのアプリケーションでは、保護されたデータへのアクセスが必要であり、そのデータの所有者は、そのアクセスに[同意](application-consent-experience.md#consent-and-permissions)する必要があります。 同意は、Azure AD テナントの *すべて* のユーザーに代わって同意できるテナント管理者による方法や、アクセス権を付与できるアプリケーション ユーザー自身による方法など、複数の方法で付与できます

ユーザーのデバイスで実行されるアプリケーションでは、保護されたデータへのアクセスを要求するたびに、その保護されたデータへのアクセスを許可する前にユーザーの同意を求める必要があります。 エンド ユーザーは、アプリケーションが先に進む前に、要求されたアクセス許可に対する同意を与える (または拒否する) 必要があります。

:::image type="content" source="./media/least-privilege-best-practice/api-permissions.png" alt-text="アプリ登録の [API のアクセス許可] ペインを示す Azure portal のスクリーンショット":::

## <a name="least-privilege-during-app-development"></a>アプリ開発中の最小限の特権

アプリケーションを構築する開発者は、アプリとそのユーザーのデータのセキュリティを *自分* の責任と見なします。

アプリケーションの開発中に以下のガイドラインに従うと、過剰な特権が与えられるアプリの構築を回避できます。

- アプリケーションで行う必要がある API 呼び出しに必要なアクセス許可について完全に理解する。
- [Graph Explorer](https://developer.microsoft.com/graph/graph-explorer) を使用して、アプリで行う必要がある各 API 呼び出しの最小特権のアクセス許可について理解する。
- 最小から最大特権までの対応する[アクセス許可](/graph/permissions-reference)を見つける。
- アプリが重複するアクセス許可を持つ API 呼び出しを行う場合に、重複するアクセス許可のセットを削除する。
- アクセス許可の一覧で最小特権のアクセス許可を選択することで、最小特権のアクセス許可セットのみをアプリケーションに適用する。

## <a name="least-privilege-for-deployed-apps"></a>デプロイされたアプリの最小限の特権

組織では多くの場合、通常の業務が影響されないように、実行中のアプリケーションを変更したくありません。 ただし、組織では、アプリの過剰な特権アクセスによってセキュリティ インシデントが発生したり、より深刻になったりするというリスクを軽減するために、アプリケーションのスケジュールされた更新を行う価値があると考える必要があります。

以下のような標準的慣行を組織で行うと、デプロイされたアプリに過剰な特権が与えられず、時間が経過しても過剰な特権が与えられなくなります。

- アプリケーションから行われた API 呼び出しを評価する。
- [Graph Explorer](https://developer.microsoft.com/graph/graph-explorer) および [Microsoft Graph](/graph/overview) ドキュメントを使用して、必須および最小特権アクセス許可について確認する。
- ユーザーまたはアプリケーションに付与される特権を監査する。
- 最小特権のアクセス許可セットでアプリケーションを更新する。
- アクセス許可レビューを定期的に実施して、すべての認可されたアクセス許可が引き続き関連していることを確認する。

## <a name="next-steps"></a>次のステップ

**保護されたリソースのアクセスと同意**

保護されたリソースへのアクセスの構成と、それらの保護されたリソースへのアクセスに対する同意を提供するユーザー エクスペリエンスの詳細については、次の記事を参照してください。

- [Microsoft ID プラットフォームでのアクセス許可と同意](../develop/v2-permissions-and-consent.md)
- [Azure AD アプリケーションの同意エクスペリエンスについて](../develop/application-consent-experience.md)

**ゼロ トラスト** - 組織のプロアクティブな[ゼロ トラスト セキュリティ戦略](/security/zero-trust/)の一環としてここで説明した最小限の特権方法を採用することを検討してください。
