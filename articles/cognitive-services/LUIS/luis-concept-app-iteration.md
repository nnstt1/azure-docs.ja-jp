---
title: 反復的アプリ設計 - LUIS
titleSuffix: Azure Cognitive Services
description: LUIS は、モデル変更、発話の例、公開、エンドポイント クエリからのデータ収集という反復サイクルの中で最も適切に学習します。
services: cognitive-services
manager: nitinme
ms.custom: seodec18
ms.service: cognitive-services
ms.subservice: language-understanding
ms.topic: conceptual
ms.date: 07/06/2020
ms.openlocfilehash: 92991ef4b9889b0be2e887884ed46086b87ff9f3
ms.sourcegitcommit: f6e2ea5571e35b9ed3a79a22485eba4d20ae36cc
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 09/24/2021
ms.locfileid: "128588886"
---
# <a name="iterative-app-design-for-luis"></a>LUIS の反復的アプリ設計

Language Understanding (LUIS) アプリは、反復を使用して最も効率的に学習および実行します。 次に、一般的な反復サイクルを示します。

* 新しいバージョンを作成する
* LUIS アプリ スキーマを編集する。 これには次のものが含まれます
    * 発話の例が含まれる意図
    * エンティティ
    * 特徴
* トレーニング、テスト、公開
    * アクティブ ラーニングの予測エンドポイントでテストする
* エンドポイント クエリからデータを収集する

![作成サイクル](./media/luis-concept-app-iteration/iteration.png)

## <a name="building-a-luis-schema"></a>LUIS スキーマの構築

アプリのスキーマでは、ユーザーが求めていること (_意図_) と、回答の決定に使用される詳細情報 (_エンティティ_ と呼ばれる) が意図のどの部分に示されているのかを定義します。

関連性のある単語およびフレーズの決定と一般的な語順の決定には、アプリのスキーマがアプリのドメインに固有である必要があります。

発話の例では、アプリが実行時に期待する、認識された音声やテキストなどのユーザー入力を表します。

スキーマには意図が必要であり、エンティティが _含まれている必要があります_。

### <a name="example-schema-of-intents"></a>意図のスキーマの例

最も一般的なスキーマが意図によって編成された意図のスキーマです。 この種類のスキーマは、LUIS を使用してユーザーの意図を決定します。

意図のスキーマの種類には、LUIS がユーザーの意図を決定するのに役立つエンティティが含まれている可能性があります。 たとえば、(意図に対する "_機械学習特徴_" としての) 配送エンティティは、LUIS で配送の意図を判断するために役立ちます。

### <a name="example-schema-of-entities"></a>エンティティのスキーマの例

エンティティのスキーマは、ユーザーの発話から抽出されるデータであるエンティティに注目します。 たとえば、ユーザーが "ピザを 3 つ注文したい" と言ったとします。 抽出されるエンティティには、_3_ と _ピザ_ の 2 つがあります。 これらは注文を行うという意図を達成するために使用されます。

エンティティのスキーマの場合、発話の意図は、クライアント アプリケーションにとってはあまり重要ではありません。

### <a name="example-of-a-mixed-schema"></a>混合スキーマの例

最も強力で成熟度の高いスキーマが、すべてのエンティティと機能を備えた意図のスキーマです。 このスキーマは意図またはエンティティのスキーマのどちらかで開始し、その両方の概念が含まれるように拡大することができます。これは、クライアント アプリケーションでそのような情報が必要とされるためです。

## <a name="add-example-utterances-to-intents"></a>発話の例を意図に追加する

LUIS では各 **意図** での発話の例が必要です。 発話の例には、発話が意味する意図を決定できるくらい十分なバリエーションの単語の選択と語順が必要になります。

> [!CAUTION]
> 発話の例はまとめて追加しないでください。 15 から 30 くらいの、具体的で異なる例から始めてください。

各発話例には、**エンティティ** で設計されラベル付けされた、**抽出に必要なデータ** がすべて含まれている必要があります。

|主な要素|目的|
|--|--|
|Intent|ユーザーの発話を単一の意図、つまりアクションに **分類** します。 例は、`BookFlight` や `GetWeather` のようになります。|
|Entity|意図を完了するために必要なデータを、発話から **抽出** します。 例としては、旅行の日付と時刻、場所などがあります。|

発話を **None** の意図に割り当てることによって、アプリのドメインに無関係な発話を無視するように LUIS アプリを設計することができます。

## <a name="test-and-train-your-app"></a>アプリのテストとトレーニング

必要なエンティティがラベル付けされている 15 から 30 のさまざまな発話の例を意図ごとに用意したら、LUIS アプリをテストして[トレーニング](luis-how-to-train.md)する必要があります。

## <a name="publish-to-a-prediction-endpoint"></a>予測エンドポイントに公開する

LUIS アプリは、[予測エンドポイント領域](luis-reference-regions.md)の一覧で使用できるように公開される必要があります。

## <a name="test-your-published-app"></a>発行したアプリのテスト

HTTPS 予測エンドポイントから公開した LUIS アプリをテストできます。 予測エンドポイントからテストすると、LUIS では、信頼度が低い発話を[確認](luis-how-to-review-endpoint-utterances.md)用に選択できます。

## <a name="create-a-new-version-for-each-cycle"></a>サイクルごとに新しいバージョンを作成する

各バージョンは、LUIS アプリのある時点のスナップショットです。 アプリを変更する前に、新しいバージョンを作成してください。 以前のバージョンに戻り、意図と発話を削除し、前の状態に戻してみるとより簡単です。

バージョン ID は、文字、数字、または '.' で構成します。文字数は 10 文字までです。

初期バージョン (0.1) は、既定のアクティブなバージョンです。

### <a name="begin-by-cloning-an-existing-version"></a>既存のバージョンを複製して開始する

既存のバージョンを複製して、それぞれの新しいバージョンの始点として使用します。 バージョンを複製すると、新規バージョンが **アクティブ** なバージョンになります。

### <a name="publishing-slots"></a>発行スロット

ステージング スロットと運用スロットのどちらかに公開できます。 スロットごとで、別のバージョンを公開することも、同じバージョンを公開することもできます。 これは、運用に公開する前の変更の確認に役立ち、ボットや他の LUIS 呼び出し元アプリで使用できます。

トレーニング済みのバージョンは、LUIS アプリの[エンドポイント](luis-glossary.md#endpoint)で自動的に利用できるわけではありません。 バージョンを LUIS アプリのエンドポイントで利用可能にするには、[公開](luis-how-to-publish-app.md)または再公開する必要があります。 **ステージング** と **運用** に公開できるので、エンドポイントでは 2 つのバージョンのアプリを使用できます。 エンドポイントで使用できるアプリのバージョンがさらに必要な場合は、バージョンをエクスポートして、新しいアプリに再度インポートします。 新しいアプリには別のアプリ ID が付きます。

### <a name="import-a-version"></a>バージョンをインポートする

バージョンは次の新しいものとして **インポートする** ことができます。
* 新しいアプリ ID を持つアプリ
* 既存のアプリのバージョン

そのバージョンがアクティブなバージョンになり、アプリ ファイルの `versionId` プロパティではそのバージョン ID が使用されます。

### <a name="export-a-version"></a>バージョンをエクスポートする

バージョンは、アプリ レベルまたはバージョン レベルで LUIS ポータルから **エクスポートする** ことができます。

* アプリ レベル - **[マイ アプリ]** ページでアプリを選択した後、 **[エクスポート]** を選択します
* バージョン レベル - **[マイ アプリ]** ページでアプリ リンクを選択し、 **[管理]** を選択して、 **[バージョン]** を選択します

唯一の違いは、アプリ レベルでエクスポートされるバージョンは現在アクティブなバージョンであるのに対して、バージョン レベルでは、 **[[設定]](luis-how-to-manage-versions.md)** ページで任意のバージョンを選択してエクスポートできます。

エクスポートされたファイルには次が含まれて **いません**。

* 機械学習の情報 (アプリはインポート後に再度トレーニングされるため)
* 共同作成者情報

LUIS アプリのスキーマをバックアップするには、[LUIS ポータル](https://www.luis.ai/applications)からバージョンをエクスポートします。

## <a name="manage-contributor-changes-with-versions-and-contributors"></a>バージョンと共同作成者で共同作成者の変更を管理する

LUIS は、Azure リソースレベルのアクセス許可を提供することで、アプリの共同作成者の概念を使用します。 この概念とバージョン管理を組み合わせることにより、対象を絞ったコラボレーションが実現します。

アプリの共同作成者の変更を管理するには、次の方法を使用します。

### <a name="manage-multiple-versions-inside-the-same-app"></a>同じアプリ内で複数のバージョンを管理する

まず、各作成者用に、基本バージョンから[複製](luis-how-to-manage-versions.md#clone-a-version)します。

各作成者は、アプリの自分のバージョンに変更を加えます。 作成者は自分のモデルに満足したら、新しいバージョンを JSON ファイルにエクスポートします。

エクスポートされたアプリ (`.json` または `.lu` ファイル) で、変更を比較することができます。 ファイルを結合して、新しいバージョンのファイルを 1 つ作成します。 `versionId` プロパティを変更して、マージされた新しいバージョンを示します。 このバージョンを元のアプリにインポートします。

この方法に従うと、アクティブなバージョンが 1 つ、ステージング バージョンが 1 つ、公開済みのバージョンが 1 つ存在することになります。 [対話型のテスト ウィンドウ](luis-interactive-test.md)で、アクティブなバージョンの結果を、発行されたバージョン (ステージングまたは運用) と比較することができます。

### <a name="manage-multiple-versions-as-apps"></a>複数のバージョンをアプリとして管理する

基本バージョンを[エクスポート](luis-how-to-manage-versions.md#export-version)します。 各作成者がこのバージョンをインポートします。 アプリをインポートするユーザーが、バージョンの所有者です。 アプリの変更が完了したら、バージョンをエクスポートします。

エクスポートされたアプリは JSON 形式ファイルなので、変更点を基本のエクスポートと比較することができます。 ファイルを結合して、新しいバージョンの JSON ファイルを 1 つ作成します。 JSON の **versionId** プロパティを変更して、マージされた新しいバージョンを示します。 このバージョンを元のアプリにインポートします。

コラボレーターからの投稿の作成の詳細については、[こちら](luis-how-to-collaborate.md)を参照してください。

## <a name="review-endpoint-utterances-to-begin-the-new-iterative-cycle"></a>エンドポイントの発話を確認して、新しい反復サイクルを開始する

反復サイクルが終了したら、プロセスを繰り返すことができます。 LUIS によって信頼度が低いとマークされた[予測エンドポイントの発話の確認](luis-how-to-review-endpoint-utterances.md)から開始します。 これらの発話で、予測される正しい意図と、正確で完全なエンティティが抽出されたことを確認します。 変更を確認して同意すると、確認リストが空になります。

## <a name="next-steps"></a>次のステップ

[コラボレーション](luis-how-to-azure-subscription.md)の概念を学習します。
