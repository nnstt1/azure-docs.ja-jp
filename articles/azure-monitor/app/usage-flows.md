---
title: Application Insights User Flows によるナビゲーション フローの分析
description: ユーザーが Web アプリのページ間および機能間をどのように移動しているかを分析します。
ms.topic: conceptual
author: mattmccleary
ms.author: mmcc
ms.date: 07/30/2021
ms.openlocfilehash: 14884f46df08e8171c178db907ee187af89a838c
ms.sourcegitcommit: 147910fb817d93e0e53a36bb8d476207a2dd9e5e
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 10/18/2021
ms.locfileid: "130129531"
---
# <a name="analyze-user-navigation-patterns-with-user-flows-in-application-insights"></a>Application Insights でユーザー フローを使用してユーザーのナビゲーション パターンを分析する

![Application Insights ユーザー フロー ツール](./media/usage-flows/flows.png)

ユーザー フロー ツールは、ユーザーがサイトのページ間および機能間をどのように移動しているかを目で見てわかるようにします。 次のような疑問の答えを得るのに役立ちます。

* ユーザーは対象サイトのページから他のサイトにどのように移動しているのか
* ユーザーは対象サイトのページで何をクリックしているのか
* 対象サイト内でユーザーが他のサイトに移動するのが最も多い場所はどこか
* ユーザーが同じ操作を何回も繰り返している場所があるか

ユーザー フロー ツールは、指定した最初のページ ビュー、カスタム イベント、または例外から開始します。 この最初のイベントを前提に、ユーザー フローには、ユーザー セッション中、その前後に発生したイベントが表示されます。 太さが異なる線は、ユーザーが各パスを通過した回数を示します。 特別な **[セッションを開始しました]** ノードには、後続のノードがセッションを開始した場所が表示されます。 **[セッションが終了しました]** ノードには、前のノードの後でページ ビューまたはカスタム イベントを送信しなかったユーザーの数を示し、ユーザーが対象サイトを離れたと思われる場所が表示されます。

> [!NOTE]
> ユーザー フロー ツールを使うには、Application Insights のリソースにページ ビューやカスタム イベントが含まれる必要があります。 [アプリをセットアップし、Application Insights JavaScript SDK を使用してページ ビューを自動的に収集する方法について説明します](./javascript.md)。
>
>

## <a name="start-by-choosing-an-initial-event"></a>最初のイベントを選択して開始する

![ユーザー フローの最初のイベントを選ぶ](./media/usage-flows/initial-event.png)

ユーザー フロー ツールを使って前に示したような疑問への回答を始めるには、まず、表示の起点となる最初のページ ビュー、カスタム イベント、または例外を選びます。

1. **[その後ユーザーがすること]** というタイトルのリンクをクリックするか、 **[編集]** をクリックします。
2. **[初期イベント]** ボックスの一覧から、ページ ビュー、カスタム イベント、または例外を選びます。
3. **[グラフの作成]** をクリックします。

視覚化の [ステップ 1]\(ステップ 1\) 列には、ユーザーが最初のイベントの直後に最も頻繁に行ったことが、上から頻度の高い順に表示されます。 [Step 2]\(ステップ 2\) 以降の列には、それ以降にユーザーが行ったことが表示されて、ユーザーがサイト内を移動したすべての経路が図示されます。

既定では、ユーザー フロー ツールはサイトから過去 24 時間だけのページ ビューとカスタム イベントをランダムにサンプリングします。 [Edit]\(編集\) メニューで、時間範囲を広げたり、ランダム サンプリングのパフォーマンスと精度のバランスを変更したりできます。

ページ ビュー、カスタム イベント、または例外に関係のないものが含まれる場合は、ノードの **[X]** をクリックして非表示にできます。 非表示にするノードを選んだ後は、視覚化の下の **[グラフの作成]** ボタンをクリックします。 非表示にしたノードをすべて確認するには、 **[編集]** ボタンをクリックし、 **[除外されたイベント]** セクションを見ます。

視覚化に表示する必要があるページ ビューまたはカスタム イベントが表示されていない場合は、次のようにします。

* **[編集]** メニューの **[除外されたイベント]** セクションを確認します。
* 頻繁の低いイベントを視覚化に含めるには、 **[その他]** ノードのプラス ボタンを使用します。
* 予想されるページ ビューまたはカスタム イベントがユーザーによってあまり送信されない場合は、 **[編集]** メニューで視覚化の時間範囲を広げてみます。
* 予想されるページ ビュー、カスタム イベント、または例外が、サイトのソース コードで Application Insights SDK によって収集されるように設定されていることを確認します。 [カスタム イベントの収集について詳しくは、こちらをご覧ください。](./api-custom-events-metrics.md)

視覚化の手順をさらに参照する場合は、視覚化の上の **[前のステップ]** と **[次のステップ]** の各ドロップダウン リストを使用します。

## <a name="after-visiting-a-page-or-feature-where-do-users-go-and-what-do-they-click"></a>ページまたは機能にアクセスした後で、ユーザーが移動する先とクリックするもの

![ユーザー フローを使ってユーザーがクリックする場所を理解する](./media/usage-flows/one-step.png)

最初のイベントがページ ビューである場合、視覚化の最初の列 ([Step 1]\(ステップ 1\)) を見ると、ユーザーがページにアクセスした直後に行ったことが簡単にわかります。 ユーザー フローの視覚化の横にあるウィンドウでサイトを開いてみてください。 ユーザーによるページの操作方法の予想と、[Step 1]\(ステップ 1\) 列のイベントの一覧を比較します。 多くの場合、チームにとってはあまり重要でないと思われるページの UI 要素が、ページで最も使われているものに含まれます。 これは、サイトのデザイン改善のよい出発点になる場合があります。

最初のイベントがカスタム イベントの場合、最初の列にはユーザーがそのアクションを実行した直後に行ったことが示されます。 ページ ビューと同様に、観察されたユーザーの行動が、チームの目標や予想と一致するかどうかを検討します。 選んだ最初のイベントが [Added Item to Shopping Cart]\(買い物かごに商品を追加した\) である場合、そのすぐ後に [Go to Checkout]\(会計に進む\) および [Completed Purchase]\(購入を完了した\) が表示されているかどうかを確認します。 ユーザーの行動が予想と異なる場合は、視覚化を使って、サイトの現在のデザインのどこにユーザーの行動が "阻害される" 原因があるかを理解します。

## <a name="where-are-the-places-that-users-churn-most-from-your-site"></a>対象サイト内でユーザーが他のサイトに移動するのが最も多い場所はどこか

視覚化の上位に表示される **[セッションが終了しました]** ノード (特にフローの早い段階) を調べます。 これは、多くのユーザーがそこに至るまでのページ パスと UI 操作の後でサイトから離れた可能性があることを意味します。 予期される離脱もありますが (電子商取引サイトで購入を完了した後など)、通常、サイトからの離脱は、デザイン上の問題、パフォーマンスの悪さ、またはサイトに関するその他の改善可能な問題を示しています。

**[セッションが終了しました]** ノードはその Application Insights リソースによって収集されたテレメトリのみに基づくことに注意してください。 Application Insights が特定のユーザー操作に対するテレメトリを受け取らない場合、ユーザーはユーザー フロー ツールがセッション終了を示した後もまだサイトを操作している可能性があります。

## <a name="are-there-places-where-users-repeat-the-same-action-over-and-over"></a>ユーザーが同じ操作を何回も繰り返している場所があるか

視覚化の後続ステップで多くのユーザーによって繰り返されているページ ビューやカスタム イベントを探します。 これは通常、ユーザーがサイトで反復的なアクションを実行していることを意味します。 繰り返しが見つかった場合は、サイトのデザインの変更または繰り返しを減らす新しい機能の追加を検討します。 たとえば、ユーザーがテーブル要素の行ごとに反復的アクションを実行していることがわかった場合は、一括編集機能を追加します。

## <a name="common-questions"></a>一般的な質問

### <a name="does-the-initial-event-represent-the-first-time-the-event-appears-in-a-session-or-any-time-it-appears-in-a-session"></a>最初のイベントは、そのイベントがセッション内で出現する最初の時を表しますか、それともセッション内の任意の時を表しますか?

視覚化の最初のイベントは、ユーザーがセッションの間にそのページ ビューまたはカスタム イベントを初めて送信した時のみを表します。 ユーザーがセッション内で最初のイベントを何回も送信できる場合、[Step 1]\(ステップ 1\) 列は、最初のイベントのすべてのインスタンスではなく、最初のイベントの "*最初の*" インスタンスの後でユーザーが行ったことだけを示します。

### <a name="some-of-the-nodes-in-my-visualization-are-too-high-level-for-example-a-node-that-just-says-button-clicked-how-can-i-break-it-down-into-more-detailed-nodes"></a>視覚化内のノードには大まかすぎるものがあります。 たとえば、「ボタンがクリックされました」としか表示されていノードがあります。 どのようにすれば詳細なノードに分割できますか。

**[編集]** メニューの **[次で分割]** オプションを使用します。

1. **[イベント]** メニューで、分割するイベントを選択します。
2. **[ディメンション]** メニューでディメンションを選択します。 たとえば、「ボタンがクリックされました」というイベントがある場合は、「ボタン名」というカスタム プロパティを試してください。

## <a name="next-steps"></a>次のステップ

* [利用状況の概要](usage-overview.md)
* [ユーザー、セッション、およびイベント](usage-segmentation.md)
* [保持](usage-retention.md)
* [アプリにカスタム イベントを追加する](./api-custom-events-metrics.md)

