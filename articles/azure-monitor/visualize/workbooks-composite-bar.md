---
title: Azure Monitor ブックの複合棒グラフ レンダラー
description: Azure Monitor ブックのすべての複合棒グラフ レンダラーの視覚化について説明します。
services: azure-monitor
ms.workload: tbd
ms.tgt_pltfrm: ibiza
ms.topic: conceptual
ms.date: 9/04/2020
ms.openlocfilehash: 1b2946d4def2004d9d620eb253c733fdf31c39cf
ms.sourcegitcommit: 147910fb817d93e0e53a36bb8d476207a2dd9e5e
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 10/18/2021
ms.locfileid: "130132533"
---
# <a name="composite-bar-renderer"></a>複合棒グラフ レンダラー

ブックでは、複数の横棒で構成された複合棒グラフを使用して、データを表示できます。

次の画像は、オンライン、オフライン、およ復旧中の状態にあるサーバーの数を表しているデータベース状態の複合棒グラフを示しています。

![データベース状態を示す複合棒グラフのスクリーンショット。](./media/workbooks-composite-bar/database-status.png)

複合棒グラフ レンダラーは、グリッド、タイル、およびグラフの各視覚化に対してサポートされています。

## <a name="adding-composite-bar-renderer"></a>複合棒グラフ レンダラーの追加

1. *[編集]* ツール バー項目を選択して、ブックを編集モードに切り替えます。
2. *[追加]* 、 *[クエリの追加]* の順に選択します。
3. *[データ ソース]* を [JSON] に、 *[視覚化]* を [グリッド] に変更します。
4. 次の JSON データを追加します。

```json
[
    {"sub":"X", "server": "A", "online": 20, "recovering": 3, "offline": 4, "total": 27},
    {"sub":"X", "server": "B", "online": 15, "recovering": 8, "offline": 5, "total": 28},
    {"sub":"Y", "server": "C", "online": 25, "recovering": 4, "offline": 5, "total": 34},
    {"sub":"Y", "server": "D", "online": 18, "recovering": 6, "offline": 9, "total": 33}
]
```

5. クエリを実行します。
6. **[列の設定]** を選択して設定を開きます。
7. *[列]* から [合計] を選択し、 *[列レンダラー]* で [複合棒グラフ] を選択します。
8. *[複合棒グラフの設定]* の下に、以下を設定します。

| 列名 | Color        |
|-------------|--------------|
| オンライン      | [緑]        |
| 回復  | 黄       |
| offline     | 赤 (明るい) |

9. ラベル `["online"] of ["total"] are healthy` を追加します。
10. [オンライン]、[オフライン]、および [回復] の列の設定では、[列レンダラー] を [非表示] に設定できます (省略可能)。
11. 上部にある *[ラベル]* を選択し、合計列のラベルを [Database Status]\(データベースの状態\) に更新します (省略可能)。
12. **[適用]** を選択します。

複合棒グラフの設定は、次のスクリーンショットのようになります。

![前述のように設定された複合棒グラフ列設定のスクリーンショット。](./media/workbooks-composite-bar/composite-bar-settings.png)

上記の設定を使用した複合棒グラフ:

![複合棒グラフのスクリーンショット。](./media/workbooks-composite-bar/composite-bar.png)

## <a name="composite-bar-settings"></a>複合棒グラフの設定

列名と対応する色を選択すると、複合棒グラフの一部として選択した列が選択した色で表示されます。 行の挿入、削除、および上下移動を行うことができます。

### <a name="label"></a>ラベル

複合棒グラフのラベルは、複合棒グラフの上部に表示されます。 静的なテキスト、列、およびパラメーターを組み合わせて使用できます。  [ラベル] が空の場合は、現在の列の値がラベルとして表示されます。 前の例では、[ラベル] フィールドを黒のままにした場合は、合計列の値が表示されます。

列は `["columnName"]` で参照します。

パラメーターは `{paramName}` で参照します。

列名とパラメーター名の両方で、大文字と小文字が区別されます。 [Make this item as a link]\(この項目をリンクにする\) を選択した後、リンク設定を追加することで、ラベルをリンクにすることもできます。

### <a name="aggregation"></a>集約

集計は、ツリー/グループ化の視覚化で役に立ちます。 グループ行の列のデータは、その列の集計セットによって決定されます。 複合棒グラフに適用できる集計には、[なし]、[合計]、および [継承] の 3 種類があります。

グループ化設定を追加するには:

1. 列の設定で、設定を追加する列に移動します。
2. *[Tree/Group By Settings]\(ツリー/グループ化設定\)* の *[ツリーの種類]* で、 **[グループ化]** を選択します。
3. グループ化するフィールドを選択します。

![グループ化設定のスクリーンショット。](./media/workbooks-composite-bar/group-by-settings.png)

#### <a name="none"></a>なし

集計 [なし] は、グループ行のその列の結果を表示しないことを意味します。

![集計に [なし] が設定された複合棒グラフのスクリーンショット。](./media/workbooks-composite-bar/none.png)

#### <a name="sum"></a>SUM

集計が [合計] として設定されている場合、グループ行の列には、それを表示するために使用された列の合計を使用して複合棒グラフが表示されます。 ラベルでも、参照された列の合計が使用されます。

次の例では、[オンライン]、[オフライン]、および [回復] のすべてに max 集計が設定され、合計列の集計は合計になります。

![集計に [合計] が設定された複合棒グラフのスクリーンショット。](./media/workbooks-composite-bar/sum.png)

#### <a name="inherit"></a>継承

集計が [継承] として設定されている場合、グループ行の列には、それを表示するために使用された列に対してユーザーによって設定された集計を使用して複合棒グラフが表示されます。 ラベルで使用される列でも、ユーザーによって設定された集計が使用されます。 現在の列レンダラーが複合棒グラフであり、(上の例の "合計" のように) ラベル内で参照される場合、その列の集計として合計が使用されます。

次の例では、[オンライン]、[オフライン]、および [回復中] のすべてに max 集計が設定され、合計列の集計では [継承] が使用されています。

![集計に [継承] が設定された複合棒グラフのスクリーンショット。](./media/workbooks-composite-bar/inherit.png)

## <a name="sorting"></a>並べ替え

グリッド視覚化では、複合棒グラフ レンダラーが設定された列に対する行の並べ替えは、複合棒グラフの計算を動的に表示するために使用された列の合計値に基づいて動作します。 前の例では、並べ替えに使用される値は、その特定の行の [オンライン]、[回復]、および [オフライン] の各列の合計です。

## <a name="tiles-visualization"></a>タイルの視覚化

1. **[追加]** 、 *[クエリの追加]* の順に選択します。
2. データソースを JSON に変更し、[前の例](#adding-composite-bar-renderer)のデータを入力します。
3. 視覚化を *[タイル]* に変更します。
4. クエリを実行します。
5. **[タイルの設定]** を選択します。
6. [タイル] フィールドで *[左]* を選択します。
7. *[フィールドの設定]* の下に、次の設定を入力します。
    1. 使用する列: [サーバー]。
    2. 列レンダラー: [テキスト]。
8. [タイル] フィールドで *[下部]* を選択します。
9. *[フィールドの設定]* の下に、次の設定を入力します。
    1. 使用する列: [合計]。
    2. 列レンダラー: [複合棒グラフ]。
    3. [複合棒グラフ] の下に、次の設定を入力します。

    | 列名 | Color        |
    |-------------|--------------|
    | オンライン      | [緑]        |
    | 回復  | 黄       |
    | offline     | 赤 (明るい) |

    4. ラベル `["online"] of ["total"] are healthy` を追加します。
10. **[適用]** を選択します。

タイル用の複合棒グラフの設定:

![前述のように設定された複合棒グラフ タイル設定のスクリーンショット。](./media/workbooks-composite-bar/tiles-settings.png)

上記の設定が設定されたタイルでの複合棒グラフの表示は次のようになります。

![複合棒グラフ タイルのスクリーンショット。](./media/workbooks-composite-bar/composite-bar-tiles.png)

## <a name="graphs-visualization"></a>グラフの視覚化

グラフの視覚化 (種類は Hive クラスター) 用の複合棒グラフ レンダラーを作成するには、次の手順に従います。

1. **[追加]** 、 *[クエリの追加]* の順に選択します。
2. データソースを JSON に変更し、[前の例](#adding-composite-bar-renderer)のデータを入力します。
3. 視覚化を "*グラフ*" に変更します。
4. クエリを実行します。
5. **[グラフの設定]** を選択します。
6. [Node Format Settings]\(ノードの形式の設定\) で *[Center Content]\(コンテンツの中央\)* を選択します。
7. *[フィールドの設定]* の下に、次の設定を入力します。
    1. 使用する列: [合計]。
    2. 列レンダラー: [複合棒グラフ]。
    3. *[複合棒グラフの設定]* の下に、以下を入力します。

    |列名  |     Color    |
    |-------------|--------------|
    | オンライン      | [緑]        |
    | 回復  | 黄       |
    | offline     | 赤 (明るい) |

   4. ラベル `["online"] of ["total"] are healthy` を追加します。
9. *[レイアウト設定]* に、次の設定を入力します。
    1. グラフの種類:**Hive クラスター**。
    2. ノード ID: [サーバー] を選択します。
    3. グループ化フィールド: [なし]。
    4. ノード サイズ: 100。
    5. 六角形間の余白:5.
    6. 色分けの種類:**なし**。
1. **[適用]** を選択します。
    
グラフ用の複合棒グラフの設定:

![前述のように設定された複合棒グラフ グラフ設定のスクリーンショット。](./media/workbooks-composite-bar/graphs-settings.png)

上記の設定が設定されたグラフ用の複合棒グラフの表示は次のようになります。

![Hive クラスターを使用した複合棒グラフのスクリーンショット。](./media/workbooks-composite-bar/composite-bar-graphs.png)

## <a name="next-steps"></a>次の手順

* Azure Resource Manager を使用してブックを[デプロイ](../visualize/workbooks-automate.md)します。
* ブック リソースへのアクセスを[制御](./workbooks-access-control.md)し、共有します。