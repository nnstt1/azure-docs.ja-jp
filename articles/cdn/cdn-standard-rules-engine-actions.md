---
title: Azure CDN の Standard ルール エンジンでのアクション | Microsoft Docs
description: Azure Content Delivery Network (Azure CDN) の Standard ルール エンジンでのアクションに関するリファレンス ドキュメント。
services: cdn
author: duongau
ms.service: azure-cdn
ms.topic: article
ms.date: 08/04/2020
ms.author: duau
ms.openlocfilehash: 32c0b0a245f864601110505af0ce81ad4e9b0b0e
ms.sourcegitcommit: 702df701fff4ec6cc39134aa607d023c766adec3
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 11/03/2021
ms.locfileid: "131461382"
---
# <a name="actions-in-the-standard-rules-engine-for-azure-cdn"></a>Azure CDN の Standard ルール エンジンでのアクション

Azure Content Delivery Network (Azure CDN) の [Standard ルール エンジン](cdn-standard-rules-engine.md)では、ルールは、1 つまたは複数の一致条件とアクションから構成されます。 この記事では、Azure CDN の Standard ルール エンジンで利用できるアクションについて詳しく説明します。

ルールの 2 番目の部分は、アクションです。 アクションは、1 つの一致条件または一致条件のセットによって識別される要求の種類に適用される動作を定義します。

## <a name="actions"></a>Actions

次のアクションは、Azure CDN の Standard ルール エンジンで使用できます。 

### <a name="cache-expiration"></a>キャッシュの有効期限

ルールの一致条件で指定された要求のエンドポイントの Time to Live (TTL) の値を上書きするには、このアクションを使用します。

#### <a name="required-fields"></a>必須フィールド

キャッシュの動作 |  説明              
---------------|----------------
キャッシュのバイパス | このオプションが選択され、ルールが一致する場合、コンテンツはキャッシュされません。
オーバーライド | このオプションが選択され、ルールが一致する場合、配信元から返される TTL 値は、アクションで指定された値で上書きされます。 この動作は、応答がキャッシュ可能な場合にのみ適用されます。 cache-control 応答ヘッダーの値が "no-cache"、"private"、"no-store" の場合は、アクションは適用されません。
存在しない場合に設定 | このオプションが選択され、ルールが一致する場合、配信元から TTL 値が返されなかった場合は、アクションで指定された値に TTL が設定されます。 この動作は、応答がキャッシュ可能な場合にのみ適用されます。 cache-control 応答ヘッダーの値が "no-cache"、"private"、"no-store" の場合は、アクションは適用されません。

#### <a name="additional-fields"></a>追加フィールド

日間 | 時間 | 分 | Seconds
-----|-------|---------|--------
int | int | int | int 

### <a name="cache-key-query-string"></a>キャッシュ キーのクエリ文字列

クエリ文字列に基づいてキャッシュ キーを変更するには、このアクションを使用します。

#### <a name="required-fields"></a>必須フィールド

動作 | 説明
---------|------------
包含 | このオプションが選択され、ルールが一致する場合、パラメーターに指定されたクエリ文字列がキャッシュ キーの生成時に含められます。 
一意の URL をすべてキャッシュ | このオプションが選択され、ルールが一致する場合、一意の URL ごとに独自のキャッシュ キーが設定されます。 
Exclude (除外) | このオプションが選択され、ルールが一致する場合、パラメーターに指定されたクエリ文字列はキャッシュ キーの生成時に除外されます。
クエリ文字列を無視 | このオプションが選択され、ルールが一致する場合、クエリ文字列はキャッシュ キーの生成時に考慮されません。 

### <a name="modify-request-header"></a>要求ヘッダーの変更

配信元に送信される要求に含まれるヘッダーを変更するには、このアクションを使用します。

#### <a name="required-fields"></a>必須フィールド

アクション | HTTP ヘッダー名 | 値
-------|------------------|------
Append | このオプションが選択され、ルールが一致する場合、**ヘッダー名** に指定されたヘッダーが、指定された値で要求に追加されます。 ヘッダーが既に存在する場合、値は既存の値に追加されます。 | String
Overwrite | このオプションが選択され、ルールが一致する場合、**ヘッダー名** に指定されたヘッダーが、指定された値で要求に追加されます。 ヘッダーが既に存在する場合、指定された値によって既存の値が上書きされます。 | String
削除 | このオプションが選択され、ルールが一致し、ルールで指定されたヘッダーが存在する場合、ヘッダーは要求から削除されます。 | String

### <a name="modify-response-header"></a>応答ヘッダーの変更

クライアントに返される応答に含まれるヘッダーを変更するには、このアクションを使用します。

#### <a name="required-fields"></a>必須フィールド

アクション | HTTP ヘッダー名 | 値
-------|------------------|------
Append | このオプションが選択され、ルールが一致する場合、**ヘッダー名** に指定されたヘッダーが、指定された **値** を使用して応答に追加されます。 ヘッダーが既に存在する場合、**値** は既存の値に追加されます。 | String
Overwrite | このオプションが選択され、ルールが一致する場合、**ヘッダー名** に指定されたヘッダーが、指定された **値** を使用して応答に追加されます。 ヘッダーが既に存在する場合、**値** によって既存の値が上書きされます。 | String
削除 | このオプションが選択され、ルールが一致し、ルールで指定されたヘッダーが存在する場合、ヘッダーは応答から削除されます。 | String

### <a name="url-redirect"></a>URL リダイレクト

クライアントを新しい URL にリダイレクトするには、このアクションを使用します。 

#### <a name="required-fields"></a>必須フィールド

フィールド | 説明 
------|------------
Type | 要求元に返される応答タイプを選択します:検出 (302)、移動 (301)、一時リダイレクト (307)、および永続的なリダイレクト (308)。
プロトコル | 一致要求、HTTP、HTTPS。
hostname | 要求のリダイレクト先のホスト名を選択します。 受信ホストを保持するには、空のままにします。
パス | リダイレクトで使用するパスを定義します。 受信パスを保持するには、空のままにします。  
クエリ文字列 | リダイレクトで使用されるクエリ文字列を定義します。 受信クエリ文字列を保持するには、空のままにします。 
Fragment | リダイレクトで使用するフラグメントを定義します。 受信フラグメントを保持するには、空のままにします。 

絶対 URL を使用することを強くお勧めします。 相対 URL を使用すると、Azure CDN の URL が無効なパスにリダイレクトされることがあります。 

### <a name="url-rewrite"></a>URL 書き換え

このアクションを使用して、送信元への途上で要求のパスを書き直します。

#### <a name="required-fields"></a>必須フィールド

フィールド | 説明 
------|------------
ソース パターン | 置換する URL パス内のソース パターンを定義します。 現在、ソース パターンではプレフィックスに基づく一致が使用されます。 すべての URL パスを一致させるには、ソース パターン値としてスラッシュ ( **/** ) を使用します。
宛先 | 書き換えに使用する宛先パスを定義します。 宛先のパスは、ソース パターンを上書きします。
一致しないパスを保持する | **[はい]** に設定された場合、ソース パターンの後の残りのパスが新しい宛先パスに追加されます。 

## <a name="next-steps"></a>次のステップ

- [Azure CDN の概要](cdn-overview.md)
- [Standard のルール エンジンのリファレンス](cdn-standard-rules-engine-reference.md)
- [Standard ルール エンジンの一致条件](cdn-standard-rules-engine-match-conditions.md)
- [Standard ルール エンジンを使用して HTTPS を適用する](cdn-standard-rules-engine.md)
