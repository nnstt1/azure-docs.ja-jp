---
title: Azure Virtual Network NAT とは
titlesuffix: Azure Virtual Network
description: Virtual Network NAT の機能、リソース、アーキテクチャ、実装の概要。 Virtual Network NAT の動作のしくみと、クラウドにおける NAT ゲートウェイ リソースの使用方法について説明します。
services: virtual-network
author: asudbring
ms.service: virtual-network
ms.subservice: nat
ms.topic: conceptual
ms.date: 10/20/2021
ms.author: allensu
ms.openlocfilehash: 5e2b9baeef03163e74ad83c97d8e8148d7f6cfaf
ms.sourcegitcommit: 692382974e1ac868a2672b67af2d33e593c91d60
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 10/22/2021
ms.locfileid: "130228320"
---
# <a name="what-is-virtual-network-nat"></a>Virtual Network NAT とは

Virtual Network NAT は、フル マネージドで回復性の高いネットワーク アドレス変換 (NAT) サービスです。 VNet NAT を使用すると、仮想ネットワークのアウトバウンド インターネット接続が簡単になります。 サブネットで構成すると、すべてのアウトバウンド接続に VNet NAT の静的パブリック IP アドレスが使用されます。 

:::image type="content" source="./media/nat-overview/flow-map.png" alt-text="図は、内部サブネットからトラフィックを受信し、それをパブリック IP (PIP) と IP プレフィックスに転送する NAT を示しています。":::

*図:Virtual Network NAT*

## <a name="vnet-nat-benefits"></a>VNet NAT の利点

### <a name="security"></a>セキュリティ
NAT を使うと、個々の VM (または他のコンピューティング リソース) でパブリック IP アドレスが必要なくなり、完全にプライベートな状態を維持できます。 そのようなパブリック IP アドレスを持たないリソースでも、VNet の外部にあるソースに引き続き到達できます。 また、パブリック IP プレフィックスを関連付けて、IP の連続するセットがアウトバウンドに使用されるようにすることもできます。 その場合、この予測可能な IP リストに基づいて、宛先ファイアウォール規則を構成できます。

### <a name="resiliency"></a>回復性 
NAT は、フル マネージドの分散サービスです。 VM や 1 つの物理ゲートウェイ デバイスのような、個別のコンピューティング インスタンスには依存しません。 ソフトウェアによるネットワークを利用しており、高い回復性が実現されます。 

### <a name="scalability"></a>スケーラビリティ
NAT は、サブネットに関連付けることができ、そのサブネット内のすべてのコンピューティング リソースで使用できます。 さらに、VNet 内のすべてのサブネットで同じリソースを利用できます。 パブリック IP プレフィックスに関連付けられている場合は、アウトバウンドに必要な数の IP アドレスに自動的にスケーリングされます。

### <a name="performance"></a>[パフォーマンス]
NAT は、ソフトウェアによるネットワーク サービスなので、コンピューティング リソースのネットワーク帯域幅に影響を与えません。 [NAT ゲートウェイのパフォーマンス](nat-gateway-resource.md#performance)の詳細をご確認ください。


## <a name="vnet-nat-basics"></a>VNet NAT の基本

NAT は、特定の可用性ゾーンに作成することができ、指定したゾーンに組み込まれた冗長性を利用します。 既定では、NAT はゾーン対応ではありません。 [可用性ゾーン](../../availability-zones/az-overview.md)のシナリオを作成するときに、特定のゾーンに NAT を分離することができます。 これはゾーン デプロイと呼ばれます。

NAT は最初からスケールアウトに完全対応しています。 システムの増強 (スケールアウト) 操作は必要ありません。  NAT の操作は、Azure がお客様に代わって管理します。  NAT は常に複数の障害ドメインを有しているため、サービスの停止を招くことなく複数の障害に耐えることができます。

* NAT では、アウトバウンド接続をサブネットごとに定義できます。  同じ仮想ネットワーク内にある複数のサブネットに対し、それぞれ異なる NAT を割り当てることができます。 サブネットの構成は、使用する NAT ゲートウェイ リソースを指定することで行います。  サブネットのすべてのアウトバウンド トラフィックは NAT によって自動的に処理され、ユーザーによる構成は不要です。  ユーザー定義ルートは必要ありません。 NAT は他のアウトバウンド シナリオよりも優先され、サブネットの既定のインターネット宛先に取って代わります。
* NAT でサポートされるのは、TCP と UDP プロトコルのみです。 ICMP はサポートされていません。
* NAT ゲートウェイのリソースでは、次のものを使用できます。

  * パブリック IP
  * パブリック IP プレフィックス
* NAT は、Standard SKU のパブリック IP アドレスとパブリック IP プレフィックスのどちらか、またはその両方を組み合わせたものと互換性があります。 パブリック IP プレフィックスを直接使用できるほか、複数の NAT ゲートウェイ リソースにプレフィックスのパブリック IP アドレスを割り振ることもできます。 すべてのトラフィックは、NAT によって、プレフィックスの IP アドレス範囲に調整されます。 Basic Load Balancer や Basic パブリック IP などの Basic リソースは、NAT と互換性がありません。  Basic リソースは、NAT Gateway に関連付けられていないサブネットに配置する必要があります。
* NAT を、IPv6 パブリック IP アドレスまたは IPv6 パブリック IP プレフィックスに関連付けることはできません。 ただし、デュアル スタック サブネットに関連付けることはできます。
* NAT を使用すると、仮想ネットワークから VNet の外部にあるサービスへのフローを作成することができます。 インターネットからの戻りトラフィックは、アクティブなフローへの応答でのみ許可されます。 VNet の外部にあるサービスで、インスタンスへの接続を開始することはできません。
* NAT を複数の仮想ネットワークにまたがって使用することはできません。
* [ゲートウェイ サブネット](../../vpn-gateway/vpn-gateway-about-vpn-gateway-settings.md#gwsub)に NAT をデプロイすることはできません
* 存在しない TCP 接続で通信を試みる場合は、NAT のプライベート側 (仮想マシン インスタンスまたは他のコンピューティング リソース) が、TCP リセット パケットを送信します。 たとえば、接続がアイドル タイムアウトに達した場合が該当します。 次に受信したパケットによって、プライベート IP アドレスには TCP リセットが返され、これによって接続の終了が伝えられて、接続は強制的に終了されます。 NAT のパブリック側からは、TCP リセット パケットなどのトラフィックは一切生成されません。  出力されるのは、お客様の仮想ネットワークによって生成されたトラフィックだけです。
* 4 分という TCP アイドル タイムアウトの既定値が使用されます。これは最大 120 分にまで増やすことができます。 また、アイドル タイマーは、フロー上の任意のアクティビティ (TCP キープアライブを含む) でリセットすることもできます。

## <a name="pricing-and-sla"></a>料金と SLA

料金の詳細については、[Virtual Network の価格](https://azure.microsoft.com/pricing/details/virtual-network)に関する記事を参照してください。 NAT データ パスは 99.9% 以上使用可能です。

## <a name="next-steps"></a>次のステップ

* [Azure NAT ゲートウェイを使用してよりよいアウトバウンド接続を実現する方法](https://www.youtube.com/watch?v=2Ng_uM0ZaB4)について説明します。
* [NAT ゲートウェイ リソース](./nat-gateway-resource.md)について学習する。
* [NAT ゲートウェイ メトリック](./nat-metrics.md)の詳細を確認してください。
