---
title: Azure Marketplace での仮想マシン オファーに対するプランの作成
description: Azure Marketplace での仮想マシン オファーに対するプランを作成します。
ms.service: marketplace
ms.subservice: partnercenter-marketplace-publisher
ms.topic: how-to
author: iqshahmicrosoft
ms.author: iqshah
ms.date: 11/10/2021
ms.openlocfilehash: b08fbe21776ac2e0e85f00850d13581da3f8beb8
ms.sourcegitcommit: 0415f4d064530e0d7799fe295f1d8dc003f17202
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 11/17/2021
ms.locfileid: "132725462"
---
# <a name="create-plans-for-a-virtual-machine-offer"></a>仮想マシン オファーに対するプランを作成する

**[プランの概要]** ページ (パートナー センターの左側のナビゲーション メニューから選択) では、同じオファー内にさまざまなプラン オプションを指定できます。 オファーには少なくとも 1 つのプラン (以前は SKU と呼ばれていました) が必要です。これは、収益化対象ユーザー、Azure リージョン、機能、または VM イメージごとに変えることができます。

オファーごとに最大 100 のプランを作成できます。そのうち最大 45 をプライベートにすることができます。 プライベート プランの詳細については、「[Microsoft 商業マーケットプレースでのプライベート オファー](private-offers.md)」を参照してください。

プランの作成後、 **[プランの概要]** タブを選択して以下を表示します。

- プラン名
- ライセンス モデル
- 対象ユーザー (パブリックまたはプライベート)
- 現在の発行状態
- 使用可能なアクション

このウィンドウで使用可能なアクションは、プランの現在の状態によって異なります。

- プランの状態がドラフトの場合は、 **[ドラフトの削除]** を選択します。
- プランの状態がライブで公開されている場合は、 **[Deprecate plan]\(プランの廃止\)** または **[Sync private audience]\(プライベート対象ユーザーの同期)** を選択します。

## <a name="create-a-new-plan"></a>新しいプランを作成する

上部の **[+ 新しいプランの作成]** を選択します。

**[新しいプラン]** ダイアログ ボックスで、このオファー内のプランごとに一意の **プラン ID** を入力します。 この ID は、製品の Web アドレスで顧客に表示されます。 小文字、数字、ダッシュ、アンダースコアのみを使用し、最大文字数は 50 です。

> [!NOTE]
> **[作成]** を選択した後で、プラン ID を変更することはできません。

**プラン名** を入力してください この名前は、顧客がオファー内のどのプランを選択するかを決めるときに表示されます。 プラン間の違いがはっきりわかる一意の名前を作成してください。 たとえば、**Windows Server** は、"*従量課金制*"、*BYOL*、"*高度*"、"*エンタープライズ*" などのプランで入力できます。

**［作成］** を選択します これにより、 **[プランのセットアップ]** ページが開きます。

## <a name="plan-setup"></a>プランのセットアップ

プランの種類に対する高レベルの構成を設定し、別のプランの技術的構成を再利用するかどうかを指定し、プランを使用可能にする必要のある Azure リージョンを特定します。 ここでの選択により、同じプランの他のペインに表示されるフィールドが決まります。

### <a name="azure-regions"></a>Azure Azure リージョン

プランは、少なくとも 1 つの Azure リージョンで利用できる必要があります。

商業マーケットプレースが統合されているすべての Azure グローバル リージョンの顧客がプランを使用できるようにするには、 **[Azure Global]\(Azure グローバル\)** を選択します。 詳細については、[利用可能な地域と通貨サポート](marketplace-geo-availability-currencies.md)に関するページを参照してください。

[Azure Government](../azure-government/documentation-government-welcome.md) リージョンでプランを使用できるようにするには、 **[Azure Government]** を選択します。 このリージョンでは、アメリカ合衆国の連邦政府顧客、州政府顧客、地方自治体顧客、部族政府顧客と、そのような顧客にサービスを提供する資格があるパートナーに、制御されたアクセスを提供します。 発行元は、コンプライアンス管理、セキュリティ対策、ベスト プラクティスについて責任を持ちます。 Azure Government では、物理的に離れた場所にあるデータセンターとネットワークが使用されます (場所は米国のみ)。

特定のエンドポイントが異なる可能性があるため、[Azure Government](../azure-government/documentation-government-manage-marketplace-partners.md) に発行する前に、環境内でプランをテストおよび検証します。 プランを設定してテストするには、[Microsoft Azure Government 試用版](https://azure.microsoft.com/global-infrastructure/government/request/)のページから試用版アカウントの申請を行います。

> [!NOTE]
> プランが発行され、特定の Azure リージョンで利用できるようになったら、そのリージョンは削除できません。

### <a name="azure-government-certifications"></a>Azure Government の認定資格

このオプションは、前のセクションで Azure リージョンとして **[Azure Government]** を選択した場合にのみ表示されます。

Azure Government サービスでは、特定の政府の規制および要件の対象となるデータが処理されます。 FedRAMP、NIST 800.171 (DIB)、ITAR、IRS 1075、DoD L4、CJIS などです。 これらのプログラムの認定資格を認識させるため、認定資格について説明するリンクを 100 個まで提供することができます。 これらでは、プログラムでの一覧に直接リンクすることも、独自の Web サイトでのそれらについてのコンプライアンスに関する説明にリンクすることもできます。 これらのリンクは、Azure Government の顧客にのみ表示されます。

左側のナビゲーション プラン メニューの次のタブである **[プランのリスト登録]** に進む前に、 **[下書きの保存]** を選択してください。

## <a name="plan-listing"></a>プランのリスト登録

プランの一覧の詳細を構成します。 このペインには、場合によっては同じオファーの他のプランと異なる、固有の情報が表示されます。

### <a name="plan-name"></a>プラン名

このフィールドには、プランの作成時に付けた名前が自動入力されます。 この名前は、Azure Marketplace 上でこのプランのタイトルとして表示されます。 上限は 100 文字です。

### <a name="plan-summary"></a>プラン概要

オファーではなくプランについて簡単にまとめた説明です。 この概要は、100 文字までに制限されています。

### <a name="plan-description"></a>プラン説明

このソフトウェア プラン独特の要素や、オファーに含まれている他のプランとの違いを説明します。 オファーではなく、プランについてのみ説明してください。 プランの説明は、最大 2,000 文字まで許されます。

左側のナビゲーション プラン メニューの次のタブである **[価格と可用性]** に進む前に、 **[下書きの保存]** を選択してください。

## <a name="pricing-and-availability"></a>価格と可用性

このペインでは、以下を構成します。

- このプランが提供される市場。 すべてのプランは、少なくとも 1 つの[市場](marketplace-geo-availability-currencies.md)で利用できる必要があります。
- 1 時間あたりの価格。
- プランをすべてのユーザーに表示するか、それとも特定の顧客 (プライベート対象ユーザー) だけに表示するか。

### <a name="markets"></a>市場

すべてのプランは、少なくとも 1 つの市場で利用できる必要があります。 既定では、ほとんどの市場が選択されています。 一覧を編集するには、 **[市場の編集]** を選択し、このプランを購入できるように (またはできないように) する必要がある市場の場所ごとにチェックボックスをオンまたはオフにします。 選択された市場のユーザーは、[[プランのセットアップ]](#plan-setup) セクションで選択されているすべての Azure リージョンにオファーを引き続きデプロイできます。

Microsoft がパートナーに代わって消費税および使用税を送金する国、リージョンのみを選択するには、 **[Select only Microsoft Tax Remitted]\(Microsoft 税送金のみを選択する\)** を選択します。 中国への発行は、"*無料*" または "*ライセンス持ち込み*" (BYOL) のプランに限定されます。

米国ドル (USD) の通貨でプランの価格を既に設定していて、別の市場の場所を追加する場合、新しい市場の価格は現時点の為替レートに従って計算されます。 常に、各市場の価格を発行前に確認します。 変更を保存した後に **[Export prices (xlsx)]\(価格のエクスポート (xlsx)\)** を選択して、価格を確認します。

市場を削除すると、アクティブなデプロイを使用しているその市場の顧客は、新しいデプロイを作成したり、既存のデプロイをスケールアップしたりすることができなくなります。 既存のデプロイは影響を受けません。

**[保存]** を選択して続行します。

### <a name="pricing"></a>価格

**[License model]\(ライセンス モデル\)** の場合は、 **[使用量ベースの月次請求プラン]** を選択して、このプランの価格を構成するか、または **[ライセンス持ち込み]** を選択して、顧客が既存のライセンスでこのプランを使用できるようにします。

使用量ベースの月次請求プランについては、次の 3 つの価格設定オプションのいずれかを使用します。

- **コアあたり** – コアあたりの価格を米国ドルで提示します。 Microsoft によってコア サイズあたりの価格が計算され、現在の為替レートを使用して現地通貨に変換されます。
- **[コア サイズあたり]** – コア サイズあたりの価格を USD で指定します。 Microsoft によって価格が計算され、現在の為替レートを使用して現地通貨に変換されます。
- **[Per market and core size]\(市場とコア サイズあたり\)** – すべての市場についてコア サイズあたりの価格を指定します。 価格はスプレッドシートからインポートできます。

**コアあたりの価格** を入力して、 **[コア サイズあたりの価格]** を選択すると、価格、時間の計算結果のテーブルが表示されます。

> [!NOTE]
> 価格データのエクスポートを有効にするには、価格設定の変更を保存します。 プランの市場の価格は、発行した後では変更できません。 発行前に価格が正しいことを確かめるために、価格スプレッドシートをエクスポートして各市場の価格を確認してください。

### <a name="free-trial"></a>無料試用版

1 か月、3 か月または 6 か月の "**無料試用版**" を顧客に提供できます。

### <a name="plan-visibility"></a>プランの可視性

各プランは、すべての対象ユーザー、または事前に選択した対象ユーザーのみに表示されるように設計できます。 Azure テナント ID、サブスクリプション ID、または両方を使用して、この限定対象ユーザーにメンバーシップを割り当てます。

**パブリック**: すべての対象ユーザーがプランを見ることができます。

**プライベート**: 事前に選択した対象ユーザーだけが、プランを見ることができます。 プライベート プランとして発行した後で、対象ユーザーを更新したり、パブリックに変更したりできます。 プランは公開すると、パブリックから変更できません。 プライベート プランに戻すことはできません。

"*Azure テナント ID*"、"*サブスクリプション ID*"、または両方を使用して、このプライベート プランにアクセスできる対象ユーザーを割り当てます。 必要に応じて、割り当てる各 Azure テナント ID またはサブスクリプション ID の **説明** を含めます。 最大 10 のサブスクリプション ID とテナント ID を手動で追加するか、10 を超える ID が必要な場合は CSV スプレッドシートをインポートします。

> [!NOTE]
> プライベートまたは制限付きの対象ユーザーは、 **[プレビュー]** ペインで定義したプレビュー対象ユーザーとは異なります。 プレビュー対象ユーザーは、Azure Marketplace に一般公開される "*前に*"、オファーにアクセスすることができます。 プライベート対象ユーザーの選択は特定のプランにのみ適用されますが、プレビュー対象ユーザーは、検証のためにプライベートとパブリックのプランをすべて表示できます。

プライベートオファーは、クラウド ソリューション プロバイダー プログラム (CSP) のリセラーを通じて確立された Azure サブスクリプションではサポートされていません。

### <a name="hide-plan"></a>プランの非表示

別のソリューション テンプレートまたはマネージド アプリケーションによって参照されることにより間接的にのみ使用されることを意図されている仮想マシンの場合、仮想マシンを発行しても、顧客がそれを直接検索したり参照したりできないようにするには、このチェック ボックスをオンにします。

すべての Azure のお客様は、PowerShell または CLI を使用してオファーをデプロイできます。  限定された一連の顧客がこのオファーを利用できるようにする場合は、プランを **[プライベート]** に設定します。

非表示のプランでは、プレビュー リンクは生成されません。 ただし、[こちらの手順に従って](azure-vm-create-faq.yml#how-do-i-test-a-hidden-preview-image-)それらをテストすることはできます。

左側のナビゲーション プラン メニューの次のタブである **[技術的な構成]** に進む前に、 **[下書きの保存]** を選択してください。

## <a name="technical-configuration"></a>技術的な構成

この計画に関連付けられているイメージとその他の技術プロパティを指定します。

### <a name="reuse-technical-configuration"></a>技術的構成を再利用する

このオプションを使用すると、同じオファー内の複数のプランで同じ技術的な構成設定を使用できるため、同じイメージセットを活用することができます。 _技術的な構成を再利用する_ オプションを有効にすると、選択した基本プランと同じ技術的な構成設定がお客様のプランに継承されます。  基本プランを変更すると、その構成を再利用しているプランにも変更が反映されます。

別のプランから技術的な構成設定を再利用する一般的な理由としては、次のようなものがあります。

1. "*従量課金制*" と *BYOL* の両方で同じイメージが利用できるため。
2. パブリック プランで使用している技術的な構成を、価格の異なるプライベート プランで再利用するため。 
3. ソリューションの動作は、ユーザーデプロイするプランによって異なるため。 たとえば、ソフトウェアが同じでも、機能はプランによって異なります。

[Azure Instance Metadata Service](../virtual-machines/windows/instance-metadata-service.md) (IMDS) を利用して、ソリューションがどのプランにデプロイされているかを特定し、ライセンスを検証したり、適切な機能を有効にしたりします。

後日、プラン間で異なる変更を公開することになった場合は、これを切り離すことができます。 プランでこのオプションを選択解除すると、技術的な構成を再利用してプランを切り離すことができます。 一度切り離すと、プランは最後に設定した場所の技術的な構成の設定を引き継ぐため、プランの構成が分岐する可能性があります。 過去に独立して公開したプランで、技術的な構成を後から再利用することはできません。

### <a name="operating-system"></a>オペレーティング システム

**[Windows]** または **[Linux]** のオペレーティング システム ファミリを選択します。

Windows **リリース** または Linux **ベンダー** を選択します。

オペレーティング システムの **OS フレンドリ名** を入力します。 この名前は顧客に表示されます。

### <a name="recommended-vm-sizes"></a>推奨される VM サイズ

Azure Marketplace で表示する、最大 6 個の推奨される仮想マシン サイズを選択するためのリンクを選択します。

### <a name="open-ports"></a>ポートを開く

デプロイされた仮想マシンで、パブリックまたはプライベート ポートを開きます。

### <a name="properties"></a>Properties

VM に対して選択できるプロパティの一覧を次に示します。

- **Supports backup (バックアップをサポート)** : お使いのイメージで Azure VM バックアップがサポートされている場合は、このプロパティを有効にします。 [Azure VM バックアップ](../backup/backup-azure-vms-introduction.md)についてご確認ください。

- **Supports accelerated networking (高速ネットワークをサポート)** : このプランの VM イメージで VM へのシングル ルート I/O 仮想化 (SR-IOV) がサポートされている場合は、このプロパティを有効にします。これにより、ネットワーク インターフェイスでの低遅延と高スループットが実現します。 [高速ネットワーク](https://go.microsoft.com/fwlink/?linkid=2124513)についてご確認ください。

- **Supports cloud-init configuration (cloud-init 構成をサポート)** : このプランのイメージで cloud-init デプロイ後スクリプトがサポートされている場合は、このプロパティを有効にします。 [cloud-init 構成](../virtual-machines/linux/using-cloud-init.md)についてご確認ください。

- **Supports hotpatch (ホットパッチをサポート)** : Windows Server Azure Edition はホットパッチをサポートしています。 [ホットパッチ](../automanage/automanage-hotpatch.md)についてご確認ください。

- **Supports extensions (拡張機能をサポート)** : このプランのイメージで拡張機能がサポートされている場合は、このプロパティを有効にします。 拡張機能は、Azure VM でのデプロイ後の構成と自動化を提供する小さなアプリケーションです。 [Azure 仮想マシン拡張機能](./azure-vm-certification-faq.yml#vm-extensions)についてご確認ください。

- **Is a network virtual appliance (ネットワーク仮想アプライアンスです)** : この製品がネットワーク仮想アプライアンスの場合は、このプロパティを有効にします。 ネットワーク仮想アプライアンスは、ロード バランサー、VPN ゲートウェイ、ファイアウォール、アプリケーション ゲートウェイなど、1 つまたは複数のネットワーク機能を実行する製品です。 [ネットワーク仮想アプライアンス](https://go.microsoft.com/fwlink/?linkid=2155373)についてご確認ください。

- **Remote desktop or SSH disabled (リモート デスクトップまたは SSH を無効)** : これらのイメージを使用してデプロイされた仮想マシンが、顧客にリモート デスクトップまたは SSH を使用したアクセスを許可しない場合は、このプロパティを有効にします。 [ロックされた VM イメージ](./azure-vm-certification-faq.yml#locked-down-or-ssh-disabled-offer)についてご確認ください。

- **Requires custom ARM template for deployment (デプロイにはカスタム ARM テンプレートが必要)** : このプラン内のイメージが、カスタム ARM テンプレートを使用してのみデプロイできる場合は、このプロパティを有効にします。 詳細については、[「仮想マシンの認定に関するトラブルシューティング」の「カスタム テンプレート」セクション](./azure-vm-certification-faq.yml#custom-templates)を参照してください。

### <a name="generations"></a>ジェネレーション

仮想マシンの生成では、それによって使用される仮想ハードウェアが定義されます。 顧客のニーズに基づいて、第 1 世代 VM、第 2 世代 VM、またはその両方を発行できます。

1. 新しいオファーを作成するときに、 **[Generation type]\(世代\)** を選択し、要求された詳細を入力します。

    :::image type="content" source="./media/create-vm/azure-vm-generations-image-details-1.png" alt-text="パートナー センターの [Generation]\(世代\) の詳細セクションのビュー。":::

2. プランに別の世代を追加するには、 **[Add generation]\(世代の追加\)** を選択します。

    :::image type="content" source="./media/create-vm/azure-vm-generations-add.png" alt-text="[Add generation]\(世代の追加\) リンクのビュー。":::

    ...そして、次のように要求された詳細を入力します。

    :::image type="content" source="./media/create-vm/azure-vm-generations-image-details-3.png" alt-text="[世代の詳細] ウィンドウの表示。":::

<!--    The **Generation ID** you choose will be visible to customers in places such as product URLs and ARM templates (if applicable). Use only lowercase, alphanumeric characters, dashes, or underscores; it cannot be modified once published.
-->
3. 第 1 世代が既に発行されている既存の VM を更新するには、この **[技術的な構成]** ページで詳細を編集します。

第 1 世代と第 2 世代の機能の違いの詳細については、「[Azure での第 2 世代 VM のサポート](../virtual-machines/generation-2.md)」を参照してください。

> [!NOTE]
> お客様が引き続き利用できるようにするには、発行される世代に少なくとも 1 つのイメージ バージョンが必要です。 プラン全体を (すべての世代およびイメージと共に) 削除するには、 **[プランの概要]** ページで **[Deprecate plan]\(プランの廃止\)** を選択します (この記事の最初のセクションを参照してください)。

### <a name="vm-images"></a>VM イメージ

仮想マシン イメージのディスク バージョンと Shared Access Signature (SAS) URI を指定します。 VM イメージごとに最大 16 個のデータ ディスクを追加します。 指定の送信では、プランごとに新しいイメージ バージョンを 1 つだけ指定します。 イメージは、発行した後に編集することはできませんが、削除することはできます。 バージョンを削除すると、新規と既存、両方のユーザーが、削除されたバージョンの新しいインスタンスをデプロイできなくなります。

次の 2 つの必須フィールドは、上の図に示されています。

- **ディスクのバージョン**: 提供するイメージのバージョンです。
- **OS VHD link\(OS VHD リンク\)** : Azure Compute Gallery (以前の Shared Image Gallery) に格納されているイメージです。 [Azure Compute Gallery](azure-vm-create-using-approved-base.md#capture-image) にイメージをキャプチャする方法をご確認ください。

データ ディスク ( **[データ ディスクの追加 (最大 16)]** を選択) は、その Azure ストレージ アカウントに格納される VHD Shared Access Signature URI でもあります。 プランでの送信ごとに、イメージを 1 つだけ追加します。

使用するオペレーティング システムに関係なく、ソリューションに必要な最小数のデータ ディスクのみを追加します。 顧客はデプロイ時にイメージの一部であるディスクを削除することはできませんが、デプロイ中またはデプロイ後にいつでもディスクを追加できます。

> [!NOTE]
> SAS を使用してイメージを提供し、データ ディスクがある場合は、SAS URI として提供する必要があります。 共有イメージを使用している場合は、Azure Compute Gallery にご自分のイメージの一部としてキャプチャされます。 オファーが Azure Marketplace に公開されると、そのイメージはお使いの Azure ストレージまたは Azure Compute Gallery から削除できます。

**[下書きの保存]** を選択してから、作成したばかりのプランの左上にある **[← プランの概要]** を選択します。

VM イメージが発行されたら、Azure ストレージからイメージを削除できます。

## <a name="next-steps"></a>次のステップ

- [CSP を通して再販する](azure-vm-resell-csp.md)
