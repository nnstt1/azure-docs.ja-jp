---
title: インジケーター値への変換
titleSuffix: Azure Machine Learning
description: Azure Machine Learning デザイナーで Convert to Indicator Values (インジケーター値への変換) コンポーネントを使用して、カテゴリ列を一連のバイナリ インジケーター列に変換する方法について説明します。
services: machine-learning
ms.service: machine-learning
ms.subservice: core
ms.topic: reference
author: likebupt
ms.author: keli19
ms.date: 02/11/2020
ms.openlocfilehash: c99944a21e648dcd9cecfc96489a58f776395ff4
ms.sourcegitcommit: e41827d894a4aa12cbff62c51393dfc236297e10
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 11/04/2021
ms.locfileid: "131565642"
---
# <a name="convert-to-indicator-values"></a>インジケーター値への変換
この記事では、Azure Machine Learning デザイナーのコンポーネントについて説明します。

Azure Machine Learning で **[Convert to Indicator Values]\(インジケーター値への変換\)** コンポーネントを使用して、カテゴリの値を含む列を、一連のバイナリ インジケーター列に変換する方法について説明します。  

このコンポーネントでは、インジケーター値への変換に使用される変換の定義も出力されます。 [[Apply Transformation]\(変換の適用\)](apply-transformation.md) コンポーネントを使用することで、同じスキーマを持つ他のデータセットに対してこの変換を再利用できます。

## <a name="how-to-configure-convert-to-indicator-values"></a>インジケーター値への変換を構成する方法

1.  **インジケーター値への変換** を見つけてパイプライン ドラフトにドラッグします。 このコンポーネントは **[Data Transformation]\(データの変換\)** カテゴリ内にあります。
    > [!NOTE]
    > **[Convert to Indiciator Values]\(インジケーター値への変換\)** コンポーネントの前に [[Edit Metadata]\(メタデータの編集\)](edit-metadata.md) コンポーネントを使用することで、ターゲット列をカテゴリとしてマーク付けすることができます。

1. **[Convert to Indicator Values]\(インジケーター値への変換\)** コンポーネントを、変換する列が含まれるデータセットに接続します。 

1. **[列の編集]** を使用して、カテゴリ列を 1 つまたは複数選択します。

1. 新しいブール値の列 **のみ** を出力する場合は、 **[カテゴリ列を上書き]** オプションを選択します。 既定では、このオプションはオフになっています。
    

    > [!TIP]
    >  上書きするオプションを選択した場合、ソース列が実際に削除または変更されるわけではありません。 代わりに、新しい列が生成され、出力データセットに表示されます。ソース列は引き続きワークスペースで使用できます。 元のデータを参照する必要がある場合は、いつでも [[Add Columns]\(列の追加\)](add-columns.md) コンポーネントを使用して、ソース列を元に戻すことができます。

1. パイプラインを送信します。

## <a name="results"></a>結果

サーバーが失敗する確率が高、中、低のどれであるかを示すスコアを格納した列があるとします。  

| サーバー ID | 失敗スコア |
| --------- | ------------- |
| 10301     | 低           |
| 10302     | Medium        |
| 10303     | 高          |

**インジケーター値に変換** を適用すると、デザイナーによって、ラベルの 1 つの列が、ブール値を格納した複数の列に変換されます。  

| サーバー ID | 失敗スコア - 低 | 失敗スコア - 中 | 失敗スコア - 高 |
| --------- | ------------------- | ---------------------- | -------------------- |
| 10301     | 1                   | 0                      | 0                    |
| 10302     | 0                   | 1                      | 0                    |
| 10303     | 0                   | 0                      | 1                    |

変換がどのように機能するかを次に示します。  

-   リスクについて記述する **失敗スコア** の列には、3 つの可能な値 (高、中、低) のみがあり、欠損値はありません。 そのため、新しい列がちょうど 3 つ作成されます。  

-   新しいインジケーター列には、ソース列の列見出しと値に基づいて、 *\<source column>- \<data value>* というパターンを使用して名前が付けられます。  

-   1 つのインジケーター列にのみ 1 が格納されている必要があります。また、各サーバーに設定できるリスク評価は 1 つだけのため、他のすべてのインジケーター列には 0 が格納されている必要があります。  

これで、3 つのインジケーター列を機械学習モデルの機能として使用できるようになりました。

このコンポーネントは、次の 2 つの出力を返します。

- **Results dataset (結果のデータセット)** :変換されたインジケーター値の列を含むデータセット。 消去の選択がされていない列も "渡されます"。
- **インジケーター値への変換**:インジケーター値への変換に使用されるデータ変換で、それをワークスペースに保存して、後で新しいデータに適用することができます。

## <a name="apply-a-saved-indicator-values-operation-to-new-data"></a>保存されたインジケーター値の操作を新しいデータに適用する

インジケーター値の操作を頻繁に繰り返す必要がある場合は、データ操作手順を *変換* として保存し、それを同じデータセットで再利用することができます。 これは、同じスキーマを持つデータを頻繁に再インポートし、その後クリーンアップする必要がある場合に便利です。

1. [[Apply Transformation]\(変換の適用\)](apply-transformation.md) コンポーネントをパイプラインに追加します。

1. 消去するデータセットを追加し、データセットを右側の入力ポートに接続します。

1. デザイナーの左側ペインで **[データの変換]** グループを展開します。 保存した変換を見つけ、それをパイプラインにドラッグします。

1. 保存した変換を [Apply Transformation (変換の適用)](apply-transformation.md) の左側の入力ポートに接続します。

   保存した変換を適用するときに、どの列を変換するかを選択することはできません。 これは、変換が定義されていて、元の操作で指定されたデータ型に自動的に適用されるからです。

1. パイプラインを送信します。
 
## <a name="technical-notes"></a>テクニカル ノート  

このセクションには、実装の詳細、ヒント、よく寄せられる質問への回答が含まれています。

### <a name="usage-tips"></a>使用上のヒント

-   カテゴリとマーク付けされている列のみをインジケーター列に変換できます。 次のエラーが表示される場合は、選択した列のいずれかがカテゴリではない可能性があります。  

     Error 0056 (エラー 0056):\<column name> という名前の列は、許可されたカテゴリに含まれていません。  

     既定では、ほとんどの文字列型の列は文字列機能として処理されるため、[メタデータの編集](edit-metadata.md)を使用して、それらをカテゴリとして明示的にマーク付けする必要があります。  

-   インジケーター列に変換できる列数に制限はありません。 ただし、値の各列にインジケーター列が複数生成される可能性があるため、一度にいくつかの列だけを変換して確認することができます。  

-   列に欠損値が含まれている場合は、 *\<source column>- Missing* という名前で、欠損カテゴリに対して個別のインジケーター列が作成されます。  

-   インジケーター値に変換する列に数値が含まれている場合、他の機能列と同様にカテゴリとしてマーク付けされている必要があります。 それを行った後、数値は不連続値として扱われます。 たとえば、範囲が 25 ～ 30 の MPG 値を持つ数値列がある場合、不連続値ごとに新しいインジケーター列が作成されます。  

    | Make       | 高速道路燃費 (マイル/ガロン) -25 | 高速道路燃費 (マイル/ガロン) -26 | 高速道路燃費 (マイル/ガロン) -27 | 高速道路燃費 (マイル/ガロン) -28 | 高速道路燃費 (マイル/ガロン) -29 | 高速道路燃費 (マイル/ガロン) -30 |
    | ---------- | --------------- | --------------- | --------------- | --------------- | --------------- | --------------- |
    | Contoso 社の車 | 0               | 0               | 0               | 0               | 0               | 1               |

- データセットに追加されるディメンション数が多くなりすぎないようにするには: まず、列内の値の数を調べて、データを適切に値域ごとにまとめるか、量子化することを推奨します。  


## <a name="next-steps"></a>次のステップ

Azure Machine Learning で[使用できる一連のコンポーネント](component-reference.md)を参照してください。 
