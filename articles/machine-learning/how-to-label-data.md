---
title: 画像とテキスト ドキュメントにラベルを付ける
title.suffix: Azure Machine Learning
description: データのラベル付けプロジェクトで、データのラベル付けツールを使用して、テキストまたは画像に Machine Learning 用のラベルをすばやく付けます。
author: sdgilley
ms.author: sgilley
ms.service: machine-learning
ms.subservice: mldata
ms.topic: how-to
ms.date: 10/21/2021
ms.custom: ignite-fall-2021
ms.openlocfilehash: a811c63e29800fa7f79d620f358e06939168ce4c
ms.sourcegitcommit: e41827d894a4aa12cbff62c51393dfc236297e10
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 11/04/2021
ms.locfileid: "131563038"
---
# <a name="labeling-images-and-text-documents"></a>画像とテキスト ドキュメントにラベルを付ける

プロジェクト管理者が Azure Machine Learning で[画像データのラベル付けプロジェクト](./how-to-create-image-labeling-projects.md)または[テキスト データのラベル付けプロジェクト](./how-to-create-text-labeling-projects.md)を作成したら、ラベル付けツールを使用してすぐに Machine Learning プロジェクト用のデータを準備できます。 この記事では、次の内容について説明します。

> [!div class="checklist"]
> * ラベル付けプロジェクトにアクセスする方法
> * ラベル付けツール
> * 特定のラベル付けタスクにツールを使用する方法

## <a name="prerequisites"></a>前提条件

* [Microsoft アカウント](https://account.microsoft.com/account)、または組織およびプロジェクト用の Azure Active Directory アカウント
* ラベル付けプロジェクトが含まれているワークスペースへの共同作成者レベルのアクセス。

## <a name="sign-in-to-the-studio"></a>スタジオにサインインする

1. [Azure Machine Learning Studio](https://ml.azure.com) にサインインします。

1. サブスクリプションと、ラベル付けプロジェクトが含まれているワークスペースを選択します。  この情報はプロジェクト管理者から入手します。

1. 左側にある **[データのラベル付け]** を選択し、プロジェクトを特定します。  

## <a name="understand-the-labeling-task"></a>ラベル付けタスクを理解する

データのラベル付けプロジェクトのテーブルで、ご自分のプロジェクトの **[ラベル データ]** リンクを選択します。

対象のプロジェクトに固有の指示が表示されます。 これらには、取り扱うデータの種類、意思決定方法、その他の関連情報について説明しています。 この情報を読んだ後、ページの上部にある **[タスク]** を選択します。  または、ページの下部にある **[ラベル付けの開始]** を選択します。

## <a name="selecting-a-label"></a>ラベルの選択

すべてのデータのラベル付けタスクで、プロジェクト管理者が指定したセットから適切なタグを 1 つまたは複数選択します。 キーボードの数字キーを使用して、最初の 9 個のタグを選択できます。  

## <a name="assisted-machine-learning"></a>支援型機械学習

ラベル付け中に機械学習アルゴリズムがトリガーされることがあります。 プロジェクトでこれらのアルゴリズムを有効にした場合、次のメッセージが表示されることがあります。

* 画像

    * ある程度の量のデータのラベル付けが完了すると、画面上部のプロジェクト名の横に "**Tasks clustered (クラスター化されたタスク)** " と表示されることがあります。  つまり、似ている画像を同じページに表示するために画像はグループ化されます。  その場合、そのグループ化を活かすためには、複数の画像ビューのいずれかに切り替えます。  
    
    * 後で、プロジェクト名の横に "**Tasks prelabeled (事前ラベル付きのタスク)** " と表示されることがあります。  その場合、機械学習の分類モデルによって提案されたラベルと共に項目が表示されます。 100% の精度を持つ機械学習モデルはありません。 使用するのはモデルの信頼度が高いデータだけですが、それらのデータであっても、ラベル付けが正しくない可能性があります。  そうしたラベルを見つけたら、ページを送信する前に、間違ったラベルを修正してください。  
    
    * オブジェクト識別モデルの場合、境界ボックスとラベルが既に表示されている可能性があります。  ページを送信する前に、間違っているものを修正してください。
    
    * セグメント化モデルの場合、ポリゴンとラベルが既に表示されている可能性があります。  ページを送信する前に、間違っているものを修正してください。 

* テキスト
    
    * ある時点で、プロジェクト名の横に "**Tasks prelabeled (事前ラベル付きのタスク)** " と表示されることがあります。  その場合、機械学習の分類モデルによって提案されたラベルと共に項目が表示されます。 100% の精度を持つ機械学習モデルはありません。 使用するのはモデルの信頼度が高いデータだけですが、それらのデータであっても、ラベル付けが正しくない可能性があります。  そうしたラベルを見つけたら、ページを送信する前に、間違ったラベルを修正してください。

特に、ラベル付けプロジェクトの初期の段階では、機械学習モデルに、ほんの一部の画像に対して事前ラベル付けするだけの精度しかない、ということがあります。 これらの画像のラベル付けが完了すると、次のラウンドのモデル トレーニング用にさらに多くのデータを収集するため、ラベル付けプロジェクトは手動でのラベル付けに戻ります。 やがて、さらに多くの割合の画像について、モデルの信頼度が上がっていき、後でプロジェクトで行う事前ラベル付けタスクが蓄積されていきます。

事前ラベル付けタスクがなくなったら、ラベルの確認または修正を停止して、項目の手動でのタグ付けに戻ります。

## <a name="image-tasks"></a><a name="image-tasks"></a> 画像タスク

画像分類タスクに対しては、複数の画像を同時に表示することができます。 画像領域の上にあるアイコンを使用して、レイアウトを選択します。

表示されているすべての画像を同時に選択するには、 **[すべて選択]** を使用します。 個々の画像を選択するには、画像の右上隅にある円形の選択ボタンを使用します。 タグを適用する画像を少なくとも 1 つ選択する必要があります。 複数の画像を選択すると、選択したすべての画像に選択したタグが適用されます。

ここでは、2 x 2 レイアウトを選択済みで、"Mammal" (哺乳類) というタグを熊とシャチの画像に適用しようとしています。 サメの画像には既に "Cartilaginous fish" (軟骨魚類) というタグが付けられており、イグアナにはまだタグが付けられていません。

![複数の画像のレイアウトと選択](./media/how-to-label-data/layouts.png)

> [!Important] 
> レイアウトを切り替えるのは、ラベルの付いていないデータの新しいページがある場合のみにしてください。 レイアウトを切り替えると、ページの進行中のタグ付け作業はクリアされます。

Azure では、ページ上のすべての画像にタグを付け終わると、 **[送信]** ボタンが有効になります。 **[送信]** を選択して作業内容を保存します。

手元にあるデータのタグを送信すると、Azure によって作業キューの新しい画像セットを使ってページが更新されます。

## <a name="medical-image-tasks"></a>医療画像タスク

> [!IMPORTANT]
> DICOM または同様の画像の種類にラベルを付ける機能は、医療デバイス、臨床サポート、診断ツール、または他のテクノロジ (病気や他の状況の診断、治療、軽減、取り扱い、防止での使用が意図されているもの) として使用することを意図されたり、使用できるようにされているものではなく、そのような目的でのこの機能の使用に対して、Microsoft からはライセンスや権利は付与されません。 この機能は、専門的な医療のアドバイスや医学的意見、診断、治療、または医療専門家による医学的判断に代わるものとして実装またはデプロイするために設計されたり、それを意図されたりしたものではなく、そのようには使用しないでください。 お客様は、DICOM または同様の画像の種類のデータのラベル付けの使用についてのみ責任を負います。

画像プロジェクトでは、DICOM 画像形式の X 線ファイル画像をサポートしています。

:::image type="content" source="media/how-to-label-data/x-ray-image.png" alt-text="ラベル付けする X 線 DICOM 画像。":::

医療画像には他の画像と同じツールでラベルを付けることができますが、DICOM 画像用の追加のツールがあります。  画像の濃度を変更するには、 **[Window and level]\(ウィンドウとレベル\)** ツールを選択します。 このツールは、DICOM 画像に対してのみ使用できます。

:::image type="content" source="media/how-to-label-data/window-level-tool.png" alt-text="DICOM 画像用の [Window and level]\(ウィンドウとレベル\)。":::

## <a name="tag-images-for-multi-class-classification"></a>複数クラス分類用に画像にタグを付ける

プロジェクトの種類が [Image Classification Multi-Class]\(画像分類の複数クラス\) の場合は、画像全体に 1 つのタグを割り当てます。 任意のタイミングで指示を確認するには、 **[指示]** ページに移動し、 **[View detailed instructions]\([詳細な指示の表示]\)** を選択します。

画像にタグを割り当てた後に間違えたことがわかった場合は、修正できます。 画像の下に表示されているラベルの "**X**" を選択して、タグをクリアします。 または、画像を選択し、別のクラスを選択します。 新しく選択した値によって、以前に適用したタグが置き換えられます。

## <a name="tag-images-for-multi-label-classification"></a>複数ラベル分類用に画像にタグを付ける

プロジェクトの種類が [Image Classification Multi-Label]\(画像分類の複数ラベル\) の場合は、画像に 1 つ "*以上*" のタグを適用します。 プロジェクト固有の指示を表示するには、 **[指示]** を選択し、 **[View detailed instructions]\([詳細な指示の表示]\)** に移動します。

ラベルを付ける画像を選択し、タグを選択します。 選択したすべての画像にタグが適用された後、画像が選択解除されます。 さらにタグを適用するには、画像を再び選択する必要があります。 次のアニメーションでは、複数ラベルのタグ付けを示しています。

1. "Ocean" (海洋) タグを適用するために **[すべて選択]** が使用されています。
1. 1 つの画像が選択され、"Closeup" (クローズアップ) というタグが付けられています。
1. 3 つの画像が選択され、"Wide angle" (ワイド アングル) というタグが付けられています。

![複数ラベル フローを示すアニメーション](./media/how-to-label-data/multilabel.gif)

誤りを修正するには、"**X**" をクリックして個々のタグをクリアするか、画像を選択してタグを選択します。これで、選択したすべての画像からタグがクリアされます。 このシナリオを次に示します。 [Land]\(陸\) をクリックすると、選択した 2 つの画像からそのタグがクリアされます。

![複数の選択解除を示すスクリーンショット](./media/how-to-label-data/multiple-deselection.png)

Azure では、各画像に少なくとも 1 つのタグを適用した後にのみ **[送信]** ボタンが有効になります。 **[送信]** を選択して作業内容を保存します。

## <a name="tag-images-and-specify-bounding-boxes-for-object-detection"></a>オブジェクト検出のために画像にタグを付けて境界ボックスを指定する

プロジェクトの種類が [オブジェクト ID (四角形領域)] の場合は、画像内の境界ボックスを 1 つ以上指定し、各ボックスにタグを適用します。 画像には、複数の境界ボックスがあり、それぞれに 1 つのタグがあります。 **[View detailed instructions]\([詳細な指示の表示]\)** を使用して、プロジェクトで複数の境界ボックスが使用されているかどうかを確認します。

1. 作成する予定の境界ボックスのタグを選択します。
1. **四角形のボックス** ツール ![四角形のボックス ツール](./media/how-to-label-data/rectangular-box-tool.png) を選択するか、R キーを押します。
3. ターゲットをクリックして斜めにドラッグすると、大まかな境界ボックスが作成されます。 境界ボックスを調整するには、端または角をドラッグします。

![境界ボックスの作成](./media/how-to-label-data/bounding-box-sequence.png)

境界ボックスを削除するには、作成後に境界ボックスの横に表示される X 形のターゲットをクリックします。

既存の境界ボックスのタグを変更することはできません。 タグの割り当てを間違った場合は、境界ボックスを削除し、正しいタグを使って新しく作成する必要があります。

既定では、既存の境界ボックスを編集できます。 **領域のロック/ロック解除** ツール ![領域のロック/ロック解除ツール](./media/how-to-label-data/lock-bounding-boxes-tool.png) または L キーを使用して、その動作を切り替えます。 領域がロックされている場合は、新しい境界ボックスの形状または位置しか変更できません。

**領域操作** ツール ![これは、領域操作ツールのアイコンです - 4 つの矢印が中心から外側に向かって上、右、下、および左を指しています。](./media/how-to-label-data/regions-tool.png) または M キーを使用して、既存の境界ボックスを調整します。 形状を調整するには、端または角をドラッグします。 内側をクリックすると、境界ボックス全体をドラッグできるようになります。 領域を編集できない場合は、**領域のロック/ロック解除** ツールを切り替えた可能性があります。

**テンプレートベースのボックス** ツール ![テンプレートベースのボックス ツール](./media/how-to-label-data/template-box-tool.png) または T キーを使用して、同じサイズの複数の境界ボックスを作成します。 画像に境界ボックスがなく、テンプレートベースのボックスをアクティブにすると、ツールによって 50 x 50 ピクセルのボックスが生成されます。 境界ボックスを作成してからテンプレートベースのボックスをアクティブにした場合、新しい境界ボックスはすべて、最後に作成したボックスのサイズになります。 テンプレートベースのボックスは、配置後にサイズを変更できます。 テンプレートベースのボックスのサイズを変更すると、そのボックスのサイズのみが変更されます。

現在の画像に含まれる "*すべて*" の境界ボックスを削除するには、**すべての領域の削除** ツール ![すべての領域の削除ツール](./media/how-to-label-data/delete-regions-tool.png) を選択します。

画像の境界ボックスを作成した後、 **[送信]** を選択して作業内容を保存します。そうしないと、進行中の作業は保存されません。

## <a name="tag-images-and-specify-polygons-for-image-segmentation"></a>画像にタグ付けし、画像をセグメント化するためにポリゴンを指定する 

プロジェクトの種類が "インスタンスのセグメント化 (ポリゴン)" である場合は、画像内に 1 つ以上のポリゴンを指定し、各ポリゴンにタグを適用します。 画像に複数の境界ポリゴンを指定し、それぞれに 1 つのタグを適用できます。 **[詳細な指示の表示]** を使用して、プロジェクトで複数の境界ポリゴンを使用するかどうかを判断します。

1. 作成するポリゴンのタグを選択します。
1. **[ポリゴン領域の描画]** ツール ![[ポリゴン領域の描画] ツール](./media/how-to-label-data/polygon-tool.png) を選択するか、P キーを選択します。
1. ポリゴンの各ポイントをクリックします。  形状が完成したら、ダブルクリックして終了します。

    :::image type="content" source="media/how-to-label-data/polygon.gif" alt-text="猫と犬のポリゴンを作成する":::

ポリゴンを削除するには、作成後にポリゴンの横に表示される X 形のターゲットをクリックします。

ポリゴンのタグを変更する場合は、 **[領域の移動]** ツールを選択し、ポリゴンをクリックしてから適切なタグを選択します。

既存のポリゴンを編集することができます。 **[領域のロック/ロック解除]** ツール ![[領域のロック/ロック解除] ツールを使用してポリゴンを編集する](./media/how-to-label-data/lock-bounding-boxes-tool.png) または L キーを使用して、その動作を切り替えます。 領域がロックされている場合は、新しいポリゴンの形状または位置しか変更できません。

**ポリゴンのポイントの追加または削除** ツール ![これは、ポリゴンのポイントの追加または削除ツールのアイコンです。](./media/how-to-label-data/add-remove-points-tool.png) または U キーを使用して、既存のポリゴンを調整します。 ポリゴンをクリックして、ポイントを追加または削除します。 領域を編集できない場合は、**領域のロック/ロック解除** ツールを切り替えた可能性があります。

現在の画像に含まれる "*すべて*" のポリゴンを削除するには、 **[すべての領域の削除]** ツール ![[すべての領域の削除] ツール](./media/how-to-label-data/delete-regions-tool.png) を選択します。

画像のポリゴンを作成したら、 **[送信]** を選択して作業内容を保存します。そうしないと、進行中の作業は保存されません。

## <a name="label-text-preview"></a><a name="label-text"></a> テキストにラベルを付ける (プレビュー)

> [!IMPORTANT]
> テキストのラベル付けはパブリック プレビュー段階にあります。
> プレビュー バージョンはサービス レベル アグリーメントなしで提供されています。運用環境のワークロードに使用することはお勧めできません。 特定の機能はサポート対象ではなく、機能が制限されることがあります。 詳しくは、[Microsoft Azure プレビューの追加使用条件](https://azure.microsoft.com/support/legal/preview-supplemental-terms/)に関するページをご覧ください。

テキストにタグを付けるときは、ツール バーを使用して次のようにします。

* テキストのサイズを拡大または縮小する
* フォントの変更
* この項目のラベル付けをスキップし、次の項目に移動する

タグを割り当てた後に間違えたことがわかった場合は、修正できます。 テキストの下に表示されているラベルの **[X]** を選択して、タグをクリアします。

2 種類のテキスト プロジェクトがあります。


|プロジェクトの種類  |タグ付け  |
|---------|---------|
| 多クラス分類 | テキスト項目全体に 1 つのタグを割り当てます。  テキスト項目ごとに 1 つのタグのみ選択できます。   |
| 分類の複数ラベル     | 各テキスト項目に 1 つ "*以上*" のタグを割り当てます。  テキスト項目ごとに複数のタグを選択できます。       |

プロジェクト固有の指示を表示するには、 **[指示]** を選択し、 **[View detailed instructions]\([詳細な指示の表示]\)** に移動します。

## <a name="finish-up"></a>しあげ

タグを付けたデータのページを送信すると、Azure によってラベルの付いていない新しいデータが作業キューから割り当てられます。 ラベルの付いていないデータがなくなると、その旨を示すメッセージと共にポータルのホーム ページへのリンクが表示されます。

ラベル付けが完了したら、ラベル付けポータルの右上隅で自分の名前を選択し、 **[サインアウト]** を選択します。サインアウトしない場合、最終的に Azure によって "タイムアウト" され、データは別のラベラーに割り当てられます。

## <a name="next-steps"></a>次のステップ

* [Azure で画像分類モデルをトレーニングする](./tutorial-train-models-with-aml.md)方法を確認します
