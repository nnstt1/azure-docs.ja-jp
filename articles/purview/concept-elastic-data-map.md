---
title: エラスティック データ マップ
description: この記事では、Azure Purview のエラスティック データ マップの概念について説明します。
author: chanuengg
ms.author: csugunan
ms.service: purview
ms.subservice: purview-data-map
ms.topic: conceptual
ms.date: 08/18/2021
ms.custom: template-concept
ms.openlocfilehash: fd667abab0802d6d11fc855a620bf51f8419b978
ms.sourcegitcommit: 05c8e50a5df87707b6c687c6d4a2133dc1af6583
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 11/16/2021
ms.locfileid: "132555766"
---
# <a name="elastic-data-map-in-azure-purview"></a>Azure Purview のエラスティック データ マップ

データ検出とデータ ガバナンスの基盤となるのが Azure Purview Data Map です。 ハイブリッド、オンプレミス、マルチクラウドの環境における分析、サービスとしてのソフトウェア (SaaS)、運用システムに存在するエンタープライズ データに関するメタデータをキャプチャします。 Purview Data Map は、組み込みのスキャンおよび分類システムによって自動的に最新の状態に維持されます。 UI を使用すると、開発者はオープンソースの Apache Atlas API を使用してデータ マップをプログラムでさらに操作できます。

## <a name="elastic-data-map"></a>エラスティック データ マップ

Azure Purview のすべてのアカウントには、1 つの容量ユニットから柔軟に拡張できるデータ マップがあります。 これらは、柔軟性ウィンドウ内の要求の負荷に基づいてスケールアップおよびスケールダウンします ([現在の制限を確認](how-to-manage-quotas.md))。 これらの制限で、ほとんどのデータ ランドスケープがカバーされるはずです。 ただし、さらに大きな容量が必要な場合は、[サポート チケットを作成できます](#request-capacity)。

## <a name="data-map-capacity-unit"></a>データ マップの容量ユニット

エラスティック データ マップには、容量ユニット (CU) として表される操作のスループットとストレージ コンポーネントが付属しています。 既定では、Azure Purview のアカウントに 1 つの容量ユニットが付属し、使用量に基づいて柔軟に拡張できます。 各データ マップの容量ユニットには、25 操作/秒のスループットと 2 GB のメタデータ ストレージの制限があります。  

### <a name="operations"></a>Operations

操作は、Purview Data Map のスループット測定値です。 これには、データ マップに格納されているメタデータに対する作成、読み取り、書き込み、更新、削除の各操作が含まれます。 操作の例を次に示します。

- データ マップで資産を作成する
- 所有者、スチュワード、親、データ系列などの資産との関係を追加する
- 資産を編集して、説明、用語集の用語などのビジネス メタデータを追加する
- 検索結果ページに結果を返すキーワード検索。

### <a name="storage"></a>ストレージ

ストレージは、データ マップの 2 番目のコンポーネントであり、技術、ビジネス、操作、セマンティック メタデータが含まれます。

技術的なメタデータには、Purview [スキャン](concept-scans-and-ingestion.md)から検出されたスキーマ、データ型、列などが含まれます。 ビジネス メタデータには、説明や用語集の用語などの自動 (例: Power BI データセットからの昇格、SQL テーブルからの説明) および手動によるタグ付けが含まれます。 セマンティック メタデータの例には、データ ソースへのコレクション マッピングや分類などがあります。 操作メタデータには、データ ファクトリのコピーとデータ フロー アクティビティの実行状態と実行時間が含まれます。

## <a name="work-with-elastic-data-map"></a>エラスティック データ マップを操作する

- **自動スケールを使用したエラスティック データ マップ** – 負荷に基づいて自動スケールできる、最小単位の 1 つの容量ユニットからデータ マップを開始します。 ほとんどの組織では、この機能によって、データ ガバナンス プロジェクトを開始するための価格を低く抑えることができるため、節減効果が高まります。 この機能は価格に影響します。

- **高度なスキャンとインジェスト** – スキャンとインジェストの両方のプロセスで、データ資産の作成、分類、データ系列を追跡して制御できます。 この機能は価格に影響します。

## <a name="scenario"></a>シナリオ

Claudia は、Contoso の Azure 管理者であり、Azure portal から新しい Azure Purview アカウントをプロビジョニングしたいと考えています。 プロビジョニング中は、プラットフォームの将来的な状態をサポートするために必要なサイズの Purview Data Map を確認できません。 ただし、Purview Data Map は容量ユニットで課金されることを認識しています。これは、ストレージと操作のスループットの影響を受けます。 彼女は、コストを低く抑え、使用量に基づいてデータ マップのサイズを柔軟に拡張できるように、最小のデータ マップをプロビジョニングしたいと考えています。  

Claudia は、データ マップの既定のサイズが 1 容量ユニットの Purview アカウントを作成できます。これは自動的にスケールアップおよびスケールダウンできます。 自動スケール機能を使用すると、特定の期間に実行される間欠的または計画的なデータ バーストに基づいて容量を調整することもできます。 Claudia は、プロビジョニング エクスペリエンスの次の手順に従ってネットワーク構成を設定し、プロビジョニングを完了します。  

Claudia は、Azure Monitor のメトリック ページで、データ マップのストレージと操作のスループットの使用量を確認できます。 ストレージまたは操作のスループットが一定の制限に達した場合のアラートを追加で設定すると、新しい Purview アカウントの使用量と課金状況を監視できます。  

## <a name="data-map-billing"></a>データ マップの課金

1 つの容量ユニット (25 操作/秒および 2 GB) に対して課金され、追加の課金は、その時間にロールアップされた各追加容量ユニットの使用量に基づいています。 データ マップの操作は、25 操作/秒単位でスケーリングし、メタデータ ストレージは 2 GB 単位でスケーリングします。 Purview Data Map では、柔軟性ウィンドウ内で自動的にスケールアップまたはスケールダウンできます ([現在の制限を確認](how-to-manage-quotas.md))。 ただし、次のレベルの柔軟性ウィンドウを取得するには、サポート チケットを作成する必要があります。

データ マップの容量ユニットでは、操作のスループットとストレージに上限があります。 ストレージが現在の容量ユニットを超えると、操作スループットが使用されていない場合でも、次の容量ユニットに対して課金されます。 次の表は、データ マップの容量ユニットの範囲を示しています。 データ マップの容量ユニットが 100 容量ユニットを超えた場合は、サポートにお問い合せください。

|データ マップの容量ユニット  |スループット (操作数/秒)   |ストレージ容量 (GB)|
|----------|-----------|------------|
|1    |25      |2     |
|2    |50      |4     |
|3    |75      |6     |
|4    |100     |8     |
|5    |125     |10    |
|6    |150     |12   |
|7    |175      |14     |
|8    |200     |16    |
|9    |225      |18    |
|10    |250     |20    |
|..   |..      |..     |
|100    |2500     |200   |

### <a name="billing-examples"></a>課金の例

- 指定した時間の Purview Data Map の操作スループットが 25 操作/秒以下で、ストレージ サイズが 1 GB。 1 つの容量ユニットに対して課金されます。

- 指定した時間の Purview Data Map の操作スループットが 25 操作/秒以下で、ストレージ サイズが 3 GB。 2 つの容量ユニットに対して課金されます。

- 指定した時間の Purview Data Map の操作スループットが 50 操作/秒で、ストレージ サイズが 1 GB。 2 つの容量ユニットに対して課金されます。

- 指定した時間の Purview Data Map の操作スループットが 50 操作/秒で、ストレージ サイズが 5 GB。 3 つの容量ユニットに対して課金されます。

- 指定した時間の Purview Data Map の操作スループットが 250 操作/秒で、ストレージ サイズが 5 GB。 10 の容量ユニットに対して課金されます。

### <a name="detailed-billing-example"></a>課金の例の詳細

次に示すデータ マップの課金例では、12:00 PM から 6:00 PM の 6 時間にわたって、1 秒あたりのメタデータストレージと変数操作の数が増加するデータ マップを示しています。 グラフの赤い線は 1 秒あたりの操作数で、青い点線はこの 6 時間のメタデータ ストレージの使用量です。

:::image type="content" source="./media/concept-elastic-data-map/operations-and-metadata.png" alt-text="メタデータの操作数と増加率を時系列で示すグラフ。":::

各データ マップの容量ユニットは、25 操作/秒と 2 GB のメタデータ ストレージをサポートしています。 データ マップは時間単位で課金されます。 時間内に必要になるデータ マップの最大容量ユニットに対して課金されます。 時間内にさらに多くの操作/秒が必要になる場合は、その時間内に必要な容量ユニットの数が増加します。 操作/秒の使用率が低くなる場合でも、大量のメタデータ ストレージが必要になることがあります。 メタデータ ストレージでは、時間内に必要になる容量ユニットの数を決定します。

次の表は、この課金例で 1 時間に使用される操作の最大数/秒とメタデータ ストレージを示しています。 

:::image type="content" source="./media/concept-elastic-data-map/billing-table.png" alt-text="操作の最大数とメタデータの増加を時系列で示すグラフ。":::

このデータ マップでは、この期間のデータ マップの操作/秒とメタデータ ストレージの使用量に基づいて、この 6 時間で 20 容量ユニット (1 + 3 + 4 + 3 + 6 + 3) 相当の時間に対して課金されます。

:::image type="content" source="./media/concept-elastic-data-map/billing-capacity-hours.png" alt-text="CU 時間の数を時系列で示すグラフ。":::

>[!Important]
>Purview Data Map では、柔軟性ウィンドウ内で自動的にスケールアップまたはスケールダウンできます ([現在の制限を確認](how-to-manage-quotas.md))。 次のレベルの柔軟性ウィンドウを取得するには、サポート チケットを作成する必要があります。

## <a name="request-capacity"></a>容量を要求する

非常に大規模なデータセットや大規模な環境で作業をしていて、エラスティック データ マップの容量がさらに必要な場合は、[サポート チケットを作成する](https://portal.azure.com/#blade/Microsoft_Azure_Support/HelpAndSupportBlade/overview)ことにより、より容量の大きな柔軟性ウィンドウを要求できます。

**[サービスとサブスクリプションの制限 (クォータ)]** を選択し、より大きな容量を要求する Purview アカウントを選択して、画面の指示を完了します。

:::image type="content" source="./media/concept-elastic-data-map/increase-limit.png" alt-text="サポート ケースの作成を示す画面。上限の引き上げオプションが選択されている。":::

[説明] に、使用している環境と要求する追加の容量に関する情報をできるだけ詳しく入力します。

## <a name="monitoring-the-elastic-data-map"></a>エラスティック データ マップの監視

データ資産のサイズと課金について理解するために、"データ マップの容量ユニット" と "データ マップのストレージ サイズ" のメトリックを監視できます。

1. [Azure portal](https://portal.azure.com) にアクセスし、 **[Purview アカウント]** ページに移動して、自分の _Purview アカウント_ をクリックします

2. **[概要]** をクリックして下にスクロールし、 **[監視]** セクションで、さまざまな期間にわたって [データ マップの容量ユニット] と [データ マップのストレージ サイズ] のメトリックを観察します。

    :::image type="content" source="./media/concept-elastic-data-map/data-map-metrics.png" alt-text="エラスティック データ マップのメトリックの概要ページが表示されているメニューのスクリーンショット。":::

3. 追加の設定については、 **[監視] --> [メトリック]** と移動して、 **[データ マップの容量ユニット]** と **[データ マップのストレージ サイズ]** を観察します。

    :::image type="content" source="./media/concept-elastic-data-map/elastic-data-map-metrics.png" alt-text="メトリックが表示されているメニューのスクリーンショット。":::

4. **[データマップの容量ユニット]** をクリックすると、過去 24 時間のデータ マップの容量ユニットの使用率が表示されます。 折れ線グラフ上にマウス ポインターを置くと、特定の日の特定の時刻に消費されたデータ マップの容量ユニットが示されます。

    :::image type="content" source="./media/concept-elastic-data-map/data-map-capacity-default.png" alt-text="24 時間にわたって消費されたデータ マップ容量ユニットが表示されているメニューのスクリーンショット。":::

5. 画面右上の **[ローカル時刻: 過去 24 時間 (自動 - 1 時間)]** をクリックして、グラフに表示される時間の範囲を変更します。

    :::image type="content" source="./media/concept-elastic-data-map/data-map-capacity-custom.png" alt-text="カスタムの時間の範囲にわたって消費されたデータ マップ容量ユニットが表示されているメニューのスクリーンショット。":::

    :::image type="content" source="./media/concept-elastic-data-map/data-map-capacity-time-range.png" alt-text="3 日間の時間の範囲にわたって消費されたデータ マップ容量ユニットが表示されているメニューのスクリーンショット。":::

6. 次に示すように、オプションをクリックしてグラフの種類をカスタマイズします。

    :::image type="content" source="./media/concept-elastic-data-map/data-map-capacity-graph-type.png" alt-text="グラフの種類を変更するオプションが表示されているメニューのスクリーンショット。":::

7. **[新しいグラフ]** をクリックして、データ マップのストレージ サイズのグラフを追加します。

    :::image type="content" source="./media/concept-elastic-data-map/data-map-storage-size.png" alt-text="使用されているデータ マップのストレージ サイズが表示されているメニューのスクリーンショット。":::

## <a name="summary"></a>まとめ

Purview では、エラスティック データ マップを使用して、データ ガバナンスを開始する障壁を低コストで克服できます。
Purview Data Map では、最小単位の 1 つの容量ユニットから開始できる、従量課金制モデルで柔軟に拡張できます。
プロビジョニング時に、データ資産に適したデータ マップのサイズを選択することを心配したり、サイズの制限により、将来のプラットフォームの移行に対処する必要はありません。

## <a name="next-steps"></a>次の手順

- [Azure Purview アカウントを作成する](create-catalog-portal.md)
- [Purview の価格](https://azure.microsoft.com/pricing/details/azure-purview/)
