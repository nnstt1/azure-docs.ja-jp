---
title: ポータルでのクラウド サービス (クラシック) の自動スケール | Microsoft Docs
description: ポータルを使用して、Azure でクラウド サービスのロール (クラシック) の自動スケール ルールを構成する方法について説明します。
ms.topic: article
ms.service: cloud-services
ms.subservice: autoscale
ms.date: 10/14/2020
author: hirenshah1
ms.author: hirshah
ms.reviewer: mimckitt
ms.custom: ''
ms.openlocfilehash: 807bc751ea35410963e22afdb00ccaf83d57e5e9
ms.sourcegitcommit: d11ff5114d1ff43cc3e763b8f8e189eb0bb411f1
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 08/25/2021
ms.locfileid: "122824391"
---
# <a name="how-to-configure-auto-scaling-for-a-cloud-service-classic-in-the-portal"></a>ポータルでクラウド サービス (クラシック) の自動スケールを構成する方法

[!INCLUDE [Cloud Services (classic) deprecation announcement](includes/deprecation-announcement.md)]

スケールインまたはスケールアウトをトリガーするクラウド サービス worker ロールに対して条件を設定することができます。 ロールの条件は、CPU、ディスク、またはロールのネットワークの負荷に基づいて設定できます。 条件はまた、メッセージ キューに基づいて、またはサブスクリプションに関連付けられているその他の Azure リソースのメトリックに基づいて設定することができます。

> [!NOTE]
> この記事では、クラウド サービス (クラシック) に焦点を当てています。 仮想マシンを直接作成した場合 (クラシック)、その仮想マシンはクラウド サービスでホストされます。 標準の仮想マシンは、[可用性セット](/previous-versions/azure/virtual-machines/windows/classic/configure-availability-classic)に関連付けることでスケールを設定でき、手動でオンまたはオフにすることができます。

## <a name="considerations"></a>考慮事項
アプリケーションの規模の設定を構成する前に、以下に示す情報を考慮してください。

* 規模設定はコア使用量の影響を受けます。

    ロール インスタンスが大きいと、使用するコアも多くなります。 アプリケーションの規模の設定は、サブスクリプションのコア数の制限内でのみ行うことができます。 たとえば、サブスクリプションのコア数が 20 に制限されているとします。 アプリケーションを 2 つの中規模のクラウド サービスで実行している場合 (合計 4 コア)、サブスクリプション内の他のクラウド サービスのデプロイは残りの 16 コアまでしかスケールアップできません。 サイズの詳細については、「[Cloud Service のサイズ](cloud-services-sizes-specs.md)」を参照してください。

* スケールはキュー メッセージのしきい値に基づいて行うことができます。 キューの使用方法の詳細については、 [Queue Storage サービスの使用方法](../storage/queues/storage-dotnet-how-to-use-queues.md)に関するページを参照してください。

* サブスクリプションに関連付けられているその他のリソースについてもスケールを行うことができます。

* アプリケーションの高可用性を可能にするには、アプリケーションを 2 つ以上のロール インスタンスと共にデプロイする必要があります。 詳細については、「 [サービス レベル アグリーメント](https://azure.microsoft.com/support/legal/sla/)」を参照してください。

* 自動スケールは、すべてのロールが **準備完了** 状態の場合にのみ発生します。  


## <a name="where-scale-is-located"></a>スケールの設定
クラウド サービスを選択したら、該当するクラウド サービス ブレードを表示状態にします。

1. クラウド サービス ブレードの **[ロールとインスタンス]** タイルで、クラウド サービスの名前を選択します。   
   **重要**:ロールの下にあるロール インスタンスではなく、クラウド サービス ロールを必ずクリックしてください。

    ![[ロールとインスタンス] タイルのスクリーンショット。WorkerRoleWithSBQueue 1 オプションが赤で囲まれています。](./media/cloud-services-how-to-scale-portal/roles-instances.png)
2. **[スケール]** タイルを選択します。

    ![[操作] ページのスクリーンショット。[スケール] タイルが赤で囲まれています。](./media/cloud-services-how-to-scale-portal/scale-tile.png)

## <a name="automatic-scale"></a>自動スケール
ロールのスケール設定を構成する際は、**手動** または **自動** のいずれかのモードを使用できます。 手動モードでは想定通りにスケールが行われるので、インスタンスの絶対数を設定します。 ただし、自動モードでは、スケールの方法とスケールの程度を制御するルールを設定できます。

**[スケールの基準]** オプションを **[スケジュールおよびパフォーマンス ルール]** に設定します。

![プロファイルとルールを使用したクラウド サービスのスケール設定の画像](./media/cloud-services-how-to-scale-portal/schedule-basics.png)

1. 既存のプロファイルです。
2. 親プロファイルのルールを追加します。
3. 別のプロファイルを追加します。

**[プロファイルの追加]** を選択します。 プロファイルではスケールで使用するモードを指定します。 **[常時]** 、 **[繰り返し]** 、 **[固定日付]** という 3 つのモードがあります。

プロファイルとルールを構成したら、上部にある **[保存]** アイコンをクリックします。

#### <a name="profile"></a>プロファイル
プロファイルでは、スケールにおけるインスタンスの最大数と最小数、ならびにこのスケール範囲を有効にするタイミングを設定します。

* **毎回**

    常に、この使用可能なインスタンスの範囲を保持します。  

    ![常時スケールされるクラウド サービス](./media/cloud-services-how-to-scale-portal/select-always.png)
* **定期的なアイテム**

    スケールする曜日セットを選択します。

    ![定期的なスケジュールで行われるクラウド サービスのスケール](./media/cloud-services-how-to-scale-portal/select-recurrence.png)
* **指定日**

    指定された日付範囲でロールをスケールします。

    ![指定日に行われるクラウド サービスのスケール](./media/cloud-services-how-to-scale-portal/select-fixed.png)

プロファイルを構成したら、プロファイル ブレードの下部にある **[OK]** ボタンを選択します。

#### <a name="rule"></a>ルール
ルールは、プロファイルに追加されて、スケールをトリガーする条件を示します。

ルールのトリガーは、条件値を追加可能なクラウド サービスのメトリック (CPU の使用率、ディスク アクティビティ、またはネットワーク アクティビティ) に基づいて設定されます。 さらに、メッセージ キュー、またはサブスクリプションに関連付けられているその他の Azure リソースのメトリックに基づいてトリガーを設定することができます。

![[ルール] ダイアログ ボックスのスクリーンショット。[メトリック名] オプションが赤で囲まれています。](./media/cloud-services-how-to-scale-portal/rule-settings.png)

ルールを構成したら、ルール ブレードの下部にある **[OK]** ボタンを選択します。

## <a name="back-to-manual-scale"></a>手動スケールに戻る
[[スケールの設定]](#where-scale-is-located) に移動し、 **[スケールの基準]** オプションを **[手動で入力したインスタンス数]** に設定します。

![プロファイルとルールを使用したクラウド サービスのスケール設定](./media/cloud-services-how-to-scale-portal/manual-basics.png)

この設定により、ロールから自動スケールが削除され、インスタンス数を直接設定できるようになります。

1. スケール (手動または自動) オプション。
2. スケールするインスタンスを設定するロール インスタンス スライダー。
3. スケールするロールのインスタンス。

スケール設定を構成したら、上部にある **[保存]** アイコンを選択します。
