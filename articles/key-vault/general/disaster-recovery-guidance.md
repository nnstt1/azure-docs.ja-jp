---
title: Azure Key Vault の可用性と冗長性 - Azure Key Vault | Microsoft Docs
description: Azure Key Vault の可用性と冗長性について説明します。
services: key-vault
author: msmbaldwin
ms.service: key-vault
ms.subservice: general
ms.topic: tutorial
ms.date: 03/31/2021
ms.author: mbaldwin
ms.openlocfilehash: 7a23522da2bf6d1c5f9c6a76ab3d9c92cbc64897
ms.sourcegitcommit: 02d443532c4d2e9e449025908a05fb9c84eba039
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 05/06/2021
ms.locfileid: "108749539"
---
# <a name="azure-key-vault-availability-and-redundancy"></a>Azure Key Vault の可用性と冗長性

Azure Key Vault には複数層の冗長性が備わっています。そのため、サービスの個々のコンポーネントで障害が発生した場合でも、アプリケーションでは引き続きキーとシークレットを使用することができます。

> [!NOTE]
> このガイドは、コンテナーに適用されます。 Managed HSM プールでは、別の高可用性とディザスター リカバリーのモデルが使用されます。 詳細については、[Managed HSM のディザスター リカバリー ガイド](../managed-hsm/disaster-recovery-guide.md)を参照してください。

キー コンテナーのコンテンツは、キーとシークレットの高い持続性を維持するために、リージョン内と、同じ地域内の 150 マイル (約 241 km) 以上離れたセカンダリ リージョンにレプリケートされます。 特定のリージョン ペアの詳細については、[Azure のペアになっているリージョン](../../best-practices-availability-paired-regions.md)に関する記事をご覧ください。 ペア リージョン モデルの例外は、単一リージョンの geo です (ブラジル南部、カタール中部など)。 そのようなリージョンでは、データを同じリージョン内に維持するオプションだけが許可されます。 ブラジル南部とカタール中部ではどちらも、ゾーン冗長ストレージ (ZRS) を使用して、1 つの場所またはリージョン内でデータを 3 回レプリケートします。 AKV Premium では、3 リージョン中 2 つを使用して、HSM からデータがレプリケートされます。

Key Vault サービス内の個々のコンポーネントで障害が発生した場合、リージョン内の代替コンポーネントが要求を処理し、機能が低下しないようにします。 このプロセスを開始するために、いずれの操作も行う必要はありません。これは自動的に実行され、ユーザーに透過的になります。

Azure リージョン全体が使用できない場合がまれにありますが、そのような場合でもそのリージョン内の Azure Key Vault に対する要求は自動的にセカンダリ リージョンにルーティング ("*フェールオーバー*") されます (ブラジル南部とカタール中部リージョンの場合を除く)。 プライマリ リージョンが再び使用できるようになったときに、要求は再びプライマリ リージョンにルーティング ("*フェールバック*") されます。 この動作も自動的に行われるため、ユーザーによる操作は必要ありません。

ブラジル南部およびカタール中部リージョンでは、リージョンの障害の発生に備えて Azure Key Vault の復旧計画を作成する必要があります。 自分が選んだリージョンに Azure Key Vault をバックアップおよび復元するには、「[Azure Key Vault のバックアップ](backup.md)」に詳述されている手順に従ってください。 

この高可用性の設計のおかげで、Azure Key Vault では、メンテナンス アクティビティのためのダウンタイムは必要ありません。

その場合の注意事項をいくつか次に示します。

* リージョン フェールオーバーの場合、サービスのフェールオーバーには数分かかることがあります。 フェールオーバー前のこの時間に行われた要求は、失敗する可能性があります。
* プライベート リンクを使用してキー コンテナーに接続している場合は、フェールオーバーが発生した場合に接続が再確立されるまで、最大 20 分かかることがあります。 
* フェールオーバー中、キー コンテナーは読み取り専用モードになります。 このモードでサポートされる要求は次のとおりです。
  * 証明書の一覧の取得
  * 証明書を取得する
  * シークレットのリスト
  * シークレットの取得
  * キーのリスト
  * キー (のプロパティ) の取得
  * Encrypt
  * 復号化
  * ラップ
  * ラップ解除
  * Verify (英語の可能性あり)
  * 署名
  * バックアップ

* フェールオーバー中、キー コンテナーのプロパティを変更することはできません。 アクセス ポリシーやファイアウォールの構成および設定を変更することはできません。

* フェールオーバーがフェールバックされると、すべての種類の要求 (つまり、読み取り "*および*" 書き込み要求) が可能になります。
