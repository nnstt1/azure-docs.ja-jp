---
title: DTU リソースによるエラスティック プールの制限
description: このページでは、Azure SQL Database のエラスティック プールに対するいくつかの一般的な DTU のリソース制限について説明します。
services: sql-database
ms.service: sql-database
ms.subservice: elastic-pools
ms.custom: seo-lt-2019 sqldbrb=1 references_regions
ms.devlang: ''
ms.topic: reference
author: dimitri-furman
ms.author: dfurman
ms.reviewer: mathoma
ms.date: 10/12/2021
ms.openlocfilehash: 4c131b756a03622a2569f997fe427ebfdb661454
ms.sourcegitcommit: 611b35ce0f667913105ab82b23aab05a67e89fb7
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 10/14/2021
ms.locfileid: "129999722"
---
# <a name="resources-limits-for-elastic-pools-using-the-dtu-purchasing-model"></a>DTU 購入モデルを使用したエラスティック プールのリソース制限
[!INCLUDE[appliesto-sqldb](../includes/appliesto-sqldb.md)]

この記事では、DTU 購入モデルを使用した、エラスティック プール内にある Azure SQL Database のデータベースに対するリソース制限について、詳しく説明します。

* サーバー上の単一データベースに対する DTU 購入モデルの制限については、[サーバー上のリソース制限の概要](resource-limits-logical-server.md)に関するページを参照してください。
* Azure SQL Database に対する DTU 購入モデルのリソース制限については、[単一データベースに対する DTU リソースの制限](resource-limits-dtu-single-databases.md)と [DTU リソースによるエラスティック プールの制限](resource-limits-dtu-elastic-pools.md)に関するページを参照してください。
* 仮想コア リソースの制限については、[Azure SQL Database に対する仮想コア リソースの制限](resource-limits-vcore-single-databases.md)および[エラスティック プールに対する仮想コア リソースの制限](resource-limits-vcore-elastic-pools.md)に関するページを参照してください。
* さまざまな購入モデルについて詳しくは、[購入モデルとサービス レベル](purchasing-models.md)に関する記事をご覧ください。

各読み取り専用レプリカには、DTU、ワーカー、セッションなどの独自のリソースがあります。 読み取り専用の各レプリカには、この記事で後述するリソース制限が適用されます。

## <a name="elastic-pool-storage-sizes-and-compute-sizes"></a>エラスティック プール: ストレージ サイズとコンピューティング サイズ

次の表では、Azure SQL Database エラスティック プールについて、各サービス レベルとコンピューティング サイズで使用可能なリソースを示します。 次のものを使用して、サービス レベル、コンピューティング サイズ、およびストレージ容量を設定できます。

* [Transact-SQL](elastic-pool-scale.md) ([ALTER DATABASE](/sql/t-sql/statements/alter-database-transact-sql#overview-sql-database) を使用)
* [Azure Portal](elastic-pool-manage.md#azure-portal)
* [PowerShell](elastic-pool-manage.md#powershell)
* [Azure CLI](elastic-pool-manage.md#azure-cli)
* [REST API](elastic-pool-manage.md#rest-api)


> [!IMPORTANT]
> スケーリングのガイダンスと考慮事項については、[エラスティック プールのスケーリング](elastic-pool-scale.md)に関するページを参照してください

エラスティック プール内の個々のリソース制限は、一般的に DTU やサービス層に基づくプール外の単一のデータベースのリソース制限と同じです。 たとえば、S2 データベースの最大同時実行ワーカー数は 120 ワーカーです。 そのため、プール内の各データベースの最大 DTU が 50 DTU (S2 と同じ) の場合、Standard プール内のデータベースの最大同時実行ワーカー数も 120 ワーカーです。
 
DTU の数が同じである場合、エラスティック プールに提供されるリソースは、エラスティック プールの外部にある単一データベースに提供されるリソースを超える可能性があります。 これは、ワークロード パターンに応じて、エラスティック プールの eDTU 使用率が、プール内の複数のデータベースにわたる DTU 使用率の合計よりも少なくなる可能性があることを意味します。 たとえば、データベースの DTU 使用率が 100% のエラスティック プールにデータベースが 1 つしかないという極端なケースでは、特定のワークロード パターンでプールの eDTU 使用率が 50% になる可能性があります。 これは、データベースあたりの最大 DTU 数が、指定されたプール サイズに対してサポートされる最大数のままであっても発生する可能性があります。

> [!NOTE]
> 次の各表に示すプールあたりのストレージ リソースの制限には、tempdb およびログ ストレージは含まれません。

### <a name="basic-elastic-pool-limits"></a>Basic エラスティック プールの制限

| プールあたりの eDTU 数 | **50** | **100** | **200** | **300** | **400** | **800** | **1200** | **1600** |
|:---|---:|---:|---:| ---: | ---: | ---: | ---: | ---: |
| プールあたりの付属ストレージ (GB) | 5 | 10 | 20 | 29 | 39 | 78 | 117 | 156 |
| プールあたりの最大ストレージ容量 (GB) | 5 | 10 | 20 | 29 | 39 | 78 | 117 | 156 |
| プールあたりの最大インメモリ OLTP ストレージ容量 (GB) | 該当なし | なし | なし | なし | なし | なし | なし | 該当なし |
| プールあたりの最大 DB 数 <sup>1</sup> | 100 | 200 | 500 | 500 | 500 | 500 | 500 | 500 |
| プールあたりの最大同時実行ワーカー (要求) 数 <sup>2</sup> | 100 | 200 | 400 | 600 | 800 | 1600 | 2400 | 3200 |
| プールあたりの最大同時セッション数 <sup>2</sup> | 30000 | 30000 | 30000 | 30000 |30000 | 30000 | 30000 | 30000 |
| データベースあたりの選択可能な最小 DTU 数 | 0、5 | 0、5 | 0、5 | 0、5 | 0、5 | 0、5 | 0、5 | 0、5 |
| データベースあたりの選択可能な最大 DTU 数 | 5 | 5 | 5 | 5 | 5 | 5 | 5 | 5 |
| データベースあたりの最大ストレージ (GB) | 2 | 2 | 2 | 2 | 2 | 2 | 2 | 2 |
||||||||

<sup>1</sup> その他の考慮事項については、「[高密度エラスティック プールでのリソース管理](elastic-pool-resource-management.md)」を参照してください。

<sup>2</sup> 個々のデータベースの最大同時実行ワーカー (要求) 数については、[単一データベースのリソース制限](resource-limits-vcore-single-databases.md)に関するページを参照してください。 たとえば、エラスティック プールが Gen5 を使用し、データベースあたりの最大仮想コア数が 2 に設定されている場合、最大同時ワーカー数の値は 200 です。  データベースあたりの最大仮想コアが 0.5 に設定されている場合、Gen 5 では仮想コアあたりの最大同時ワーカー数が 100 なので、最大同時ワーカー数の値は 50 です。 その他にもデータベースあたりの最大仮想コア数設定が 1 仮想コア以下である場合は、最大同時ワーカー数が同様に再スケールされます。

### <a name="standard-elastic-pool-limits"></a>Standard エラスティック プールの制限

| プールあたりの eDTU 数 | **50** | **100** | **200** | **300** | **400** | **800**|
|:---|---:|---:|---:| ---: | ---: | ---: |
| プールあたりの付属ストレージ (GB) <sup>1</sup> | 50 | 100 | 200 | 300 | 400 | 800 |
| プールあたりの最大ストレージ容量 (GB) | 500 | 750 | 1024 | 1280 | 1536 | 2048 |
| プールあたりの最大インメモリ OLTP ストレージ容量 (GB) | 該当なし | なし | なし | なし | なし | 該当なし |
| プールあたりの最大 DB 数 <sup>2</sup> | 100 | 200 | 500 | 500 | 500 | 500 |
| プールあたりの最大同時実行ワーカー (要求) 数 <sup>3</sup> | 100 | 200 | 400 | 600 | 800 | 1600 |
| プールあたりの最大同時セッション数 <sup>3</sup> | 30000 | 30000 | 30000 | 30000 | 30000 | 30000 |
| データベースあたりの選択可能な最小 DTU 数 | 0、10、20、50 | 0、10、20、50、100 | 0、10、20、50、100、200 | 0、10、20、50、100、200、300 | 0、10、20、50、100、200、300、400 | 0、10、20、50、100、200、300、400、800 |
| データベースあたりの選択可能な最大 DTU 数 | 10、20、50 | 10、20、50、100 | 10、20、50、100、200 | 10、20、50、100、200、300 | 10、20、50、100、200、300、400 | 10、20、50、100、200、300、400、800 |
| データベースあたりの最大ストレージ (GB) | 1024 | 1024 | 1024 | 1024 | 1024 | 1024 |
||||||||

<sup>1</sup> 追加のストレージがプロビジョニングされたために発生する追加コストの詳細については、[SQL Database の価格オプション](https://azure.microsoft.com/pricing/details/sql-database/elastic/)に関するページを参照してください。

<sup>2</sup> その他の考慮事項については、「[高密度エラスティック プールでのリソース管理](elastic-pool-resource-management.md)」を参照してください。

<sup>3</sup> 個々のデータベースの最大同時実行ワーカー数 (要求数) については、[単一データベースのリソース制限](resource-limits-vcore-single-databases.md)に関するページを参照してください。 たとえば、エラスティック プールが Gen5 を使用し、データベースあたりの最大仮想コア数が 2 に設定されている場合、最大同時ワーカー数の値は 200 です。  データベースあたりの最大仮想コアが 0.5 に設定されている場合、Gen 5 では仮想コアあたりの最大同時ワーカー数が 100 なので、最大同時ワーカー数の値は 50 です。 その他にもデータベースあたりの最大仮想コア数設定が 1 仮想コア以下である場合は、最大同時ワーカー数が同様に再スケールされます。

### <a name="standard-elastic-pool-limits-continued"></a>Standard エラスティック プールの制限 (続き)

| プールあたりの eDTU 数 | **1200** | **1600** | **2000** | **2500** | **3000** |
|:---|---:|---:|---:| ---: | ---: |
| プールあたりの付属ストレージ (GB) <sup>1</sup> | 1200 | 1600 | 2000 | 2500 | 3000 |
| プールあたりの最大ストレージ容量 (GB) | 2560 | 3072 | 3584 | 4096 | 4096 |
| プールあたりの最大インメモリ OLTP ストレージ容量 (GB) | 該当なし | なし | なし | なし | 該当なし |
| プールあたりの最大 DB 数 <sup>2</sup> | 500 | 500 | 500 | 500 | 500 |
| プールあたりの最大同時実行ワーカー (要求) 数 <sup>3</sup> | 2400 | 3200 | 4000 | 5000 | 6000 |
| プールあたりの最大同時セッション数 <sup>3</sup> | 30000 | 30000 | 30000 | 30000 | 30000 |
| データベースあたりの選択可能な最小 DTU 数 | 0、10、20、50、100、200、300、400、800、1200 | 0、10、20、50、100、200、300、400、800、1200、1600 | 0、10、20、50、100、200、300、400、800、1200、1600、2000 | 0、10、20、50、100、200、300、400、800、1200、1600、2000、2500 | 0、10、20、50、100、200、300、400、800、1200、1600、2000、2500、3000 |
| データベースあたりの選択可能な最大 DTU 数 | 10、20、50、100、200、300、400、800、1200 | 10、20、50、100、200、300、400、800、1200、1600 | 10、20、50、100、200、300、400、800、1200、1600、2000 | 10、20、50、100、200、300、400、800、1200、1600、2000、2500 | 10、20、50、100、200、300、400、800、1200、1600、2000、2500、3000 |
| データベースあたりの最大ストレージ (GB) | 1024 | 1536 | 1792 | 2304 | 2816 |
|||||||

<sup>1</sup> 追加のストレージがプロビジョニングされたために発生する追加コストの詳細については、[SQL Database の価格オプション](https://azure.microsoft.com/pricing/details/sql-database/elastic/)に関するページを参照してください。

<sup>2</sup> その他の考慮事項については、「[高密度エラスティック プールでのリソース管理](elastic-pool-resource-management.md)」を参照してください。

<sup>3</sup> 個々のデータベースの最大同時実行ワーカー数 (要求数) については、[単一データベースのリソース制限](resource-limits-vcore-single-databases.md)に関するページを参照してください。 たとえば、エラスティック プールが Gen5 を使用し、データベースあたりの最大仮想コア数が 2 に設定されている場合、最大同時ワーカー数の値は 200 です。  データベースあたりの最大仮想コアが 0.5 に設定されている場合、Gen 5 では仮想コアあたりの最大同時ワーカー数が 100 なので、最大同時ワーカー数の値は 50 です。 その他にもデータベースあたりの最大仮想コア数設定が 1 仮想コア以下である場合は、最大同時ワーカー数が同様に再スケールされます。

### <a name="premium-elastic-pool-limits"></a>Premium エラスティック プールの制限

| プールあたりの eDTU 数 | **125** | **250** | **500** | **1000** | **1500**|
|:---|---:|---:|---:| ---: | ---: |
| プールあたりの付属ストレージ (GB) <sup>1</sup> | 250 | 500 | 750 | 1024 | 1536 |
| プールあたりの最大ストレージ容量 (GB) | 1024 | 1024 | 1024 | 1024 | 1536 |
| プールあたりの最大インメモリ OLTP ストレージ容量 (GB) | 1 | 2 | 4 | 10 | 12 |
| プールあたりの最大 DB 数 <sup>2</sup> | 50 | 100 | 100 | 100 | 100 |
| プールあたりの最大同時実行ワーカー (要求) 数 <sup>3</sup> | 200 | 400 | 800 | 1600 | 2400 |
| プールあたりの最大同時セッション数 <sup>3</sup> | 30000 | 30000 | 30000 | 30000 | 30000 |
| データベースあたりの最小 eDTU 数 | 0、25、50、75、125 | 0、25、50、75、125、250 | 0、25、50、75、125、250、500 | 0、25、50、75、125、250、500、1000 | 0、25、50、75、125、250、500、1000|
| データベースあたりの最大 eDTU 数 | 25、50、75、125 | 25、50、75、125、250 | 25、50、75、125、250、500 | 25、50、75、125、250、500、1000 | 25、50、75、125、250、500、1000|
| データベースあたりの最大ストレージ (GB) | 1024 | 1024 | 1024 | 1024 | 1536 |
|||||||

<sup>1</sup> 追加のストレージがプロビジョニングされたために発生する追加コストの詳細については、[SQL Database の価格オプション](https://azure.microsoft.com/pricing/details/sql-database/elastic/)に関するページを参照してください。

<sup>2</sup> その他の考慮事項については、「[高密度エラスティック プールでのリソース管理](elastic-pool-resource-management.md)」を参照してください。

<sup>3</sup> 個々のデータベースの最大同時実行ワーカー数 (要求数) については、[単一データベースのリソース制限](resource-limits-vcore-single-databases.md)に関するページを参照してください。 たとえば、エラスティック プールが Gen5 を使用し、データベースあたりの最大仮想コア数が 2 に設定されている場合、最大同時ワーカー数の値は 200 です。  データベースあたりの最大仮想コアが 0.5 に設定されている場合、Gen 5 では仮想コアあたりの最大同時ワーカー数が 100 なので、最大同時ワーカー数の値は 50 です。 その他にもデータベースあたりの最大仮想コア数設定が 1 仮想コア以下である場合は、最大同時ワーカー数が同様に再スケールされます。

### <a name="premium-elastic-pool-limits-continued"></a>Premium エラスティック プールの制限 (続き)

| プールあたりの eDTU 数 | **2000** | **2500** | **3000** | **3500** | **4000**|
|:---|---:|---:|---:| ---: | ---: |
| プールあたりの付属ストレージ (GB) <sup>1</sup> | 2048 | 2560 | 3072 | 3548 | 4096 |
| プールあたりの最大ストレージ容量 (GB) | 2048 | 2560 | 3072 | 3548 | 4096|
| プールあたりの最大インメモリ OLTP ストレージ容量 (GB) | 16 | 20 | 24 | 28 | 32 |
| プールあたりの最大 DB 数 <sup>2</sup> | 100 | 100 | 100 | 100 | 100 |
| プールあたりの最大同時実行ワーカー (要求) 数 <sup>3</sup> | 3200 | 4000 | 4800 | 5600 | 6400 |
| プールあたりの最大同時セッション数 <sup>3</sup> | 30000 | 30000 | 30000 | 30000 | 30000 |
| データベースあたりの選択可能な最小 DTU 数 | 0、25、50、75、125、250、500、1000、1750 | 0、25、50、75、125、250、500、1000、1750 | 0、25、50、75、125、250、500、1000、1750 | 0、25、50、75、125、250、500、1000、1750 | 0、25、50、75、125、250、500、1000、1750、4000 |
| データベースあたりの選択可能な最大 DTU 数 | 25、50、75、125、250、500、1000、1750 | 25、50、75、125、250、500、1000、1750 | 25、50、75、125、250、500、1000、1750 | 25、50、75、125、250、500、1000、1750 | 25、50、75、125、250、500、1000、1750、4000 |
| データベースあたりの最大ストレージ (GB) | 2048 | 2560 | 3072 | 3584 | 4096 |
|||||||

<sup>1</sup> 追加のストレージがプロビジョニングされたために発生する追加コストの詳細については、[SQL Database の価格オプション](https://azure.microsoft.com/pricing/details/sql-database/elastic/)に関するページを参照してください。

<sup>2</sup> その他の考慮事項については、「[高密度エラスティック プールでのリソース管理](elastic-pool-resource-management.md)」を参照してください。

<sup>3</sup> 個々のデータベースの最大同時実行ワーカー数 (要求数) については、[単一データベースのリソース制限](resource-limits-vcore-single-databases.md)に関するページを参照してください。 たとえば、エラスティック プールが Gen5 を使用し、データベースあたりの最大仮想コア数が 2 に設定されている場合、最大同時ワーカー数の値は 200 です。  データベースあたりの最大仮想コアが 0.5 に設定されている場合、Gen 5 では仮想コアあたりの最大同時ワーカー数が 100 なので、最大同時ワーカー数の値は 50 です。 その他にもデータベースあたりの最大仮想コア数設定が 1 仮想コア以下である場合は、最大同時ワーカー数が同様に再スケールされます。

> [!IMPORTANT]
> 現在、1 TB を超える Premium レベルのストレージは、中国東部、中国北部、ドイツ中部、ドイツ北東部を除くすべてのリージョンで利用できます。 これらのリージョンでは、Premium レベルのストレージの最大容量は 1 TB です。  詳しくは、[P11-P15 の現在の制限事項](single-database-scale.md#p11-and-p15-constraints-when-max-size-greater-than-1-tb)に関するページをご覧ください。

エラスティック プールのすべての DTU が使用されている場合は、プール内の各データベースが、同量のリソースを受け取ってクエリを処理します。 SQL Database サービスは、コンピューティング時間を均等にすることで、データベース間におけるリソース共有の公平性を実現します。 それ以外の場合、エラスティック プールのリソース共有の公平性は、データベースあたりの DTU分が 0 以外の値に設定されているときに、リソース量に加えて各データベースに適用されることが保証されます。

> [!NOTE]
> `tempdb` の制限については、[tempdb の制限](/sql/relational-databases/databases/tempdb-database#tempdb-database-in-sql-database)に関する記事を参照してください。
>
> Premium サービス レベルのストレージの制限事項に関するその他の詳細については、「[ストレージ スペースのガバナンス](resource-limits-logical-server.md#storage-space-governance)」を参照してください。

### <a name="database-properties-for-pooled-databases"></a>プールされたデータベースのデータベース プロパティ

必要に応じて、各エラスティック プールに対して、データベースあたりの最小および最大 DTU 数を指定し、プール内のリソース消費パターンを変更できます。 指定された最小値と最大値は、プール内のすべてのデータベースに適用されます。 プール内の個々のデータベースに対する最大および最小 DTU 数のカスタマイズはサポートされていません。 

たとえば、1 つのデータベースによってすべてのプール ストレージが消費されてしまわないように、データベースあたりの最大ストレージを設定することもできます。 この設定は、データベースごとに個別に構成できます。

次の表には、プールされたデータベースのデータベース プロパティが説明されています。 

| プロパティ | 説明 |
|:--- |:--- |
| データベースあたりの最大 DTU 数 |プール内の他のデータベースによる使用状況に基づいて使用可能な場合にプール内の任意のデータベースが使用できる DTU の最大数。 データベースごとの最大 DTU は、データベースに対して保証されたリソースではありません。 各データベースのワークロードで、使用可能なすべてのプール リソースを適切に実行する必要がない場合、単一のデータベースによってプール リソースが独占されないように、データベースあたりの最大 DTU 数を設定することを検討してください。 プールでは通常、ホットとコールドのデータベース使用パターンがあり、すべてのデータベースが同時に最大に使用されることはないため、ある程度高めに上限が設定されています。 |
| データベースあたりの最小 DTU 数 |プール内の任意のデータベース用に予約されている DTU の最小数。 プール内の他のデータベースによるリソースの使用量に関係なく、各データベースのリソースの可用性を保証する必要がある場合は、データベースごとに最小 DTU 数を設定することを検討してください。 データベースあたりの最小 DTU は 0 に設定でき、これが既定値です。 このプロパティは、0 とデータベースあたりの平均 DTU 使用率の間に設定されます。|
| データベースあたりの最大ストレージ容量 |プール内のデータベースに対してユーザーによって設定される最大データベース サイズ。 プールされたデータベースは割り当てられたプール ストレージを共有するため、データベースが到達できるサイズは、残りのプール ストレージと最大データベース サイズのうち、どちらか小さい方に制限されます。 最大データベース サイズとはデータ ファイルの最大サイズのことであり、ログ ファイルによって使用される領域は含まれません。 |
|||

> [!IMPORTANT]
> エラスティック プール内のリソースは有限であるため、データベースあたりの最小 DTU数を 0 よりも大きい値に設定すると、各データベースのリソース使用率が暗黙的に制限されます。 ある時点で、プール内の大部分のデータベースがアイドル状態の場合、その時点でアクティブになっているデータベースでは、最小 DTU 数の保証を満たすために予約されているリソースは使用できません。
>
> また、データベースあたりの最小 DTU 数を 0 よりも大きい値に設定すると、プールに追加できるデータベースの数が暗黙的に制限されます。 たとえば、400 個の DTU プールで最小 DTU 数を 100 に設定すると、データベースごとに 100 個の DTU が予約されるため、プールに追加できるデータベースの数は 4 個以下になります。
> 

データベースごとのプロパティは DTU で表現されますが、データ IO、ログ IO、バッファー プール メモリ、ワーカー スレッドなど、他の種類のリソースの消費も制御されます。 データベースごとの DTU の最小値と最大値を調整すると、すべてのリソースの種類の予約と制限がそれに応じて調整されます。

データベースごとの DTU の最小値と最大値は、ユーザー ワークロードによるリソース消費には適用されますが、内部プロセスによるリソース消費には適用されません。 たとえば、データベースごとの DTU の最大値がプール eDTU の半分に設定されているデータベースの場合、ユーザー ワークロードはバッファー プール メモリの半分以上を消費できません。 ただし、このデータベースは、内部プロセスによって読み込まれたバッファー プール内のページを引き続き利用できます。 詳細については、「[ユーザー ワークロードと内部プロセスによるリソース使用量](resource-limits-logical-server.md#resource-consumption-by-user-workloads-and-internal-processes)」を参照してください。

## <a name="next-steps"></a>次のステップ

* 単一データベースに対する仮想コア リソースの制限については、[仮想コア購入モデルを使用した単一データベースに対するリソース制限](resource-limits-vcore-single-databases.md)に関するページを参照してください
* 単一データベースに対する DTU のリソース制限については、[DTU 購入モデルを使用した単一データベースに対するリソース制限](resource-limits-dtu-single-databases.md)に関するページを参照してください
* エラスティック プールに対する仮想コア リソースの制限については、[仮想コア購入モデルを使用したエラスティック プールに対するリソース制限](resource-limits-vcore-elastic-pools.md)に関するページを参照してください
* Azure SQL Managed Instance に対するリソース制限については、[SQL Managed Instance のリソース制限](../managed-instance/resource-limits.md)に関するページを参照してください。
* Azure の一般的な制限については、「[Azure サブスクリプションとサービスの制限、クォータ、制約](../../azure-resource-manager/management/azure-subscription-service-limits.md)」をご覧ください。
* 論理 SQL サーバーでのリソース制限については、サーバーおよびサブスクリプション レベルの制限に関する情報が記載された、[論理 SQL サーバー上のリソース制限の概要](resource-limits-logical-server.md)に関するページを参照してください。