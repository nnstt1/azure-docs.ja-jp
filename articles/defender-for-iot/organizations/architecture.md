---
title: エージェントレス ソリューション アーキテクチャとは
description: Microsoft Defender for IoT のエージェントレス アーキテクチャと情報フローについて説明します。
ms.topic: overview
ms.date: 11/09/2021
ms.openlocfilehash: 9a3a125ea91ccb9649a4bfc70555885b87d59e65
ms.sourcegitcommit: 677e8acc9a2e8b842e4aef4472599f9264e989e7
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 11/11/2021
ms.locfileid: "132318923"
---
# <a name="microsoft-defender-for-iot-architecture"></a>Microsoft Defender for IoT のアーキテクチャ

この記事では、Defender for IoT エージェントレス ソリューションの機能的なシステム アーキテクチャについて説明します。 Microsoft Defender for IoT には、ご使用環境のニーズに適合するように、組織向けのエージェントレス ソリューションとデバイス ビルダー向けのエージェントベースのソリューションという 2 つの機能セットが用意されています。

## <a name="agentless-solution-architecture-for-organizations"></a>組織向けのエージェントレス ソリューション アーキテクチャ
### <a name="defender-for-iot-components"></a>Defender for IoT のコンポーネント

Defender for IoT は、Azure クラウドとオンプレミスのコンポーネントの両方に接続します。 このソリューションは、複数のリモートの場所を持つ大規模で地理的に分散した環境でのスケーラビリティを考慮して設計されています。 このソリューションを使用すると、国、地域、事業単位、またはゾーンごとの多層分散アーキテクチャを実現できます。 

Microsoft Defender for IoT には、次のコンポーネントが含まれています。 

**クラウドに接続されたデプロイ**

- Microsoft Defender for IoT センサー VM またはアプライアンス
- クラウド管理と Microsoft Sentinel への統合に使用する Azure portal
- ローカル サイト管理のためのオンプレミスの管理コンソール
- 埋め込みセキュリティ エージェント (オプション)

**エアギャップ (オフライン) デプロイ**

- Microsoft Defender for IoT センサー VM またはアプライアンス
- ローカル サイト管理のためのオンプレミスの管理コンソール

:::image type="content" source="./media/architecture/defender-iot-security-architecture-v3.png" alt-text="Defender for IoT のアーキテクチャ。":::

### <a name="microsoft-defender-for-iot-sensors"></a>Microsoft Defender for IoT センサー

Defender for IoT センサーによって、ネットワーク デバイスが検出され、継続的に監視されます。 センサーは、IoT および OT デバイスのパッシブ (エージェントレス) 監視を使用して、ICS ネットワーク トラフィックを収集します。 
 
IoT および OT ネットワーク用に特別に構築されたエージェントレス テクノロジは、ネットワークに接続されてから数分以内に IoT と OT のリスクを詳細に可視化します。 非干渉型のネットワーク トラフィック分析 (NTA) アプローチにより、ネットワークとネットワーク デバイスのパフォーマンスへの影響はゼロになります。 
 
特許取得済みの、IoT および OT に対応した行動分析とレイヤー 7 のディープ パケット インスペクション (DPI) を適用することで、従来の署名ベースのソリューションを超えて分析し、異常または無許可のアクティビティに基づいて、高度な IoT と OT の脅威 (ファイルレス マルウェアなど) を即座に検出することができます。 
  
Defender for IoT センサーを SPAN ポートまたはネットワーク TAP に接続すると、IoT と OT ネットワーク トラフィックに対する DPI の実行が直ちに開始されます。 
 
データの収集、処理、分析、およびアラートは、センサー上で直接実行されます。 メタデータのみが管理コンソールに転送されるため、このプロセスは、帯域幅が低いか待機時間の長い接続を使用する場所に最適です。

センサーには 5 つの分析検出エンジンが含まれています。 このエンジンは、リアルタイムおよび事前記録されたトラフィックの両方の分析に基づいてアラートをトリガーします。 次のエンジンを使用できます。 

#### <a name="protocol-violation-detection-engine"></a>プロトコル違反検出エンジン
プロトコル違反検出エンジンは、次のように、ICS プロトコル仕様に違反するパケット構造とフィールド値の使用を識別します。Modbus の例外、廃止された関数コードのアラートの開始。

#### <a name="policy-violation-detection-engine"></a>ポリシー違反検出エンジン
機械学習を使用して、ポリシー違反検出エンジンは、特定の関数コードの無許可の使用、特定のオブジェクトへのアクセス、デバイス構成の変更など、ベースライン動作からの逸脱をユーザーに警告します。 次に例を示します。DeltaV ソフトウェア バージョンが変更され、無許可の PLC プログラミング アラートが生成されます。 具体的には、ポリシー違反エンジンは、産業有限状態モデリング (IFSM) と呼ばれる特許取得済みの手法を使用して、ICS ネットワークを状態と遷移の決定論的シーケンスとしてモデル化します。 ポリシー違反検出エンジンは、ICS ネットワークのベースラインを確立します。これにより、プラットフォームでは、(もともと OT ネットワークではなく IT 用に開発された) 一般的な数学的アプローチまたは分析よりもネットワークのベースラインを構築するために必要な学習期間が短くなります。

#### <a name="industrial-malware-detection-engine"></a>産業用マルウェア検出エンジン
産業用マルウェア検出エンジンにより、Conficker、Black Energy、Havex、WannaCry、NotPetya、Triton などの既知のマルウェアが存在することを示す動作が識別されます。 

#### <a name="anomaly-detection-engine"></a>異常検出エンジン
異常検出エンジンは、通常とは異なるマシン間 (M2M) 通信と動作を検出します。 ICS ネットワークを状態と遷移の決定論的シーケンスとしてモデル化することにより、プラットフォームでは、(もともと OT ではなく IT 用に開発された) 一般的な数学的アプローチまたは分析よりも必要な学習期間が短くなります。 また、擬陽性を最小限に抑えながら、異常を迅速に検出します。 異常検出エンジンのアラートには、過剰な SMB サインイン試行と、PLC スキャン検出アラートが含まれます。

#### <a name="operational-incident-detection"></a>操作上のインシデント検出
操作上のインシデント検出では、機器障害の初期兆候を示す可能性がある、断続的な接続などの操作上の問題が検出されます。 たとえば、デバイスの切断 (無応答) が疑われ、Siemens S7 stop PLC コマンドがアラートを送信される場合があります。

### <a name="management-consoles"></a>管理コンソール
ハイブリッド環境全体での Microsoft Defender for IoT の管理は、次の 2 つの管理ポータルを使用して行います。 
- センサー コンソール
- オンプレミスの管理コンソール
- Azure ポータル

### <a name="sensor-console"></a>センサー コンソール
センサー検出はセンサー コンソールに表示され、それらをネットワーク マップ、デバイス インベントリ、およびさまざまなレポート (リスク評価レポート、データ マイニング クエリ、攻撃ベクトルなど) で表示、調査、分析することができます。 また、コンソールを使用して、センサー エンジンによって検出された脅威を表示および処理したり、情報をパートナー システムに転送したり、ユーザーを管理したりすることもできます。

:::image type="content" source="./media/architecture/sensor-console-v2.png" alt-text="Defender for IoT のセンサー コンソール":::

### <a name="on-premises-management-console"></a>オンプレミスの管理コンソール
オンプレミスの管理コンソールを使用すると、セキュリティ オペレーション センター (SOC) のオペレーターは、複数のセンサーから 1 つのダッシュボードに集約されたアラートを管理および分析し、OT ネットワークの正常性を全体的に把握できます。

このアーキテクチャは、SOC レベルでのネットワークの包括的な統合ビュー、最適化されたアラート処理、操作上のネットワーク セキュリティの制御を提供します。これにより、意思決定とリスク管理を円滑に行うことができます。

管理コンソールは、マルチテナント、監視、データ分析、および集中型センサー リモート コントロールに加えて、追加のシステム メンテナンス ツール (アラートの除外など) と、各リモート アプライアンスの完全にカスタマイズされたレポート機能を提供します。 このアーキテクチャは、サイト レベル、ゾーン レベルでのローカル管理と、SOC 内でのグローバル管理の両方をサポートします。

管理コンソールは、回復に必要なすべての構成ファイルのバックアップを定期的に受信するバックアップ コンソールを提供する高可用性構成のためにデプロイできます。 プライマリ コンソールで障害が発生した場合、ローカル サイトの管理アプライアンスは自動的にフェールオーバーしてバックアップ コンソールと同期し、中断することなく可用性を維持します。

SOC ワークフローと Runbook に緊密に統合されているため、軽減アクティビティの優先順位付けと脅威のクロスサイト関連付けを簡単に行うことができます。

- 包括的 - デバイス管理、リスクと脆弱性の管理、および脅威監視とインシデント対応のための単一の統合プラットフォームにより、複雑さを軽減します。

- 集計と関連付け - すべてのサイトから収集されたデータとアラートを表示、集計、および分析します。

- すべてのセンサーの制御 - 1 つの場所からすべてのセンサーを構成および監視します。

   :::image type="content" source="media/updates/alerts-and-site-management-v2.png" alt-text="すべてのアラートと情報を管理します。":::

### <a name="azure-portal"></a>Azure portal

Azure の Azure portal で Defender for IoT を使用すると、次のようなことができます。

- ソリューション アプライアンスの購入

- ソフトウェアのインストールと更新

- Azure へのセンサーのオンボード

- 脅威インテリジェンス パッケージの更新

## <a name="next-steps"></a>次の手順

[Defender for IoT に関する FAQ](resources-frequently-asked-questions.md)

[システムの前提条件](quickstart-system-prerequisites.md)
