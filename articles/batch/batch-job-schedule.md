---
title: ジョブをスケジュールする
description: タスクを管理するにはジョブ スケジュールを使用します。
ms.topic: how-to
ms.date: 07/16/2021
ms.custom: seodec18
ms.openlocfilehash: a247be1826cd68ef2ac1302c1910eae74b2d65b6
ms.sourcegitcommit: 8669087bcbda39e3377296c54014ce7b58909746
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 07/18/2021
ms.locfileid: "114405764"
---
# <a name="schedule-jobs-for-efficiency"></a>効率のためにジョブのスケジュールを設定する

バッチ ジョブをスケジュールすると、[他のタスクに依存するタスク](batch-task-dependencies.md)を考慮しながら、最初に実行するジョブの優先順位を設定できます。 ジョブをスケジュールすることで、使用するリソースを最小限に抑えることができます。 必要なくなったノードは使用を停止でき、他のタスクに依存するタスクはジャストインタイムにスピンアップされるため、ワークフローが最適化されます。 また、同時には 1 つのジョブしか実行されず、新しいジョブは前のジョブが完了するまで開始されないため、オートコンプリートを使用するようにジョブを設定することもできます。

ジョブ マネージャー タスクを使用してスケジュールするタスクは、ジョブに関連付けられます。 ジョブ マネージャー タスクによって、ジョブのタスクが作成されます。 これを行うには、ジョブ マネージャー タスクが Batch アカウントを使用して認証を行う必要があります。 AZ_BATCH_AUTHENTICATION_TOKEN アクセス トークンを使用します。 トークンにより、ジョブの残りの部分へのアクセスが許可されます。

Azure CLI を使用してジョブを管理するには、「[az batch job-schedule](/cli/azure/batch/job-schedule)」を参照してください。 また、Azure portal でジョブ スケジュールを作成することもできます。

## <a name="schedule-a-job-in-the-azure-portal"></a>Azure portal でジョブをスケジュールする

1. [Azure portal](https://portal.azure.com/) にサインインします。
1. ジョブのスケジュールを設定する Batch アカウントを選択します。
1. 左側のナビゲーション ウィンドウで、 **[ジョブ スケジュール]** を選択します。
1. **[追加]** を選択して新しいジョブ スケジュールを作成します。
1. **[基本フォーム]** で、次の情報を入力します。
   - **[ジョブ スケジュール ID]** : このジョブ スケジュールの一意識別子。
   - **[表示名]** : この名前は省略可能であり、一意である必要はありません。 その最大長は 1024 文字です。
   - **[次の時刻までは実行しない]** : ジョブが実行される最も早い時刻を指定します。 これを設定しない場合、ジョブをすぐに実行できるようになります。
   - **[次の時刻の後には実行しない]** : ここで入力した時刻の後にジョブは実行されません。 時刻を指定しない場合は、繰り返しのジョブ スケジュールが作成されます。これは、明示的に終了するまでアクティブなままになります。
   - **[繰り返し間隔]** : ジョブ間の時間を指定する場合は **[有効]** を選択します。 スケジュールされた時刻には 1 つのジョブしか存在できないため、ジョブ スケジュールの下で新しいジョブを作成する時間になったが、前のジョブがまだ実行されている場合、Batch サービスは前のジョブが完了するまで新しいジョブを作成しません。
   - **[開始時間帯]** : ジョブを作成する必要がある時間間隔を指定する場合は **[カスタム]** を選択します。 この時間帯にジョブが作成されない場合、新しいジョブはスケジュールの次の繰り返しまで作成されません。

     :::image type="content" source="media/batch-job-schedule/add-job-schedule-02.png" alt-text="Azure portal の [ジョブ スケジュールの追加] オプションのスクリーンショット。":::  

1. 基本フォームの下部で、ジョブを実行するプールを指定します。 Batch アカウントのプールの一覧から選択するには、 **[更新]** を選択します。
1. **[プール ID]** と共に、次の情報を入力します。
   - **[ジョブ構成タスク]** : ジョブ マネージャー タスクのほか、ジョブの準備タスクとジョブのリリース タスク (使用している場合) に名前を点けて構成するには **[更新]** を選択します。
   - **[表示名]** : この名前は省略可能であり、一意である必要はありません。 その最大長は 1024 文字です。
   - **[優先順位]** : スライダーを使用してジョブの優先順位を設定するか、またはボックスに値を入力します。
   - **[最大実時間]** : 実行するジョブの最長時間を設定する場合は **[カスタム]** を選択します。 それを行った場合、その期間内に完了しないと Batch はそのジョブを終了します。
   - **[タスクの最大再試行回数]** : タスクを再試行できる回数を指定する場合は **[カスタム]** を、タスクを必要な回数だけ試行する場合は **[無制限]** を選択します。 これは、API 呼び出しの再試行回数と同じではありません。
   - **[すべてのタスクが完了したとき]** : 既定値は [NoAction] ですが、すべてのタスクが完了した (または、ジョブにタスクがなくなった) ときにジョブを終了する場合は **[TerminateJob]** を選択できます。
   - **[タスクが失敗したとき]** : 再試行回数に達するか、またはタスクの開始時にエラーが発生した場合、タスクは失敗します。 既定値は [NoAction] ですが、タスクが失敗した場合に、その終了条件に関連付けられているアクションを実行する場合は **[PerformExitOptionsJobAction]** を選択できます。

     :::image type="content" source="media/batch-job-schedule/add-job-schedule-03.png" alt-text="Azure portal での新しいジョブ スケジュールのジョブの指定オプションのスクリーンショット。":::

1. **[保存]** を選択してジョブ スケジュールを作成します。

ジョブの実行を追跡するには、 **[ジョブ スケジュール]** に戻り、ジョブ スケジュールを選択します。 **[実行情報]** を展開すると、詳細が表示されます。 また、この画面からジョブ スケジュールを終了または削除したり、無効にしたりすることもできます。

## <a name="next-steps"></a>次のステップ

- [ジョブとタスク](jobs-and-tasks.md)について学習します。
- [タスクの依存関係を作成](batch-task-dependencies.md)して、他のタスクに依存するタスクを実行する。
