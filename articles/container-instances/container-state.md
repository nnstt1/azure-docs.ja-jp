---
title: Azure Container Instances の状態
description: Azure Container Instances のプロビジョニング操作、コンテナー、およびコンテナー グループの状態について説明します。
ms.author: nickoman
author: nickomang
ms.topic: article
ms.date: 03/25/2021
ms.openlocfilehash: 0144b6ebd82c6df4c9ec501897a4315b4554103d
ms.sourcegitcommit: a038863c0a99dfda16133bcb08b172b6b4c86db8
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 06/29/2021
ms.locfileid: "113018645"
---
# <a name="azure-container-instances-states"></a>Azure Container Instances の状態

Azure Container Instances では、複数の独立した状態値が表示されます。 この記事では、これらの値、それらがある場所、示されている内容をカタログ化します。

## <a name="where-to-find-state-values"></a>状態値がある場所

Azure portal では、状態はさまざまな場所に表示されます。 すべての状態値には、リソースの JSON 定義を介してアクセスできます。 この値は、下に示す [概要] ブレードの [Eseentials]\(要点\) の下にあります。

:::image type="content" source="./media/container-state/provisioning-state.png" alt-text="Azure portal の [概要] ブレードが表示されています。&quot;JSON ビュー&quot; リンクが強調表示されています。":::

状態は、Azure portal 内の他の場所にも表示されます。 次の表は、状態値を確認できる場所をまとめたものです。

|名前|JSON パス|Azure portal の場所|
|-|-|-|
|コンテナー グループの状態|`properties.instanceView.state`|[概要] ブレードの [Essentials]\(要点\) の下|
|現在のコンテナーの状態|`properties.containers/initContainers[x].instanceView.currentState.state`|[コンテナー] ブレードの表の **[状態]** 列|
|以前のコンテナーの状態|`properties.containers/initContainers[x].instanceView.previousState.state`|[概要] ブレードの [Essentials]\(要点\) の下の " *[JSON ビュー]* " 経由|
|プロビジョニングの状態|`properties.provisioningState`|[概要] ブレードの [Essentials]\(要点\) の下の " *[JSON ビュー]* " 経由。HTTP 応答本文|

## <a name="container-groups"></a>コンテナー グループ

この値は、バックエンドのデプロイ済みコンテナー グループの状態です。

:::image type="content" source="./media/container-state/container-group-state.png" alt-text="Azure portal のリソースの [概要] ブレードが Web ブラウザーに表示されています。&quot;状態: 実行中&quot; というテキストが強調表示されています。":::

- **実行中**: コンテナー グループは実行中です。ユーザー操作、または再起動ポリシーによる停止が発生するまで、引き続き実行が試行されます。

- **停止**: コンテナー グループは停止されており、ユーザー操作なしで実行するようにスケジュールされません。

- **保留中**: コンテナー グループは初期化 (init コンテナーの実行を完了し、該当する場合は Azure ファイル ボリュームをマウントする) を待機しています。 ユーザー操作 (停止または削除) が行われない限り、コンテナーでは引き続き **[実行中]** 状態への到達が試行されます。

- **成功**: コンテナー グループは、完了するまで正常に実行されました。 *Never* と *On Failure* の再起動ポリシーにのみ適用されます。

- **失敗**: コンテナー グループは、完了まで実行できませんでした。 *Never* の再起動ポリシーにのみ適用されます。 この状態は、インフラストラクチャのエラー (例: Azure ファイル共有の資格情報が正しくない) またはユーザー アプリケーションのエラー (例: アプリケーションで、存在しない環境変数が参照されている) を示しています。

次の表は、指定された再起動ポリシーに基づいてコンテナー グループに適用される状態を示しています。

|値|完了することはない|On Failure (失敗時)|Always (常に)|
|--|--|--|--|
|実行中|はい|はい|はい|
|停止済み|はい|はい|はい|
|保留中|はい|はい|はい|
|成功|はい|はい|いいえ|
|失敗|はい|いいえ|いいえ|

## <a name="containers"></a>Containers

コンテナーには、現在の状態と前の状態という 2 つの状態値があります。 下に示す Azure portal では、現在の状態のみが表示されています。 コンテナー グループの再起動ポリシーに関係なく、すべての状態値がどのコンテナーにも適用されます。

> [!NOTE]
> JSON 値の `currentState` と `previousState` には、Azure portal の他の場所には表示されない終了コードや理由などの追加情報が含まれています。

:::image type="content" source="./media/container-state/container-state.png" alt-text="Azure portal の [コンテナー] ブレードが表示されています。表が表示され、[状態] 列の下で [実行中] が強調表示されています。":::

- **実行中**: コンテナーは実行中です。

- **待機中**: コンテナーは実行を待機しています。 この状態は、init コンテナーがまだ実行されているか、クラッシュ ループが原因でコンテナーがバックオフしていることを示しています。

- **終了**: コンテナーは終了し、終了コード値が示されています。

## <a name="provisioning"></a>プロビジョニング

この値は、コンテナー グループに対して最後に実行された操作の状態です。 通常、この操作は PUT (作成) ですが、POST (開始/再開/停止) または DELETE (削除) の場合もあります。

> [!IMPORTANT]
> また、ユーザーは、最終的でないプロビジョニング状態への依存関係を作成すべきではありません。 **成功** および **失敗** 状態への依存関係は許容されます。

JSON ビューに加えて、プロビジョニングの状態は [HTTP 呼び出しの応答本文](/rest/api/container-instances/containergroups/createorupdate#response)にも含まれています。

### <a name="create-start-and-restart-operations"></a>作成、開始、再開の各操作

> [!IMPORTANT]
> PUT (作成) 操作は非同期です。 PUT の応答本文から返された値は、最終的な状態ではありません。 デプロイの状態を監視するには、コンテナー グループの resourceId または AsyncOperation (PUT 応答ヘッダーで返される) に対して後続の GET 呼び出しを行うことをお勧めします。

これらの状態は、PUT (作成) と POST (開始/再開) イベントに適用されます。

- **保留中**: コンテナー グループは、ノードの割り当て、仮想ネットワークのプロビジョニング、またはユーザー イメージをプルする前に必要なその他のことなど、インフラストラクチャのセットアップを待機しています。

- **作成中**: インフラストラクチャのセットアップが完了しました。 これで、コンテナー グループは、実行中となり、必要なリソース (Azure ファイル ボリュームのマウント、イングレス IP アドレスの取得など) を受け取ります。

- **成功**: コンテナー グループは、コンテナーを実行状態にすることに成功し、必要なすべてのリソースを受け取りました。

- **異常**: コンテナー グループは異常です。 ノードがダウンした場合など、予期しない状態が発生した場合、コンテナー グループを移動して修復するためのジョブが自動的にトリガーされます。

- **修復中**: 異常な状態を修復するために、コンテナー グループは移動されています。

- **失敗**: コンテナー グループは、**成功** のプロビジョニング状態に到達できませんでした。 失敗は、さまざまな理由で発生する可能性があります (ネットワーク プロファイルにアクセスできない、指定されたリージョンの容量が不足している、ユーザー クォータが完全に消費された、30 分経過後のタイムアウトなど)。 失敗の詳細情報は、JSON ビューの `events` の下にあります。
    > [!NOTE]
    > [失敗] 状態は、リソースが削除されたり、成功の試行が停止されたりしていることを意味するものではありません。 コンテナー グループの状態は、グループの現在の状態を示します。 **[失敗]** プロビジョニング状態の後にコンテナー グループが実行されないようにするには、停止するか削除する必要があります。

### <a name="stop-and-delete-operations"></a>停止および削除操作

これらの値は、POST (停止) と DELETE (削除) イベントに適用されます。

- **成功**: コンテナー グループを停止または削除する操作が正常に完了しました。

- **失敗**: コンテナー グループは、 **[成功]** プロビジョニング状態に到達できませんでした。つまり、停止または削除イベントが完了しませんでした。 失敗の詳細情報は、JSON ビューの `events` の下にあります。