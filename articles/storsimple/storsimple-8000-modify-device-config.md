---
title: StorSimple 8000 シリーズ デバイスの構成を変更する |Microsoft Docs
description: StorSimple デバイス マネージャー サービスを使用して、デプロイ済みの StorSimple デバイスを再構成する方法について説明します。
services: storsimple
documentationcenter: NA
author: alkohli
manager: timlt
editor: ''
ms.assetid: ''
ms.service: storsimple
ms.devlang: NA
ms.topic: how-to
ms.tgt_pltfrm: NA
ms.workload: TBD
ms.date: 09/28/2017
ms.author: alkohli
ms.openlocfilehash: 8183d00f9846d3006ff0d246c8ea55407c45ac4b
ms.sourcegitcommit: beff1803eeb28b60482560eee8967122653bc19c
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 07/07/2021
ms.locfileid: "113430252"
---
# <a name="use-the-storsimple-device-manager-service-to-modify-your-storsimple-device-configuration"></a>StorSimple デバイス マネージャー サービスを使用して StorSimple デバイス構成を変更する

## <a name="overview"></a>概要

Azure ポータルでは、 **[設定]** ブレードの **[デバイスの設定]** セクションに、StorSimple デバイス マネージャー サービスによって管理されている StorSimple デバイスの再構成できるすべてのデバイス パラメーターが含まれます。 このチュートリアルでは、 **[設定]** ブレードを使用して以下のデバイス レベルのタスクを実行する方法について説明します。

* デバイスのフレンドリ名を変更する
* デバイスの時刻設定を変更する
* セカンダリ DNS を割り当てる
* ネットワーク インターフェイスの変更
* IP のスワップまたは再割り当て

## <a name="modify-device-friendly-name"></a>デバイスのフレンドリ名を変更する

Azure ポータルを使用してデバイス名を変更し、一意の表示名を自由に割り当てることができます。 デバイスのフレンドリ名を変更するには、デバイスの **[全般設定]** ブレードを使用します。 表示名には、64 文字以内で任意の文字を含めることができます。

> [!NOTE] 
> Azure ポータルでのデバイス名の変更は、デバイスのセットアップが完了する前にのみ実行できます。 デバイスの最小セットアップが完了した後でデバイス名を変更することはできません。

![[全般設定] 内のデバイス名](./media/storsimple-8000-modify-device-config/modify-general-settings3.png)

StorSimple デバイス マネージャー サービスに接続されている StorSimple デバイスには、既定の名前が割り当てられます。 通常、既定の名前はデバイスのシリアル番号を示します。 たとえば、8600-SHX0991003G44HT などの 15 文字の既定デバイス名は、次のような意味を持ちます。

* **8600** - デバイスのモデルを示します。
* **SHX** - 製造所を示します。
* **0991003** - 特定の製品を示します。
* **G44HT**- この最後の 5 桁の数字を増加させて、一意のシリアル番号を作成します。 この数字は、連番でない場合があります。

## <a name="modify-device-description"></a>デバイスの説明を変更する

デバイスの説明を変更するには、デバイスの **[全般設定]** ブレードを使用します。

![[全般設定] 内のデバイスの説明](./media/storsimple-8000-modify-device-config/modify-general-settings4.png)

一般に、デバイスの説明は、デバイスの所有者と物理的な場所を特定するのに役立ちます。 [説明] フィールドの文字数は 256 文字未満にする必要があります。

## <a name="modify-time-settings"></a>時刻の設定の変更

デバイスは、クラウド ストレージ サービス プロバイダーで認証を行うために時刻を同期する必要があります。 デバイスの時刻の設定を変更するには、dバイスの **[全般設定]** ブレードを使用します。

![[全般設定] 内のデバイスの説明 2](./media/storsimple-8000-modify-device-config/modify-general-settings2.png)

 ドロップダウン リストからタイム ゾーンを選択します。 最大 2 台のネットワーク タイム プロトコル (NTP) サーバーを指定できます。

 - **プライマリ NTP サーバー**: 構成は必須であり、StorSimple 用 Windows PowerShell を使用してデバイスを構成するときに指定します。 NTP サーバーとして、既定の Windows Server である **time.windows.com** を指定できます。 プライマリ NTP サーバーの構成は Azure ポータルから確認できますが、変更するには Windows PowerShell インターフェイスを使用する必要があります。 デバイスのプライマリ NTP サーバーを変更するには、`Set-HcsNTPClientServerAddress` コマンドレットを使用します。 詳細については、[Set-HcsNTPClientServerAddress](/previous-versions/windows/powershell-scripting/dn688138(v=wps.630)) コマンドレットの構文を参照してください。

- **セカンダリ NTP サーバー**: 構成は省略可能です。 ポータルを使用して、セカンダリ NTP サーバーを構成できます。

NTP サーバーの構成時には、データ センターからインターネットへの NTP トラフィックがネットワークで許可されていることを確認します。 パブリック NTP サーバーを指定する場合、外部ネットワークとの間を NTP トラフィックが行き来できるように、ネットワーク ファイアウォールやその他のセキュリティ デバイスを設定する必要があります。 双方向の NTP トラフィックが許可されていない場合は、内部 NTP サーバーを使用する必要があります (Windows ドメイン コントローラーにこの機能があります)。 デバイスは、時刻を同期できない場合、クラウド ストレージ プロバイダーと通信できない可能性があります。

パブリック NTP サーバーの一覧については、 [NTP Servers Web](https://www.pool.ntp.org/zone/us)を参照してください。

### <a name="what-happens-if-the-device-is-deployed-in-a-different-time-zone"></a>デバイスが異なるタイム ゾーンでデプロイされた場合の処理

デバイスが異なるタイム ゾーンでデプロイされると、そのデバイスのタイム ゾーンが変更されます。 すべてのバックアップ ポリシーではデバイスのタイム ゾーンが使用されるため、バックアップ ポリシーでは新しいタイム ゾーンに合わせて自動的に調整が行われます。 ユーザーが操作を行う必要はありません。

## <a name="modify-dns-settings"></a>DNS 設定の変更

DNS サーバーは、デバイスがクラウド ストレージ サービス プロバイダーと通信しようとする場合に使用されます。 デバイスの **[ネットワーク設定]** ブレードを使用して、構成済みの DNS 設定を表示して変更します。 

![[ネットワーク設定] 内の DNS 設定](./media/storsimple-8000-modify-device-config/modify-network-settings1.png)

可用性を高めるには、デバイスの初期デプロイ時にプライマリ DNS サーバーとセカンダリ DNS サーバーの両方を構成する必要があります。

**プライマリ DNS サーバー**: 初回のセットアップ中に、StorSimple 用 Windows PowerShell を使用して、プライマリ DNS サーバーを先に指定します。 プライマリ DNS サーバーは、Windows PowerShell インターフェイス経由でのみ再構成できます。 デバイスのプライマリ DNS サーバーを変更するには、`Set-HcsDNSClientServerAddress` コマンドレットを使用します。 詳細については、[Set-HcsDNSClientServerAddress](/previous-versions/windows/powershell-scripting/dn688138(v=wps.630)) コマンドレットの構文を参照してください。

**セカンダリ DNS サーバー**: セカンダリ DNS サーバーを変更するには、デバイスの Windows PowerShell インターフェイスで `Set-HcsDNSClientServerAddress` コマンドレットを使用するか、Azure ポータルで StorSimple デバイスの **[ネットワーク設定]** ブレードを使用します。

Azure ポータルでセカンダリ DNS サーバーを変更するには、次の手順を実行します。

1. StorSimple デバイス マネージャー サービスに移動します。 デバイスの一覧から、デバイスを選択してクリックします。

2. **[設定]** ブレードで、 **[デバイスの設定]、[ネットワーク]** の順に移動します。 これで、 **[ネットワーク設定]** ブレードが表示されます。 **[DNS 設定]** タイルをクリックします。 セカンダリ DNS サーバーの IP アドレスを変更します。

    ![セカンダリ DNS サーバーの IP アドレスを変更する](./media/storsimple-8000-modify-device-config/modify-secondary-dns1.png)

4. コマンド バーの **[保存]** をクリックし、確認を求められたら、 **[OK]** をクリックします。

    ![変更を保存して確認する](./media/storsimple-8000-modify-device-config/modify-secondary-dns-2.png)



## <a name="modify-network-interfaces"></a>ネットワーク インターフェイスの変更

デバイスには 6 つのデバイス ネットワーク インターフェイスがあり、そのうちの 4 つは 1 GbE、2 つは 10 GbE です。 これらのインターフェイスには、DATA 0 ～ DATA 5 のラベルが付けられています。 DATA 0、DATA 1、DATA 4、DATA 5 は 1 GbE ネットワーク インターフェイスですが、DATA 2 と DATA 3 は 10 GbE ネットワーク インターフェイスです。

**[ネットワーク設定]** ブレードを使用して、使用するインターフェイスをそれぞれ構成します。

![[ネットワーク設定] を使用してネットワーク インターフェイスを構成する](./media/storsimple-8000-modify-device-config/modify-network-settings3.png)

高可用性を確保するためには、デバイスに少なくとも 2 つの iSCSI インターフェイスと 2 つのクラウド対応インターフェイスを設定することをお勧めします。 使用しないインターフェイスは無効にすることをおすすめしますが、必須ではありません。

各ネットワーク インターフェイスには、以下のパラメーターが表示されます。

* **速度** - ユーザーが設定可能なパラメーターではありません。 DATA 0、DATA 1、DATA 4、DATA 5 は常に 1 GbE インターフェイスですが、DATA 2 と DATA 3 は 10 GbE インターフェイスです。
  
  > [!NOTE]
  > 速度と二重通信形式は常に自動的にネゴシエートされます。 Jumbo Frame はサポートされません。
  
* **インターフェイスの状態** - インターフェイスは有効または無効にできます。 有効にすると、デバイスがそのインターフェイスを使用しようとします。 ネットワークに接続され使用されているインターフェイスだけを有効にすることをお勧めします。 使用していないインターフェイスはすべて無効にします。
* **インターフェイスの種類** - このパラメーターを使用すると、クラウド ストレージのトラフィックから iSCSI トラフィックを分離することができます。 このパラメーターには、次のいずれかを指定できます。
  
  * **クラウド対応** - 有効にすると、デバイスはクラウドとの通信にこのインターフェイスを使用します。
  * **iSCSI対応** - 有効にすると、デバイスは iSCSI ホストとの通信にこのインターフェイスを使用します。
    
    クラウド ストレージのトラフィックから iSCSI トラフィックを分離することをお勧めします。 また、ホストがデバイスと同じサブネット内にある場合、ゲートウェイを割り当てる必要はないことに注意してください。ただし、ホストがデバイスと異なるサブネットにある場合は、ゲートウェイを割り当てる必要があります。
* **IP アドレス**: ネットワーク インターフェイスを設定するときは、仮想 IP (VIP) を設定する必要があります。 IPv4、IPv6、またはその両方を設定できます。 デバイス ネットワーク インターフェイスでは、IPv4 と IPv6 の両方のアドレス ファミリがサポートされます。 IPv4 を使用する場合は、ドットを使用した 10 進法で 32 ビットの IP アドレス (*xxx.xxx.xxx.xxx*) を指定します。 IPv6 を使用する場合は、4 桁のプレフィックスを付けるだけで済みます。このプレフィックスに基づいて、デバイス ネットワーク インターフェイスの 128 ビットのアドレスが自動で生成されます。
* **サブネット** - サブネット マスクを指し、Windows PowerShell インターフェイスを使用して構成されます。
* **ゲートウェイ** - 同じ IP アドレス空間 (サブネット) にないノードとこのインターフェイスが通信する場合に使用される、デフォルト ゲートウェイです。 デフォルト ゲートウェイは、サブネット マスクによって決定されるインターフェイスの IP アドレスと同じアドレス空間 (サブネット) にある必要があります。
* **固定 IP アドレス** - このフィールドは、DATA 0 インターフェイスの設定時にのみ使用できます。 更新やデバイスのトラブルシューティングなどの操作では、デバイス コントローラーに直接接続する必要がある場合があります。 固定 IP アドレスを使用すると、デバイス上のアクティブ コントローラーおよびパッシブ コントローラーの両方にアクセスできます。

> [!NOTE]
> * 適切に動作させるには、各デバイス インターフェイスの接続先のスイッチでインターフェイスの速度と二重化を確認します。 スイッチ インターフェイスは、ギガビット イーサネット (1000 Mbps) でネゴシエートするかまたはこれに合わせて構成されて、全二重である必要があります。 インターフェイスが低速または半二重で動作している場合、パフォーマンスの問題が発生します。
> * 中断やダウンタイムを最小限に抑えるには、デバイスの iSCSI ネットワーク インターフェイスの接続先となる各スイッチ ポートで、PortFast を有効にすることをお勧めします。 これにより、フェールオーバーの発生時にネットワーク接続を素早く確立できるようになります。

### <a name="configure-data-0"></a>DATA 0 を構成する

DATA 0 は、既定ではクラウドに対応しています。 DATA 0 を設定する場合、2 つの固定 IP アドレス (各コントローラーに 1 つ) も設定する必要があります。 これらの固定 IP アドレスを使用するとデバイス コントローラーに直接アクセスできるため、デバイスに更新プログラムをインストールするとき、ガベージ コレクションを正常に機能させるため、またはトラブルシューティングのためにコントローラーにアクセスするときに役立ちます。

[DATA 0 の設定] ブレードを使用して固定 IP コントローラーを再構成できます。

![ネットワーク インターフェイスを構成する - DATA 0](./media/storsimple-8000-modify-device-config/modify-network-settings2.png)

> [!NOTE]
> コントローラー用の固定 IP アドレスは、デバイスに更新プログラムを提供したり領域再利用アルゴリズム (ガベージ コレクション) を正常に機能させたりするために使用されます。 このため、固定 IP はルーティング可能でありインターネットに接続できる必要があります。

### <a name="configure-data-1---data-5"></a>DATA 1 ～ DATA 5 を構成する

DATA 1 から DATA 5 までのネットワーク インターフェイスでは、すべてのネットワーク設定を、次のスナップショットに示すように構成できます。

![ネットワーク インターフェイス DATA 1 ～ DATA 5 を構成する](./media/storsimple-8000-modify-device-config/modify-network-settings4.png)


## <a name="swap-or-reassign-ips"></a>IP のスワップまたは再割り当て

現時点では、コントローラーのすべてのネットワーク インターフェイスが (同じデバイスまたはネットワーク内の別のデバイスによって) 使用中の VIP に割り当てられている場合、コントローラーでフェールオーバーが行われます。 デバイスのネットワーク インターフェイスをスワップまたは再割り当てする場合は、IP が重複する状況の発生を回避するために、適切な手順に従う必要があります。

いずれかのネットワーク インターフェイスの VIP をスワップまたは再割り当てするには、以下の手順を実行します。

#### <a name="to-reassign-ips"></a>IP を再割り当てするには

1. 両方のインターフェイスの IP アドレスをクリアします。
2. IP アドレスがクリアされた後に、それぞれのインターフェイスに新しい IP アドレスを割り当てます。

## <a name="next-steps"></a>次のステップ

* [StorSimple デバイスの MPIO の構成方法](storsimple-8000-configure-mpio-windows-server.md)。
* [StorSimple デバイス マネージャー サービスを使用して StorSimple デバイスを管理する](storsimple-8000-manager-service-administration.md)方法について説明します。
