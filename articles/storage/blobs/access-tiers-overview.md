---
title: BLOB データのホット、クールおよびアーカイブ アクセス層
titleSuffix: Azure Storage
description: Azure ストレージでは、使用方法に応じて最も低コストな方法で BLOB データを保存できるよう、複数のアクセス層を用意しています。 BLOB データのホット、クールおよびアーカイブ アクセス層について説明します。
author: tamram
ms.author: tamram
ms.date: 11/01/2021
ms.service: storage
ms.subservice: blobs
ms.topic: conceptual
ms.reviewer: fryu
ms.openlocfilehash: bde25454692e470a6ae679de0ee1ca6854d471f2
ms.sourcegitcommit: 0415f4d064530e0d7799fe295f1d8dc003f17202
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 11/17/2021
ms.locfileid: "132724275"
---
# <a name="hot-cool-and-archive-access-tiers-for-blob-data"></a>BLOB データのホット、クールおよびアーカイブ アクセス層

クラウド内の格納データが急激に増加しています。 拡大するストレージ ニーズのコストを管理するには、アクセス頻度と保持期間に基づいてデータを整理するのが有効です。 Azure ストレージでは、使用方法に応じて最も低コストな方法で BLOB データを保存できるよう、複数のアクセス層を用意しています。 Azure Storage アクセス層には次のものがあります。

- **ホット アクセス層** - 頻繁にアクセスまたは変更するデータの保存に最適なオンライン層。 ホット アクセス層はストレージ コストが最も高く、アクセス コストは最も安いです。
- **クール アクセス層** - アクセスおよび変更の頻度が低いデータの保存に最適なオンライン層。 クール アクセス層のデータは、最低 30 日間は保存する必要があります。 クール アクセス層は、ホット アクセス層と比べて保存コストが安く、アクセス コストが高いです。
- **アーカイブ アクセス層** - めったにアクセスせず、数時間規模の待機時間の変動を許容できるデータ保存に最適なオフライン層。 アーカイブ アクセス層のデータは、最低 180 日間は保存する必要があります。

Azure ストレージの容量上限は、アクセス層によって決まるのではなく、アカウント単位で設定します。 1 つのアクセス層の容量を大きくすることも、2 つ以上の層に容量を分配することもできます。

## <a name="online-access-tiers"></a>オンライン アクセス層

オンライン アクセス層 (ホットまたはクール アクセス層) に保存してあるデータは、即座にアクセスできます。 ホット アクセス層は頻繁に使用するデータに最適です。クール アクセス層は、アクセス頻度はそれほど高くないものの読み取りと書き込みが必要なデータに最適です。

ホット アクセス層の使用シナリオには、たとえば次のようなケースがあります。

- 活発に使用されたり、頻繁に読み取りおよび書き込みがされると予想されるデータ。
- 処理を行い、その後でクール アクセス層に移行する予定のデータ。

クール アクセス層の使用シナリオには、たとえば次のようなケースがあります。

- 短期データ バックアップとディザスター リカバリー。
- 頻繁には使用しないものの、即座にアクセスできるようにしておきたい古いデータ セット。
- 追加データを収集、処理しながら、コストを抑えた方法で保存する必要がある大規模なデータ セット。

クール アクセス層ではデータを少し利用しにくくなりますが、持続性、データ取得待機時間、スループットはホット アクセス層と同様の高水準です。 クール アクセス層は、ホット アクセス層と比べてデータを少し利用しにくく、アクセス コストが高いですが、状況によっては保存に関わる総合的なコストが安くなるので、トレードオフとしてそれを許容できる場合があります。 詳細については、「[Storage の SLA](https://azure.microsoft.com/support/legal/sla/storage/v1_5/)」を参照してください。

汎用 v2 アカウントのクール アクセス層の BLOB は、30 日が経過する前に削除するか異なる層に移動した場合に、早期削除のペナルティを受けます。 この料金は日割り計算されます。 たとえば、BLOB をクール アクセス層に移動してから 21 日後に削除した場合は、BLOB をクール アクセス層に 9 日間 (30 − 21日) 保存する料金に相当する早期削除料金が発生します。

ホットおよびクール アクセス層では、すべての冗長性構成をサポートしています。 Azure Storage のデータ冗長性オプションの詳しい情報は「[Azure Storage の冗長性](../common/storage-redundancy.md)」をご覧ください。  

## <a name="archive-access-tier"></a>アーカイブ アクセス層

アーカイブ アクセス層は、めったにアクセスしないデータを保存するためのオフライン層です。 アーカイブ アクセス層は保存コストが最も安いですが、ホット、クール アクセス層と比べてデータ取得コストが高く、待機時間が長いです。 アーカイブ アクセス層の使用シナリオには、たとえば次のようなものがあります。

- 長期バックアップ、セカンダリ バックアップ、アーカイブ データセット
- 最終的に使用可能な形式に処理した後も保持する必要がある、元の (未加工の) データ
- 長期間格納しておく必要があり、ほとんどアクセスされることがない、コンプライアンスおよびアーカイブ データ

データは、少なくとも 180 日間、アーカイブ アクセス層に保持される必要があります。そうでない場合、早期削除料金の対象になります。 たとえば、BLOB をアーカイブ アクセス層に移動して、45 日後にそれを削除するかホット アクセス層に移動した場合、その BLOB を 135 (180 − 45) 日間アーカイブ アクセス層に保存する料金に相当する早期削除料金が発生します。

BLOB は、アーカイブ アクセス層にある間は、読み取りも変更もできません。 アーカイブ アクセス層の BLOB を読み取る、またはダウンロードするには、まずオンライン層 (ホットまたはクール アクセス層) にリハイドレートする必要があります。 アーカイブ アクセス層のデータは、リハイドレート操作に指定した優先度に応じて、リハイドレートするのに最大 15 時間かかる場合があります。 BLOB のリハイドレートの詳しい情報は、「[アーカイブ層からの BLOB のリハイドレートの概要](archive-rehydrate-overview.md)」をご覧ください。

アーカイブした BLOB のメタデータへの読み取りアクセスは引き続き可能であるため、BLOB とそのプロパティ、メタデータ、インデックス タグのリストを取得することができます。 アーカイブ アクセス層の BLOB のメタデータは読み取り専用ですが、BLOB インデックス タグは読み取り、書き込みができます。 アーカイブした BLOB のスナップショットはサポートしていません。

アーカイブ アクセス層の BLOB では次の操作ができます。

- [Copy Blob](/rest/api/storageservices/copy-blob)
- [Delete Blob](/rest/api/storageservices/delete-blob)
- [タグによる BLOB の検索](/rest/api/storageservices/find-blobs-by-tags)
- [Get Blob Metadata](/rest/api/storageservices/get-blob-metadata)
- [Get Blob Properties](/rest/api/storageservices/get-blob-properties)
- [BLOB タグの取得](/rest/api/storageservices/get-blob-tags)
- [BLOB を一覧表示する](/rest/api/storageservices/list-blobs)
- [BLOB タグの設定](/rest/api/storageservices/set-blob-tags)
- [Set Blob Tier](/rest/api/storageservices/set-blob-tier)

> [!NOTE]
> アーカイブ アクセス層は、ZRS、GZRS、RA-GZRS アカウントではサポートしていません。 LRS から GRS への移行は、アカウントを LRS に設定しているときにアーカイブ アクセス層に移動した BLOB がなければ可能です。 アカウントが LRS になってから 30 日未満の期間内に更新を行い、かつ、アカウントを LRS に設定しているときにアーカイブ アクセス層に移動した BLOB が存在しない場合は、アカウントを GRS に戻せます。

## <a name="default-account-access-tier-setting"></a>アカウントのデフォルト アクセス層の設定

ストレージ アカウントには、新しい BLOB を作成するオンライン層を指定するための、デフォルト アクセス層の設定が存在します。 デフォルト アクセス層には、ホット、クールいずれかのアクセス層を設定できます。 ユーザーは、BLOB をアップロードするとき、または BLOB の層を変更するときに、BLOB のデフォルト設定を個別に上書きできます。

新しい汎用 v2 ストレージ アカウントの既定のアクセス層は、既定でホット アクセス層に設定されています。 デフォルト アクセス層の設定は、ストレージ アカウントの作成時および作成後に変更できます。 ストレージ アカウントでこの設定を変更しない場合、または BLOB のアップロード時に層を明示的に設定しない場合、新しい BLOB は既定でホット アクセス層にアップロードされます。

明示的に層を割り当てていない BLOB では、アカウント のデフォルト アクセス層の設定によって層を判断します。 アカウントのデフォルト アクセス層の設定によって BLOB のアクセス層を判断した場合、Azure portal では、アクセス層が **“Hot (inferred)” (ホット アクセス層 (推定))** または **“Cool (inferred)” (クール アクセス層 (推定))** と表示されます。

アカウントのデフォルト アクセス層の設定を変更すると、アクセス層を明示的に設定していない、アカウント内のすべての BLOB にそれを適用します。 汎用 v2 アカウントで、アカウントのデフォルト アクセス層の設定をホットからクールに切り替えると、この設定に基づいてアクセス層を判断するすべての BLOB で、書き込み操作に対する料金が (10,000 件ごとに) 発生します。 汎用 v2 アカウントでクールからホット アクセス層へ切り替えると、読み取り操作 (10,000 件単位) とデータ取得 (GB 単位) の両方の料金が発生します。

レガシ BLOB Storage アカウントを作成するときには、作成時にデフォルト アクセス層をホットまたはクールに指定する必要があります。 レガシ BLOB Storage アカウントのデフォルト アカウント アクセス層をホットからクールに変更するのに料金は発生しません。 Blob Storage アカウントでクールからホットに切り替えた場合は、読み取り操作 (10,000 件単位) とデータ取得 (GB 単位) の両方の料金が発生します。 Microsoft では、可能な限り BLOB Storage アカウントではなく、汎用 v2 ストレージ アカウントを使用することをお勧めします。

> [!NOTE]
> アーカイブ アクセス層は、ストレージ アカウントのデフォルト アクセス層に設定できません。

## <a name="setting-or-changing-a-blobs-tier"></a>BLOB の層を設定または変更する

BLOB 作成時に層を明示的に設定するには、BLOB をアップロードするときに層を指定します。

BLOB 作成後は、次のいずれかの方法で層を変更できます。

- 直接、または[ライフサイクル管理](#blob-lifecycle-management)ポリシーを通じて [Set Blob Tier](/rest/api/storageservices/set-blob-tier) (BLOB の層を設定) 操作を呼び出す。 高頻度アクセス用の層から低頻度アクセス用の層に BLOB の層を変更するときは、[Set Blob Tier](/rest/api/storageservices/set-blob-tier) (BLOB の層を設定) を呼び出すのが通常最も良い方法です。
- [Copy Blob](/rest/api/storageservices/copy-blob) (BLOB のコピー) 操作を呼び出して、ある層から別の層に BLOB をコピーする。 アーカイブ アクセス層からオンライン層に BLOB をリハイドレートする、またはクールからホット アクセス層に BLOB を移動するほとんどのシナリオでは、[Copy Blob](/rest/api/storageservices/copy-blob) を呼び出すことをお勧めします。 ソース BLOB で必要な保存期間がまだ経過していない場合、BLOB をコピーすることで早期削除ペナルティを避けることができます。 ただし、BLOB をコピーすると、ソース BLOB とコピーで作成した BLOB の 2 つに対してストレージ容量の料金が発生します。

ホット アクセス層からクールまたはアーカイブ アクセス層へは、BLOB の層を即座に変更できます。クールからホット アクセス層への変更も同様です。 アーカイブ アクセス層からホットまたはクール アクセス層に BLOB をリハイドレートするには、最大で 15 時間かかります。

クール アクセス層とアーカイブ アクセス層の間で BLOB を移動する場合は、次の点にご注意ください。

- ストレージ アカウントのデフォルト アクセス層の設定によりクール アクセス層であると判断される BLOB をアーカイブ アクセス層に移動した場合、早期削除料金は発生しません。
- BLOB を明示的にクール層に移動した後でアーカイブ アクセス層に移動した場合は、早期削除料金が適用されます。

次の表は、BLOB をさまざまな層間で移動する方法をまとめたものです。

| Origin/Destination | ホット層 | クール層 | アーカイブ層 |
|--|--|--|--|
| **ホット層** | 該当なし | **Set Blob tier** または **Copy blob** を使用して、Blob の層をホットからクールに変更します。 [詳細情報](manage-access-tier.md)<br /><br />ライフサイクル管理ポリシーを使用して BLOB をクール層に移動します。 [詳細情報](lifecycle-management-overview.md) | **Set Blob tier** または **Copy blob** を使用して、Blob の層をホットからクールに変更します。 [詳細情報](archive-blob.md) <br /><br />ライフサイクル管理ポリシーを使用して BLOB をアーカイブします。 [詳細情報](lifecycle-management-overview.md) |
| **クール層** | **Set Blob tier** または **Copy blob** を使用して、Blob の層をホットからクールに変更します。 [詳細情報](manage-access-tier.md) <br /><br />ライフサイクル管理ポリシーを使用して BLOB をクール層に移動します。 [詳細情報](lifecycle-management-overview.md) | 該当なし | **Set Blob tier** または **Copy blob** を使用して、Blob の層をホットからクールに変更します。 [詳細情報](archive-blob.md) <br /><br />ライフサイクル管理ポリシーを使用して BLOB をアーカイブします。 [詳細情報](lifecycle-management-overview.md) |
| **アーカイブ層** | **Set Blob tier** または **Copy blob** を使用して復元にホット層を設定します。 [詳細情報](archive-rehydrate-to-online-tier.md) | **Set Blob tier** または **Copy blob** を使用して復元にホット層を設定します。 [詳細情報](archive-rehydrate-to-online-tier.md) | 該当なし |

## <a name="blob-lifecycle-management"></a>BLOB のライフサイクル管理

BLOB ストレージのライフサイクル管理では、指定した条件を満たしたときにデータを必要なアクセス層に切り替えるための、ルールに基づくポリシーを用意しています。 ライフサイクル管理によって、データに有効期限を設定することもできます。 詳細については、「[Azure Blob Storage アクセス層の自動化によるコストの最適化](./lifecycle-management-overview.md)」を参照してください。

> [!NOTE]
> [Set Blob Tier](/rest/api/storageservices/set-blob-tier) (BLOB の層を設定) および Azure Blob Storage ライフサイクル管理によって、premium ブロック BLOB ストレージ アカウントに保存しているデータの層を、ホット、クールおよびアーカイブ アクセス層に設定することはできません。 データを移動するには、[Put Block From URL API](/rest/api/storageservices/put-block-from-url) またはこの API をサポートしているバージョンの AzCopy によって、ブロック BLOB ストレージ アカウントから別のアカウントのホット アクセス層に、BLOB を同期的にコピーする必要があります。 **Put Block From URL** API は、サーバー上でデータを同期的にコピーします。つまり、呼び出しは、すべてのデータが元のサーバーの場所から移動先の場所に移動された場合にのみ完了します。

## <a name="summary-of-access-tier-options"></a>アクセス層のオプションの概要

次の表に、ホット、クールおよびアーカイブ アクセス層の機能の概要を記載します。

|  | **ホット層** | **クール層** | **アーカイブ層** |
|--|--|--|--|
| **可用性** | 99.9% | 99% | オフライン |
| **可用性** <br> **(RA-GRS 読み取り)** | 99.99% | 99.9% | オフライン |
| **利用料金** | ストレージ コストが高く、アクセスおよびトランザクション コストが安い | ストレージ コストが安く、アクセスおよびトランザクション コストが高い | ストレージ コストが最も安く、アクセスおよびトランザクション コストが最も高い |
| **最低推奨データ保持期間** | 該当なし | 30 日<sup>1</sup> | 180 日 |
| **待機時間** <br> **(1 バイト目にかかる時間)** | ミリ秒 | ミリ秒 | 時間<sup>2</sup> |
| **サポートされている冗長構成** | すべて | すべて | LRS、GRS、RA-GRS<sup>3</sup> のみ |

<sup>1</sup> 汎用 v2 アカウントのクール アクセス層のオブジェクトには、30 日の最低保持期間が存在します。 Blob Storage アカウントでは、クール アクセス層の最低保持期間は存在しません。

<sup>2</sup> アーカイブ アクセス層から BLOB をリハイドレートするときは、標準とリハイドレート優先の選択肢のどちらかを選べます。 データ取得待機時間とコストがそれぞれ異なります。 詳しくは、[アーカイブ層からの BLOB のリハイドレートの概要](archive-rehydrate-overview.md)に関する記事をご覧ください。

<sup>3</sup> Azure Storage の冗長性構成の詳しい情報は「[Azure Storage の冗長性](../common/storage-redundancy.md)」をご覧ください。

## <a name="pricing-and-billing"></a>価格と課金

すべてのストレージ アカウントで、BLOB の層に基づくブロック BLOB ストレージ価格モデルを使用しています。 料金に関して、次以降のセクションで説明する事柄にご注意ください。

ブロック BLOB の価格の詳しい情報は、[ブロック BLOB の価格](https://azure.microsoft.com/pricing/details/storage/blobs/)に関するページをご覧ください。

### <a name="storage-capacity-costs"></a>ストレージ容量のコスト

データの格納のコストは、格納されているデータの量だけでなく、アクセス層にも左右されます。 低頻度アクセス用の層ほど、ギガバイトあたりの容量のコストが安いです。

### <a name="data-access-costs"></a>データ アクセス コスト

データ アクセス料金は、よりクールな層になるほど高くなります。 クールおよびアーカイブ アクセス層では、データの読み取りにギガバイト単位でデータ アクセス料金が発生します。

### <a name="transaction-costs"></a>トランザクション コスト

すべての層でトランザクションごとに料金が発生し、低頻度アクセス用の層ほどこれが高くなります。

### <a name="geo-replication-data-transfer-costs"></a>geo レプリケーション データ転送コスト

GRS と RA-GRS を含む geo レプリケーションが構成されているアカウントだけに適用されます。 geo レプリケーション データ転送には、ギガバイトあたりの料金がかかります。

### <a name="outbound-data-transfer-costs"></a>送信データ転送のコスト

外部へのデータ転送 (Azure リージョン外に転送するデータ) は、帯域幅の使用量に従ってギガバイト単位で料金が発生します。 送信データ転送料金について詳しくは、「[帯域幅の料金詳細](https://azure.microsoft.com/pricing/details/bandwidth/)」ページを参照してください。

### <a name="changing-the-default-account-access-tier"></a>アカウントのデフォルト アクセス層を変更する

アカウントのアクセス層を変更すると、明示的に層を設定していないすべての BLOB に対し、層変更料金が発生します。 詳しくは、次のセクション「[BLOB のアクセス層を変更する](#changing-a-blobs-access-tier)」をご覧ください。

### <a name="changing-a-blobs-access-tier"></a>BLOB のアクセス層を変更する

BLOB の層を変更すると、料金に対する次の影響があることにご注意ください。

- BLOB がアップロードされたり階層間で移動されたりすると、アップロードまたは階層変更の直後に、対応する料金が請求されます。
- 低頻度アクセス用の層に BLOB を移動すると (ホットからクール、ホットからアーカイブ、またはクールからアーカイブ アクセス層)、移動先の層への書き込み操作の料金が発生します。具体的には、移動先の層に対する書き込み操作 (10,000 件単位) とデータ書き込み (GB 単位) の料金がかかります。
- 高頻度アクセス用の層に BLOB を移動すると (アーカイブからクール、アーカイブからホット、またはクールからホット アクセス層)、ソース層への読み取り操作の料金が発生します。具体的には、ソース層に対する読み取り操作 (10,000 件単位) とデータ取得 (GB 単位) の料金がかかります。 クール層またはアーカイブ層から移動された BLOB については、早期削除料金も適用される場合があります。
- アーカイブ アクセス層から BLOB をリハイドレートするときは、データを復元して BLOB のアクセス層をホットまたはクールに変更するまでは、その BLOB のデータに対し、アーカイブ データとしての料金が発生します。

次の表には、各層の変更料金をまとめてあります。

| | **書き込み料金 (操作 + アクセス)** | **読み取り料金 (操作 + アクセス)** |
| ---- | ----- | ----- |
| **Set Blob Tier** (BLOB の層を設定) 操作 | ホットからクール<br> ホットからアーカイブ アクセス層<br> クールからアーカイブ アクセス層 | アーカイブからクール<br> アーカイブからホット<br> クールからホット アクセス層

バージョン管理が有効になっている場合、または BLOB にスナップショットがある場合に BLOB のアクセス層を変更すると、追加料金が発生することがあります。 バージョン管理が有効になっている BLOB については、BLOB のバージョン管理に関するドキュメントの「[価格と課金](versioning-overview.md#pricing-and-billing)」を参照してください。 スナップショットを含む BLOB については、BLOB のスナップショットに関するドキュメントの「[価格と課金](snapshots-overview.md#pricing-and-billing)」を参照してください。

## <a name="feature-support"></a>機能サポート

次の表は、アカウントでのこの機能のサポートと、特定の機能を有効にした場合のサポートへの影響を示しています。

| ストレージ アカウントの種類 | Blob Storage (既定のサポート) | Data Lake Storage Gen2 <sup>1</sup> | NFS 3.0 <sup>1</sup> | SFTP <sup>1</sup> |
|--|--|--|--|--|
| Standard 汎用 v2 | ![はい](../media/icons/yes-icon.png) | ![はい](../media/icons/yes-icon.png) | ![はい](../media/icons/yes-icon.png) | ![はい](../media/icons/yes-icon.png) |
| Premium ブロック BLOB | ![いいえ](../media/icons/no-icon.png) | ![いいえ](../media/icons/no-icon.png) | ![いいえ](../media/icons/no-icon.png) | ![いいえ](../media/icons/no-icon.png) |

<sup>1</sup> Data Lake Storage Gen2、ネットワーク ファイル システム (NFS) 3.0 プロトコル、セキュア ファイル転送プロトコル (SFTP) のサポートでは、すべて階層型名前空間が有効になっているストレージ アカウントが必要です。

各リージョンでサポートしている機能の情報は、[各リージョンで利用可能な Azure 製品](https://azure.microsoft.com/global-infrastructure/services/?products=storage)に関するページをご覧ください。

## <a name="next-steps"></a>次の手順

- [Azure Storage アカウントの BLOB の層を管理する方法](manage-access-tier.md)
- [Azure Storage アカウントの既定のアカウント アクセス層を管理する方法](../common/manage-account-default-access-tier.md)
- [Azure Blob Storage アクセス層の自動化によるコストの最適化](./lifecycle-management-overview.md)
